---
date: 2007-10-01T07:46:00.004+02:00
tags:
- Tcl
- you've asked for it
title: You cannot start a Telnet session from Tcl shell
url: /2007/10/you-cannot-start-telnet-session-from.html
---

Recently, I've got a really interesting question: “If I start a telnet or SSH session from my Tcl shell with the exec command, I get the initial text, but then it all freezes. What's wrong?”<br/><br/>Let's start with the basic picture: When you open a telnet session to a router, the input and output is captured by the Exec process. When you open an outgoing telnet or SSH session to another router, the Exec process implements the telnet/ssh client functionality and switches the input/output data between the two TCP sessions:<img border="0" src="http://bp2.blogger.com/_K_pkZO5-tTg/Rt7RKhNcHAI/AAAAAAAAAIQ/C8K1I1MrebU/s400/tclTelnet_1.jpg" style="display:block; margin: 0.7em auto; text-align:center;"/>However, when you start the Tcl shell, the Exec CLI loses its control of the input/output streams, as they are taken over by Tclsh. The only means of communicating with the Exec CLI is through the typeahead and exec commands:<img border="0" src="http://bp3.blogger.com/_K_pkZO5-tTg/Rt7ROxNcHBI/AAAAAAAAAIY/hZiJOGJeah8/s400/tclTelnet_2.jpg" style="display:block; margin:0.7em auto; text-align:center;"/>So, if you start another Telnet session with the exec command, the Tclsh still controls the input/output of the user session and there is no way for the telnet client in the Exec CLI to communicate with the user.<img src="http://bp0.blogger.com/_K_pkZO5-tTg/Rt7RSBNcHCI/AAAAAAAAAIg/DZVeYMuc39E/s400/tclTelnet_3.jpg" style="display:block; margin:0.7em auto; text-align:center;cursor:pointer; cursor:hand;"/><p class="more">This article is part of <a href="https://blog.ipspace.net/2007/01/youve-asked-for-it-series.html">You've asked for it</a> <a href="https://blog.ipspace.net/tag/youve-asked-for-it.html">series</a>.</p>

