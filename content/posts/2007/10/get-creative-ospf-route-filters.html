---
url: /2007/10/get-creative-ospf-route-filters.html
title: "Get creative: OSPF route filters"
date: "2007-10-18T07:14:00.000+02:00"
tags: [ OSPF,IP routing ]
---

A few of the readers <a href="http://ioshints.blogspot.com/2007/10/running-ospf-across-firewall.html#c1511045555050799075">pointed out</a> that I've forgotten about <a href="http://www.cisco.com/en/US/products/ps6350/products_configuration_guide_chapter09186a00804556f4.html">OSPF route filters</a> in the post I wrote about <a href="http://ioshints.blogspot.com/2007/10/running-ospf-across-firewall.html">running OSPF across the firewall</a>. Actually I didn't, <a href="http://ioshints.blogspot.com/2007/10/running-ospf-across-firewall.html#c2359308957420020745">as it's only available in IOS</a>, not in ASA/PIX. However, this is not the familiar route update filtering available in EIGRP, BGP or RIP. The route updates (LSAs) are not filtered (as they should not be in a link-state protocol); the filters control the transfer of the IP prefixes from the SPF tree to the IP routing table.<br/><br/>To keep the record straight, I have to point out that this is not a new feature. You could have achieved similar results (almost) forever with the <strong>distance 255</strong> command (remember: 255 = totally unbeliavable = not installed). Later on, you could use the <strong>distribute-list in</strong> router configuraton command and in 12.2T this command has been extended to accept a <strong>route-map</strong>.<br/><br/>However, as this functionality is totally different from the distance vector route filters and doesn't play well with OSPF concepts, you have to use it very carefully. Every OSPF router still propagates all the LSAs, but if it fails to install the resulting IP prefixes in the IP routing table, it's a potential blackhole (see the following figure).<br/><br/><a href="http://bp3.blogger.com/_K_pkZO5-tTg/RxYpN9_sCpI/AAAAAAAAAsg/LgHr8WRpe44/s1600-h/OSPFFilters.jpg"><img alt="" border="0" id="BLOGGER_PHOTO_ID_5122326946137246354" src="http://bp3.blogger.com/_K_pkZO5-tTg/RxYpN9_sCpI/AAAAAAAAAsg/LgHr8WRpe44/s400/OSPFFilters.jpg" style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;"/></a><br/>With all this being said, I cannot see the “OSPF inbound filtering” as it's slightly inappropriately named being widely used. Do you have any great scenarios where this feature would be really helpful?

