---
url: /2007/10/running-ospf-across-firewall.html
title: "Running OSPF across a firewall"
date: "2007-10-16T07:42:00.000+02:00"
tags: [ firewalls,OSPF ]
---

When I was reading <a href="http://6200networks.com/?page_id=2">Joe Harris</a>' post detailing how you can <a href="http://6200networks.com/?p=23">run OSPF across a PIX/ASA firewall</a> (not with it, but between the adjacent routers), I wondered why anyone would want to do it. Our security gurus immediately gave me an answer: suppose you have two separate DMZs similar to the following setup:<br/><a href="http://bp2.blogger.com/_K_pkZO5-tTg/Rw80Id_sCCI/AAAAAAAAAjo/x43Ul4EmT4w/s1600-h/DoubleDMZ.jpg"><img alt="" border="0" id="BLOGGER_PHOTO_ID_5120368621438896162" src="http://bp2.blogger.com/_K_pkZO5-tTg/Rw80Id_sCCI/AAAAAAAAAjo/x43Ul4EmT4w/s400/DoubleDMZ.jpg" style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;"/></a><br/>You definitely don't want to attract traffic to a DMZ if the Internet uplink is down. One of the ways to handle it is to <a href="https://blog.ipspace.net/2007/06/ospf-default-route-design-scenarios.html">conditionally source the OSPF default route</a> on the outside routers (<a href="https://blog.ipspace.net/2007/08/conditional-ospf-default-route-tested.html">based on availability of BGP prefixes</a>, for example) and pass it to the inside routers that propagate it to the rest of the network.<br/><br/>The question that remains to be answered is “why wouldn't you run OSPF with the firewall?” If nothing else, if someone breaks into the outside router, he could manipulate the IP routing on the firewall, which is definitely not a good idea (you can't filter routing updates in OSPF like you can in RIP, EIGRP or BGP).

