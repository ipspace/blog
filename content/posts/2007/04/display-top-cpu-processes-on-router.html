---
url: /2007/04/display-top-cpu-processes-on-router/
title: "Display top CPU processes on the router"
date: "2007-04-12T17:43:00.000+02:00"
tags: [ network management,command line interface ]
---

I've almost started writing a Tcl procedure to display top-10 CPU-intensive processes on a router ... and then discovered the <strong>sorted</strong> option of the <strong>show processes cpu</strong> command. Even more, starting in IOS release 12.2T, the show processes cpu history command gives you a nice CPU utilization graph.<!--more-->Sample printouts are included below:<pre class="code">router#<strong>show processes cpu sorted 1min</strong><br/>CPU utilization for five seconds: 1%/0%; one minute: 2%; five minutes: 2%<br/> PID Runtime(ms)   Invoked      uSecs   5Sec   1Min   5Min TTY Process<br/>   5      180080      9762      18447  0.00%  1.75%  1.73%   0 Check heaps<br/>  62         648       181       3580  0.00%  0.31%  0.12%   2 Virtual Exec<br/>  25        4116       173      23791  0.49%  0.05%  0.00%   0 Per-minute Jobs<br/>  30         848      1172        723  0.00%  0.01%  0.00%   0 IP Input<br/>  81          12       357         33  0.08%  0.00%  0.00%   0 CEF Scanner<br/>   6           8         2       4000  0.00%  0.00%  0.00%   0 Pool Manager<br/>   4           0        86          0  0.00%  0.00%  0.00%   0 DHCPD Timer<br/>   3           4        27        148  0.00%  0.00%  0.00%   0 CRYPTO IKMP IPC<br/>   9           0         1          0  0.00%  0.00%  0.00%   0 AAA high-capacit<br/>  10          52       238        218  0.00%  0.00%  0.00%   0 ARP Input<br/>... rest deleted ...<br/>router#<strong>show processes cpu history</strong><br/>                22222<br/>    22          11111          11111<br/>100<br/> 90<br/> 80<br/> 70<br/> 60<br/> 50<br/> 40<br/> 30<br/> 20             *****<br/> 10             *****<br/>   0....5....1....1....2....2....3....3....4....4....5....5....<br/>             0    5    0    5    0    5    0    5    0    5<br/>               CPU% per second (last 60 seconds)<br/><br/>    2121121112121112121 11111222222122 12211121119112121 12221<br/>    1926405121716641818 76211100148411 70088401221831611470011<br/>100<br/> 90                                              *<br/> 80                                              *<br/> 70                                              *<br/> 60                                              *<br/> 50                                              *<br/> 40                                              *<br/> 30                               *              *<br/> 20 **** **  ***** **** **   ****** ** ***** *   ** ***  ****<br/> 10 ******************* **********#*** **********#****** *****<br/>   0....5....1....1....2....2....3....3....4....4....5....5....<br/>             0    5    0    5    0    5    0    5    0    5<br/>               CPU% per minute (last 60 minutes)<br/>              * = maximum CPU%   # = average CPU%<br/>     1<br/>    80<br/>    60<br/>100  *<br/> 90 **<br/> 80 **<br/> 70 **<br/> 60 **<br/> 50 **<br/> 40 **<br/> 30 **<br/> 20 **<br/> 10 **<br/>   0....5....1....1....2....2....3....3....4....4....5....5....<br/>             0    5    0    5    0    5    0    5    0    5<br/>                   CPU% per hour (last 72 hours)<br/>                  * = maximum CPU%   # = average CPU%</pre>

