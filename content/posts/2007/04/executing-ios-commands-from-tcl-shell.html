---
url: /2007/04/executing-ios-commands-from-tcl-shell.html
title: "Executing IOS commands from Tcl shell"
date: "2007-04-02T19:43:00.001+02:00"
tags: [ Tcl ]
---

The Tcl procedures used to execute IOS commands in Embedded Event Manager (cli_open, cli_write ...) don't work when you <a href="https://blog.ipspace.net/2007/03/running-tcl-procedures-from-command.html">start Tcl shell from command line interface</a>. To execute IOS commands in this context, use:<ul><li><strong>exec <em>command</em></strong> to execute an exec-level command, for example <strong>exec "show ip route"</strong></li>
<li><strong>ios_config <em>mode</em> <em>command</em></strong> to configure the router</li>
</ul>
<!--more-->If the first parameter of the ios_config command is a global configuration command, you shall omit the second parameter (for example, <strong>ios_config "hostname router"</strong>). To configure a parameter in one of the sub-configuration modes (for example, interface state), use the first parameter to specify the configuration mode and the second parameter as the actual configuration command (for example, <strong>ios_config "interface loop 0" "no shutdown"</strong>). And if you want to configure BGP neighbor in VRF address family within the BGP routing process ... then <span style="text-decoration:line-through;">you're out of luck, you can't do it with Tcl shell</span> you just keep adding parameters (undocumented!) to the <strong>ios_config</strong> command. You can even perform several configuration tasks in one go, for example <strong>ios_config "interface loopback 111" "ip address 1.2.3.4 255.255.255.255" "description Test" "ip ospf cost 20"</strong>.<br/><br/><strong>Note:</strong> I knew what I wrote initially did not feel right (although that's what the docs say), so I simply had to go back and so some more testing. <p class="info">An <a href="http://wiki.nil.com/Executing_IOS_commands_from_Tcl_shell">in-depth version of this article</a> is available in the CT3 wiki</p>
<div class="more">You can find more Tclsh-related information in the <a href="http://wiki.nil.com/Tclsh_on_Cisco_IOS_tutorial">Tclsh on Cisco IOS tutorial</a>. Sample Tclsh scripts are available in the <a href="http://wiki.nil.com/Tclsh_script_library">Tclsh script library</a>. If you need expert help in planning, developing or deploying Tclsh scripts in your network, <a href="https://www.ipspace.net/Contact">contact the author</a>.</div>

