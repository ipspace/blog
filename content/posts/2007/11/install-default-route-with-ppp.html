---
url: /2007/11/install-default-route-with-ppp.html
title: "Install default route with PPP"
date: "2007-11-21T07:45:00.000+01:00"
tags: [ PPP,WAN,ADSL ]
---

<p>In my home office, I'm using DSL access to the Internet with ISDN backup to another ISP, as shown on the next figure:</p>
<div class="separator"><a href="http://bp2.blogger.com/_K_pkZO5-tTg/Rzwjmib6JaI/AAAAAAAAAuE/G0pcScF3Cy8/s1600-h/homeSetup.jpg"><img alt="" border="0" id="BLOGGER_PHOTO_ID_5133016820281386402" src="http://bp2.blogger.com/_K_pkZO5-tTg/Rzwjmib6JaI/AAAAAAAAAuE/G0pcScF3Cy8/s400/homeSetup.jpg"/></a></div>
<p>Obviously, I would like the ISDN backup to kick in whenever the primary connection goes down; two static default routes and <a href="https://blog.ipspace.net/2007/02/reliable-static-routing.html">reliable static routing on the primary default</a> seem like a perfect solution.<!--more--></p>
<p>However, as I'm using PPP encapsulation on the primary connection, there's another option: PPP can <a href="http://www.cisco.com/en/US/products/sw/iosswrel/ps5207/products_feature_guide09186a00802d41b3.html">insert a dynamic default route</a> whenever IPCP negotiations succeed (and remove it when the line protocol goes down). To configure this feature (introduced in IOS releases 12.3(11)T and 12.4), use the <strong>ppp ipcp route default</strong> interface configuration command on the primary dialer interface.</p>
<pre class="code">GW#<strong>show ip route | begin Gateway</strong><br/>Gateway of last resort is 10.0.0.33 to network 0.0.0.0<br/> <br/>     10.0.0.0/32 is subnetted, 2 subnets<br/>C 10.0.0.34 is directly connected, Serial1/0<br/>C 10.0.0.33 is directly connected, Serial1/0<br/>     192.168.0.0/28 is subnetted, 1 subnets<br/>C 192.168.0.0 is directly connected, FastEthernet0/0<br/><span class="high">S* 0.0.0.0/0 [1/0] via 10.0.0.33</span></pre><p class="warn">Contrary to the <a href="https://blog.ipspace.net/2007/06/dhcp-response-sets-default-route.html">DHCP-installed default route</a>, the PPP-installed default route has administrative distance 1 (and is thus impossible to override)</p>

