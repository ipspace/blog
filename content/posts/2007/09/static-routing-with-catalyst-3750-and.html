---
url: /2007/09/static-routing-with-catalyst-3750-and.html
title: "Static routing with Catalyst 3750: and the winner is …"
date: "2007-09-08T06:55:00.000+02:00"
tags: [ IP routing,LAN ]
---

The <a href="http://ioshints.blogspot.com/2007/09/get-creative-static-routing-with.html">Static routing with Catalyst 3750</a> post has generated a lot of good, creative ideas. Some of the proposed solutions were better than the others and some were simply not implementable (but nonetheless, had great creative potential :). Here is my list of the favorites:<br/><br/><strong>A routing protocol:</strong> as a few of you have rightly pointed out, this is the best choice.<br/><br/><strong>Aggressive Unidirectional Link Detection (UDLD)</strong>: this is my second favorite, as it's a reliable link-level mechanism that will detect a break in the fiber cable … exactly the right tool for the job.<br/><br/><strong>Object tracking and <a href="http://www.nil.com/ipcorner/SmallSiteMultiHoming/">reliable static routes</a></strong> would also work. This was my initial solution, but I was worried about its support in Catalyst IOS images. In the meantime, <a href="http://ioshints.blogspot.com/2007/09/workaround-track-actual-ip-routing.html#comment-4154465323697771064">one of the readers has noted</a> that the reliable static routing (or at least the configuration command) works in IOS release 12.2(37)SE, so this might be a viable solution.<br/><!--more--><strong>GRE tunneling with GRE keepalives</strong> probably has performance issues (I am not sure GRE is ASIC-switched on Catalyst 3750). The idea is to create a GRE tunnel between IP addresses on the primary fiber link. If the connectivity breaks, but the subnet remains available, the GRE keepalives will detect the failure. <br/><br/><strong>Spanning tree</strong> will not work. It does not test the two-way connectivity and might actually create a loop (if I stop receiving spanning tree hellos, I might assume the link is connected to a workstation and OK to use).<br/><br/><strong>Etherchannel and LACP</strong> would most likely fail. If the radio adapters work as switches, so you cannot establish an Etherchannel across the two links. I am also not sure that the PAgP or LACP would detect a unidirectional link when the carrier is present on both ends. Any experience?<br/><br/><strong>Bidirectional Forwarding Detection (BFD)</strong> is not available on Catalyst 3750 at all (the ISR routers got it as late as IOS release 12.4(15)T). Furthermore, BFD (as implemented in IOS today) detects a <em>routing protocol neighbor</em> failure, not an <em>IP next-hop</em> failure, so you need to run a routing protocol first (in which case we wouldn't be discussing this scenario, as we would have changed the boss, as someone has suggested).<br/><p class="note">Edited on September 9th to clearly indicate what would or would not work</p>

