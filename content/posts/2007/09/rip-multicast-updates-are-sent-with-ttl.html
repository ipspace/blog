---
date: 2007-09-25T07:19:00.000+02:00
tags:
- RIP
title: RIP multicast updates are sent with TTL of 2
url: /2007/09/rip-multicast-updates-are-sent-with-ttl.html
---

The “culprit” for today's post is <a href="http://www.rezalfr.org/francois.ropert/">Francois Ropert</a>, who provides a nice summary of Cisco-related blogs in his <a href="http://cisco.rezalfr.org/planet/">Planet Cisco</a> web site. Reading the CCIE-related posts, I've stumbled across a <a href="http://www.ethanbanks.net/?p=249">post by Ethan Banks</a> wondering whether the RIP updates are really sent with IP TTL set to 2. He concluded that this information cannot be deduced from the debugging outputs (anyone having an idea how you can get this information on the router?) and that he would need a sniffer to figure it out … and I thought: What a nice job for <a href="https://blog.ipspace.net/2007/09/five-routers-on-your-laptop.html">Dynamips</a>.<br/><br/>I took one of my <a href="http://www.zaplana.net/Articles/index.asp?view=RouterConfigs/OSPFTriangle.net">standard lab topologies</a> (three routers in a triangle running OSPF between them, see the figure below) and started it in Dynagen.<br/><br/><a href="http://bp0.blogger.com/_K_pkZO5-tTg/RvgEKt_sBsI/AAAAAAAAAdI/KDQW0juj-xU/s1600-h/OSPFTopology.jpg"><img alt="" border="0" id="BLOGGER_PHOTO_ID_5113841959071123138" src="http://bp0.blogger.com/_K_pkZO5-tTg/RvgEKt_sBsI/AAAAAAAAAdI/KDQW0juj-xU/s400/OSPFTopology.jpg" style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;"/></a><br/>When the routers were up and running I've configured RIP on all three of them:<pre class="code">router rip<br/> version 2<br/> network 10.0.0.0</pre>Next I've used Dynagen to start the packet capture on the first serial port of the R1 with the <strong>capture R1 s1/0 rip.cap PPP</strong> command. After a minute, I've stopped the capture with the <strong>no capture R1 s1/0</strong> command and opened the <a href="http://www.zaplana.net/Articles/index.asp?binary=RouterConfigs/rip.cap">rip.cap file</a> with <a href="http://www.wireshark.org/">Wireshark</a>. The results are shown below (click to enlarge); RIP multicast updates are actually sent with TTL 2 (at least in IOS release 12.4(15)T).<br/><br/><a href="http://bp1.blogger.com/_K_pkZO5-tTg/RvgEK9_sBtI/AAAAAAAAAdQ/UsPiWT3_Xfw/s1600-h/rip.jpg"><img alt="" border="0" id="BLOGGER_PHOTO_ID_5113841963366090450" src="http://bp1.blogger.com/_K_pkZO5-tTg/RvgEK9_sBtI/AAAAAAAAAdQ/UsPiWT3_Xfw/s400/rip.jpg" style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;"/></a><p class="note">I've used the same technique to figure out that the RIP unicast updates (configured with the <strong>neighbor <em>address</em></strong> router configuration command) are sent with TTL 255.</p>

