---
url: /2007/12/mpls-traffic-engineering-without-link/
title: "MPLS Traffic Engineering without a Link State routing protocol"
date: "2007-12-11T07:43:00.002+01:00"
tags: [ traffic engineering ]
---

<iframe frameborder="0" marginheight="0" marginwidth="0" scrolling="no" src="http://rcm-na.amazon-adsystem.com/e/cm?t=cisioshinandt-20&amp;o=1&amp;p=8&amp;l=as1&amp;asins=1587050315&amp;fc1=000000&amp;IS2=1&lt;1=_blank&amp;lc1=0000FF&amp;bc1=000000&amp;bg1=FFFFFF&amp;f=ifr" style="width:120px;height:240px;float:right;"></iframe>You've probably heard the joke about the honest salesmen: it's not that they're lying, what they know isn't true. I had a similar problem recently: in the <a href="http://searchtelecom.techtarget.com/tip/0,289483,sid103_gci1276977,00.html">10 MPLS traffic engineering myths and half truths</a> I wrote “<em>Half-truth: MPLS TE only works with OSPF and IS-IS routing protocols</em>.” Ivan Kuchin understood that as “You can run MPLS TE without OSPF or IS-IS.” Although I haven't written that anywhere, I also thought that was the case … so let me try to weasel out of this mess.<br/><br/>I remember being involved in a situation years ago (around the 12.0T release) where someone wanted to use MPLS TE without IS-IS (which was the only supported protocol in those days) and somehow the solution was to set up tunnels using explicit paths, where you have to specify hop-by-hop IP addresses. When you think about it, it makes perfect sense: if you list every IP address in the path, there is no need for constraint-based path calculation (PCALC). However, as it turns out, the later additions to MPLS TE (loose source routing, address exclusion, inter-area MPLS TE, inter-AS MPLS TE) changed the IOS code sufficiently that even the hop-by-hop tunnels cannot be set up without operational OSPF or IS-IS:<ul><li>In order to have MPLS TE running on a router, you need an MPLS TE router-id, and you can only specify that in OSPF or IS-IS routing protocol.</li>
<li>Even though the hop-by-hop explicit path is static, the router wants to run PCALC for <em>every hop in the path</em>. If the next-hop IP address is not in the OSPF topology database, the router will not even try to set up the tunnel.</li>
</ul>
<p>If you want to run MPLS TE in your network, you thus need to run OSPF or IS-IS, even though you might not want to use them for IP packet forwarding. For example, you could enable one of them only on the links actually used for MPLS TE and set the distance to 255 to prevent their routes from getting into the IP routing table (and I've tested it in the lab before writing this post).</p>

