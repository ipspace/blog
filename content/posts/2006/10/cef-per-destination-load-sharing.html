---
url: /2006/10/cef-per-destination-load-sharing.html
title: "CEF per-destination load sharing algorithms"
date: "2006-10-20T10:44:00.000+02:00"
tags: [ CEF,load balancing ]
---

According to the <a href="http://www.cisco.com/en/US/products/sw/iosswrel/ps5207/products_command_reference_chapter09186a0080417d88.html#wp1010171">Cisco IOS documentation</a>, you can select between the <em>original</em> and the <em>universal </em>CEF load sharing algorithm with the <strong>ip cef load-sharing algorithm <em>name parameter</em></strong> global configuration command (we'll leave the <strong>tunnel</strong> algorithm aside for the moment). Of course, they don't tell you what you select.<br/><br/>The original algorithm used only the source and destination IP addresses to get the 4-bit hash entry (see the <a href="https://blog.ipspace.net/2006/10/cef-load-sharing-details.html">CEF Load Sharing Details</a> for more information), which could result in suboptimal network utilization in some border cases (if anyone wants to know why, leave me a comment). The <strong>universal </strong>algorithm adds a router-specific value to the hash function, ensuring that the same source-destination pair will hash into a different 4-bit value on different boxes. If you really want to fine-tune the hash function, you can even specify the value to be added with the last option of the <strong>ip cef load-sharing algorithm </strong>command.

