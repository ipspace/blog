---
title: "IS-IS is not running over CLNP"
date: "2009-06-23T07:06:00.001+02:00"
tags: [ IS-IS,You've asked for it ]
---

<div class="bloggerBody"><p>A while ago I’ve received an interesting question from someone studying for the CCNP certification: “I know it’s not necessary to configure <strong>clns routing </strong>if I’m running IS-IS for IP only, but isn’t IS-IS running over CLNS?”</p>
<p>I’ve always “known” that IS-IS uses a separate layer-3 protocol, not CLNP (unlike IP routing protocols that always ride on top of IP), but I wanted to confirm it. I took a few traces, inspected them with Wireshark and tried to figure out what’s going on.</p>
<p class="info">You might be confused by the mixture of CLNS and CLNP acronyms. From the OSI perspective, a protocol (CLNP) is providing a service (CLNS) to upper layers. When a router is configured with <strong>clns routing</strong> it forwards CLNP datagrams and does not provide a CLNS service to a transport protocol. The IOS configuration syntax is clearly misleading.</p>
<p>It turns out the whole OSI protocol suite uses the same layer-2 protocol ID (unlike IP protocol suite where IP and ARP use different layer-2 ethertypes) and the first byte (NLPID) in the layer-3 header to indicate the actual layer-3 protocol. I was not able to find any table of layer-3 OSI protocol types, so I had to experiment with Wireshark to figure out the values for CLNP, ES-IS and IS-IS (yes, these three are distinct L3 protocols).</p>
<p>You can find all the details (including the comparison of OSI and IP protocol stacks) in the <a href="http://wiki.nil.com/IS-IS_in_OSI_protocol_stack">IS-IS in OSI protocol stack</a> article in the <a href="http://wiki.nil.com/">CT3 wiki</a>.</p>
<p class="more">This article is part of <a href="http://ioshints.blogspot.com/2007/01/youve-asked-for-it-series.html">You've asked for it</a> <a href="http://ioshints.blogspot.com/search/label/You%27ve%20asked%20for%20it">series</a>.</p>
</div>

