---
url: /2009/10/ssh-rsa-authentication-works-in-ios.html
title: "SSH RSA authentication works in IOS release 15.0M"
date: "2009-10-05T07:11:00.002+02:00"
tags: [ security,SSH ]
---

<div class="bloggerBody"><p>The feature we’ve begged, prayed, sobbed, yelled, screamed for has finally been implemented in Cisco IOS: public key SSH authentication works in IOS release 15.0M (and is surprisingly easy to use).</p>
<p>After <a href="https://blog.ipspace.net/2008/08/ssh-works-without-aaa.html">configuring SSH server on IOS</a> (see also <a href="https://blog.ipspace.net/2008/08/identifying-tacacs-failure.html">comments to this post</a>), you have to configure the <strong>ssh pubkey-chain</strong>, where you can enter the key string (from your SSH public key file) or the key’s hash (which is displayed by the <strong>ssh-keygen</strong> command). </p>
<!--more--><p>It’s probably easier to copy/paste the public key from your <em>id_rsa.pub</em> file into the terminal window …</p>
<pre class="code">R2#conf t<br/>Enter configuration commands, one per line.  End with CNTL/Z.<br/>R2(config)#ip ssh pubkey-chain<br/>R2(conf-ssh-pubkey)#username pipi<br/>R2(conf-ssh-pubkey-user)#key-string<br/>R2(conf-ssh-pubkey-data)#$AAQEA6jYlf9MBskhkWov+ZOUDKun0ExQIRj1zfWA/YciO02VS  <br/>R2(conf-ssh-pubkey-data)#$XsxM7SqNkRSQOR7y7HBMoxTHV7o+R/uS6A8/mF0A3P/ScRjct  <br/>R2(conf-ssh-pubkey-data)#$JrNGACGaFy1njD9PrrvrU4o4hx6XDr6xVXF4sP4OCSXIn+Cp8  <br/>R2(conf-ssh-pubkey-data)#$bCnZLmv908AeDb1Ac4nPdsn1OhCPIg6fxZjB7DvAMB8Dbr+7Y  <br/>R2(conf-ssh-pubkey-data)#$apEbGE94luIqnBc61HsMd6JCWbQ== pipi@fedi.nil.si     <br/>R2(conf-ssh-pubkey-data)#exit<br/>R2(conf-ssh-pubkey-user)#^Z</pre><p>… and let the router convert it into the key hash, which is stored in the configuration:</p>
<pre class="code">R2#show run | section ssh<br/>ip ssh rsa keypair-name SSH<br/>ip ssh version 2<br/>ip ssh pubkey-chain<br/> username pipi<br/>  key-hash ssh-rsa C20B739F2645D6850C591C6A11780CB5 pipi@fedi.nil.si</pre><p>After this simple step, you can log into your router without typing the password. Finally we have a manageable way of secure remote command execution.</p>
</div>

