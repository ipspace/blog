---
url: /2009/01/hidden-wealth-of-ios-tcl/
title: "The hidden wealth of IOS Tcl"
date: "2009-01-26T07:00:00.000+01:00"
tags: [ Tcl ]
---

<div class="bloggerBody"><p>Another undocumented (and thus very probably unsupported) Tcl-on-IOS detail: numerous Tcl packages are bundled with IOS and available in the <em>tmpsys:lib/tcl</em> directory (the tmpsys: is a virtual file system mapped to a part of the IOS image).</p>
<!--more--><p>The list of Tcl packages seems to be pretty stable; 12.2SRC and 12.4T have the same contents of the <em>tmpsys:lib/tcl</em> directory.</p>
<pre class="code">router#<strong>dir tmpsys:lib/tcl</strong><br/>Directory of tmpsys:lib/tcl/<br/><br/>   13  -r--       19226                    &lt;no date&gt;  auto.tcl<br/>   23  -r--        2549                    &lt;no date&gt;  base.tcl<br/>   25  -r--        7655                    &lt;no date&gt;  cli_lib.tcl<br/>   26  -r--        2589                    &lt;no date&gt;  context_lib.tcl<br/>    3  drw-           0                    &lt;no date&gt;  eem_scripts<br/>   28  -r--         185                    &lt;no date&gt;  email_template_cfg.tm<br/>   29  -r--         147                    &lt;no date&gt;  email_template_chs.tm<br/>   30  -r--         154                    &lt;no date&gt;  email_template_cmd.tm<br/>   31  -r--         156                    &lt;no date&gt;  email_template_dmp.tm<br/>   32  -r--         144                    &lt;no date&gt;  email_template_sl.tm<br/>   33  -r--         325                    &lt;no date&gt;  email_template_sm.tm<br/>   34  -r--         135                    &lt;no date&gt;  email_template_wd.tm<br/>   14  -r--        9135                    &lt;no date&gt;  history.tcl<br/>   15  -r--       23558                    &lt;no date&gt;  http.tcl<br/>   19  -r--       17725                    &lt;no date&gt;  init.tcl<br/>   21  -r--        6932                    &lt;no date&gt;  ldAout.tcl<br/>   24  -r--       33266                    &lt;no date&gt;  optparse.tcl<br/>   16  -r--       19415                    &lt;no date&gt;  package.tcl<br/>   20  -r--        1014                    &lt;no date&gt;  parray.tcl<br/>   17  -r--       32649                    &lt;no date&gt;  safe.tcl<br/>   27  -r--       10367                    &lt;no date&gt;  smtp_lib.tcl<br/>   22  -r--       13659                    &lt;no date&gt;  tclIndex<br/>   18  -r--        4499                    &lt;no date&gt;  word.tcl</pre><p>For whatever weird incomprehensible reason, these packages are not made available to the Tclsh interpreter started from the command line. For example, if you want to use the HTTP package, you cannot execute the <strong>package require http </strong>command like you would in any normal Tcl environment, but have to use the <strong>source "tmpsys:lib/tcl/http.tcl"</strong> command.</p>
<p>If you want to safeguard against a potential change-of-mind of IOS Tclsh developers, use this construct:</p>
<pre class="code">if {[catch {package require http}]} { source "tmpsys:lib/tcl/http.tcl" }</pre><p></p>
</div>

