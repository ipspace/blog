---
url: /2009/01/generate-https-requests-from-tcl-shell.html
title: "Generate HTTP(S) requests from Tcl shell"
date: "2009-01-19T06:40:00.002+01:00"
tags: [ Tcl ]
---

<div class="bloggerBody"><p>A few days ago, a reader sent me an e-mail titled “<em>Telnet Automation from a Cisco Router</em>” and complained that IOS Tcl does not support the <em><a href="http://expect.nist.gov/">expect</a> </em>commands (<strong>spawn</strong>, <strong>send</strong> and <strong>expect</strong>). Since <a href="http://wiki.tcl.tk/201"><em>Expect</em> is a Tcl extension</a>, not part of the core Tcl, it’s not included in Cisco IOS, which was the only answer I could give.</p>
<p class="note">You might be able to <a href="https://blog.ipspace.net/2007/09/using-tcl-packages-on-cisco-ios.html">port <em>Expect </em>to IOS as a Tcl package</a> if it doesn’t require external libraries.</p>
<!--more--><p>However, it turned out that the reader actually wanted to trigger HTTP requests from the router. IOS Tcl has some built-in client-side HTTP support, but it’s far simpler to rely on the built-in <strong>http:</strong> file system. For example, to do a HTTP GET request, use the following Tcl command:</p>
<pre class="code">rtr#<strong>tclsh</strong><br/>rtr(tcl)#<strong>set result [exec {more http://webServer/index.html}]</strong><br/>&lt;h1&gt;Empty&lt;/h1&gt;</pre><p>As always, there are a few caveats:</p>
<ul class="Bullet1"><li>You can trigger HTTP GET requests, but not the PUT or POST requests.</li>
<li>The server-side script should always return the HTTP status 200 (successful), otherwise the <strong>more </strong>command will fail. The actual status can be passed in the HTML response.</li>
</ul>
<p class="info">You can use the same trick to trigger HTTPS requests from Tcl.</p>
<div class="more"><p>You can find more Tcl-related information in the <a href="http://wiki.nil.com/Tclsh_on_Cisco_IOS_tutorial">Tclsh on Cisco IOS tutorial</a>.  Sample Tclsh scripts are available in the <a href="http://wiki.nil.com/Tclsh_script_library">Tclsh script library</a>. If you need expert help in planning, developing or deploying Tclsh scripts in your network, <a href="https://www.ipspace.net/Contact">contact the author</a>.</p>
<p>This article is part of <a href="https://blog.ipspace.net/2007/01/youve-asked-for-it-series.html">You've asked for it</a> <a href="https://blog.ipspace.net/search/label/You%27ve%20asked%20for%20it">series</a>.</p>
</div>
</div>

