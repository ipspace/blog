---
url: /2013/04/vlans-are-wrong-abstraction-for-virtual.html
title: "VLANs are the wrong abstraction for virtual networking"
date: "2013-04-02T07:09:00.000+02:00"
tags: [ LAN,virtualization ]
---

<p>Are you old enough to remember the days when operating systems had no file system? Fortunately I never had to deal with storing files on <a href="http://en.wikipedia.org/wiki/OS/360_and_successors">one of those</a> (I was using <a href="http://en.wikipedia.org/wiki/Punch_cards">punch cards</a>), but miraculously <a href="http://my.safaribooksonline.com/book/-/0738486248/using-jcl/163#X2ludGVybmFsX0J2ZGVwRmxhc2hSZWFkZXI/eG1saWQ9MDczODQ4NjI0OC8xNjc=">you can still find the JCL DLBL/EXTENT documentation online</a>.</p>
<p>On the other hand, you probably remember the days when a SCSI LUN actually referred to a physical disk connected to a computer, not an extensible virtual entity created through <a href="http://packetpushers.net/the-clicky-clickety-click-ring-tone/">point-and-click exercise on a storage array</a>.</p>
<p>You might wonder what the ancient history has to do with virtual networking. Don’t worry we’re getting there in a second ;)<!--more--></p>
<div class="separator"><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/e/ef/IBM_2311_memory_unit.JPG/360px-IBM_2311_memory_unit.JPG" style="width: 400px"/><br/>I still remember these monsters: <a href="http://en.wikipedia.org/wiki/History_of_IBM_magnetic_disk_drives#IBM_2311">7.25 MB on six platters</a> (source: <a href="http://en.wikipedia.org/wiki/File:IBM_2311_memory_unit.JPG">Wikipedia</a>)</div>
<p>When VMware started creating their first attempt at server virtualization software, they had readily available storage abstractions (file system) and CPU abstraction (including MS-DOS support under Windows, but the ideas were going all the way back to <a href="http://en.wikipedia.org/wiki/VM_(operating_system)">VM operating system on IBM mainframes</a>). </p>
<p>Creating virtual storage and CPU environments was thus a no-brainer, as all the hard problems were already solved. Most server virtualization solutions use the file system recursively (virtual disk = file on a file system) and abstract the CPU by catching and emulating privilege-mode instructions (things got way easier with modern CPUs supporting virtualization in hardware). There was no readily-available networking abstraction, so they chose the simplest possible option: <a href="/2011/12/vmware-vswitch-baseline-of-simplicity.html">VLANs</a> (after all, it’s simple to insert a 12-bit tag into a packet and pretend it’s no longer your problem).</p>
<p>The “only” problem with using VLANs is that they aren’t the right abstraction. Instead of being like files on a file system, VLANs are more like LUNs on storage arrays – someone has to provision them. You could probably imagine how successful the server virtualization would be if you’d have to ask storage administrators for a new LUN every time you need a virtual disk for a new VM.</p>
<p>So every time I see how the “<em>Software-Defined Data Center [...] provides unprecedented automation, flexibility, and efficiency to transform the way you deliver IT</em>” I can’t help but read “<em>it took us more than a decade to </em><a href="/2011/12/decouple-virtual-networking-from.html"><em>figure out the right abstraction</em></a>.” Virtual networking is nothing else but another application riding on top of IP (<a href="http://en.wikipedia.org/wiki/ISCSI">storage</a> and <a href="http://en.wikipedia.org/wiki/Voip">voice</a> people got there years before).</p>
<h4>More information</h4><p>If you’re attending Interop Las Vegas, drop by my <a href="http://www.interop.com/lasvegas/conference/networking.php?session_id=51">Overlay Virtual Networking Explained</a> session (and use DISPEAKER marketing code to get 25% discount on registration fees), or register for the <a href="http://www.interop.com/lasvegas/conference/it-workshops.php?session_id=4">Network Infrastructure for Cloud Computing</a> workshop. If not, don’t worry – there will be an overlay networking webinar in September/October timeframe.</p>

