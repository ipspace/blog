---
url: /2013/03/what-did-you-do-to-get-rid-of-manual.html
title: "What did you do to get rid of manual VLAN provisioning?"
date: "2013-03-27T06:41:00.000+01:00"
tags: [ SDN,Data Center,LAN,virtualization ]
---

<p>I love listening to the Packet Pushers (the best networking podcast there is) on my way to work, and I know what to expect in every SDN-focused episode: an “I’m sick and tired of using CLI to manually provision VLANs” rant. Sure, we’re all in the same boat, but did you ever do something to get rid of that problem?<!--more--></p>
<p>After all, you don’t need more than a few tens of VLANs in a typical enterprise data center or private cloud (clouds with thousands of tenants are obviously a totally different story) and most vendors (with two notable exceptions: the biggest one and the one lamenting the lack of networking innovation) have some sort of <a href="http://blog.ioshints.info/2011/12/vm-aware-networking-improves-iaas-cloud.html">VMware-focused automatic edge port VLAN provisioning</a>, from on-switch solutions like <a href="http://blog.ioshints.info/2011/06/automatic-edge-vlan-provisioning-with.html">VM Tracer (Arista)</a> or Automatic Migration of Port Profiles (Brocade) to network management applications (like Junos Space). Are you using them? If not, why not? What’s stopping you?</p>
<p class="more">I’m describing various VM-aware networking solutions in numerous <a href="http://www.ipspace.net/Webinars">webinars</a>, including <a href="http://www.ipspace.net/Introduction_to_Virtualized_Networking">Introduction to Virtual Networking</a>, <a href="http://www.ipspace.net/VMware_Networking_Deep_Dive">VMware Networking Technical Deep Dive</a>, <a href="http://www.ipspace.net/Cloud_Computing_Networking">Cloud Computing Networking</a> and <a href="http://www.ipspace.net/Data_Center_Fabrics">Data Center Fabric Architectures</a>.</p>
<p class="update"><b>Update 2016-02-20</b>: The two vendors I mentioned above implemented hypervisor-aware solutions in the meantime. More details in the <a href="http://www.ipspace.net/Data_Center_Fabrics">Data Center Fabric Architectures</a> webinar.</p>
<p>But let’s assume you’re unfortunate and use switches that have no hypervisor integration tools (which is about three quarters of the market unless you want to bite into the ultimate lock-in and deploy <a href="http://blog.ioshints.info/2011/08/vm-fex-how-convoluted-can-you-get.html">VM-FEX</a>). Would it be THAT hard to write an <a href="http://blog.ioshints.info/2011/08/vm-fex-how-convoluted-can-you-get.html">application that would read the LLDP or CDP tables</a> on ToR switches (populated by LLDP or CDP updates from the vSphere hosts), build a connectivity table, and allow server/hypervisor administrators to provision their own VLANs (within limits) on server-facing switch ports? I know that any one of our interns could do it in a week (given reasonably complete functional specs), but we never did it, because doing automatic VLAN provisioning in our IT infrastructure is simply not worth the effort.</p>
<p class="info"><a href="http://flipit.nil.com/">Flip-IT</a>, our cloud <a href="http://flipit.nil.com/en/Services/">service</a>/<a href="http://flipit.nil.com/en/ISPs/">product</a> and our <a href="http://www.nil.com/solutions/e-learning-with-remote-labs/">remote labs</a> are a totally different story – every single piece of infrastructure is automatically provisioned based on user demand.</p>
<p>Assuming we’re truly sick-and-tired of manual VLAN provisioning in enterprise data centers, there must be other reasons we’re not deploying the vendor-offered features or rolling out our own secret sauce. It might have to do with the critical impact of the networking gear. </p>
<p>Let’s assume you manage to mess up a server configuration with Puppet – you lose a server, and hopefully you’re using a cluster or a scale-out application, so the impact is negligible. </p>
<p>If a vSphere host crashes, you lose all the VMs running on it. That could be 50-100 VMs if you’re using recent high-end server, but if you care about their availability, you have an HA cluster and they get restarted automatically.</p>
<p>Now imagine the vendor-supplied or home-brewed pixie dust badly misconfigures or crashes a ToR switch. Worst case (switch hangs and links to servers are not lost), you lose connectivity to tens of physical servers, which could mean a few thousands VMs; best case those same VMs lose half the bandwidth.</p>
<p>Faced with this reality, it’s understandable we’re scared of software automatically configuring our networking infrastructure. Now please help me understand how that’s going to change with third-party SDN applications.</p>

