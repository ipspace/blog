---
url: /2013/06/real-life-sdnopenflow-applications.html
title: "Real-Life SDN/OpenFlow Applications"
date: "2013-06-26T06:40:00.000+02:00"
tags: [ security,SDN,OpenFlow ]
---

<p>NEC and a slew of its partners <a href="http://www.necam.com/About/read.cfm?ID=35302abf-dd61-4487-8b63-08b839ad1d82">demonstrated an interesting next step in the SDN saga</a> @ Interop Las Vegas 2013: multi-vendor SDN applications. Load balancing, orchestration and security solutions from A10, Silver Peak, Red Hat and Radware were happily cooperating with ProgrammableFlow controller.</p>
<p>A curious mind obviously wants to know what’s behind the scenes. Masterpieces of engineering? Large integration projects ... or is it just a smart application of API glue? In most cases, it’s the latter. Let’s look at the ProgrammableFlow – Radware integration.<!--more--></p>
<p>Here’s a slide from NEC’s white paper. An interesting high-level view, but no details. Radware <a href="http://www.radware.com/newsevents/pressrelease.aspx?id=1631514">press release</a> is even less helpful (but it’s definitely a masterpiece of marketing).</p>
<div class="separator"><a href="/2013/06/s1600-PF+WP+Figure+1_final+Radware+diagram_0313.jpeg" imageanchor="1"><img border="0" src="/2013/06/s520-PF+WP+Figure+1_final+Radware+diagram_0313.jpeg"/></a></div>
<p>Fortunately Ron Meyran provided <a href="http://blog.radware.com/security/2013/04/defenseflow-dosddos-security/">more details on Radware blog</a> as did <a href="http://www.sdncentral.com/demo-friday/radware-demofriday-qa-archive/2013/05/">Lior Cohen in his SDN Central Demo Friday presentation</a>:</p>
<ul class="ListParagraph"><li>DefenseFlow software monitors the flow entries and counters provided by an OpenFlow controller, and tries to identify abnormal traffic patterns;</li>
</ul>
<ul class="ListParagraph"><li>The abnormal traffic is diverted to <a href="http://www.radware.com/Products/ApplicationNetworkSecurity/DefensePro_TechSpec.aspx">Radware DefensePro appliance</a> that scrubs the traffic before it’s returned to the data center.</li>
</ul>
<p>Both operations are easily done with <a href="http://demo.ipspace.net/get/6%20-%20Configuration%20Interfaces.mp4">ProgrammableFlow API</a> – it provides both flow data and the ability to <a href="http://demo.ipspace.net/get/3%20-%20Virtual%20Networking.mp4">redirect the traffic to a third-party next hop</a> (or MAC address) based on a dynamically-configured access list. Here’s a CLI example from the <a href="http://www.ipspace.net/ProgrammableFlow_Technical_Deep_Dive">ProgrammableFlow webinar</a>; API call would be very similar (but formatted as JSON or XML object):</p>
<div class="separator"><a href="/2013/06/s1600-NEC_Redirect.jpg" imageanchor="1"><img border="0" src="/2013/06/s400-NEC_Redirect.jpg"/></a></div>
<h4>Why is this useful?</h4><p>Deep packet inspection is CPU-intensive and hard to implement at high speeds. DPI products and solutions (including traffic scrubbing appliances like DefensePro) thus tend to be expensive. 40Gbps of DefensePro DPI (DefensePro 40420) sets you back almost half a million dollars (according to <a href="https://procure.ohio.gov/PriceList/534200%20pricelist.pdf">this price list</a>).</p>
<p>Doing initial triage and subsequent traffic blackholing in cheaper forwarding hardware (programmed through OpenFlow) and diverting a small portion of the traffic through the scrubbing appliance significantly improves the average bandwidth a DPI solution can handle at reasonable cost.</p>
<h4>Is this something only OpenFlow could do?</h4><p>Of course not – flow monitoring and statistics have been available for decades, either in Netflow or sFlow format. Likewise, we’ve been using PBR to redirect traffic for decades, and configuring PBR through NETCONF is not exactly rocket science ... and of course there’s <a href="http://tools.ietf.org/html/rfc5575">FlowSpec</a> that <a href="/2013/04/the-many-paths-to-sdn.html">real-life engineers sometimes use to mitigate real-life DoS attacks</a> (although, like any other tool, <a href="http://blog.cloudflare.com/todays-outage-post-mortem-82515">it does fail every now and then</a>).</p>
<p>However, an OpenFlow controller does provide a more abstracted API – instead of configuring PBR entries that push traffic toward next hop (or an MPLS TE tunnel if you’re an MPLS ninja) and modifying router configuration while doing so, you just tell the OpenFlow controller that you want the traffic redirected toward a specific MAC address, and the necessary forwarding entries automagically appear all across the path.</p>
<p>Finally, there’s the sexiness factor. Mentioning SDN instead of Netflow or PBR in your press release is infinitely more attractive to bedazzled buyers.</p>
<h4>Will it scale?</h4><p>You should be aware of the <a href="http://highscalability.com/blog/2012/6/4/openflowsdn-is-not-a-silver-bullet-for-network-scalability.html">major OpenFlow scaling issues</a> by now, and I hope you’ve realized that real-life switches have real-life limitations. Most of the existing hardware reuses ACL entries when you ask for full-blown OpenFlow flow entries. Now go and check the ACL table size on your favorite switch, and imagine you need one entry for each flow spec you want to monitor or divert to the DPI appliance.</p>
<p>Done? Disappointed? Pleasantly surprised? Do share your feelings ;)</p>
<p>However, a well-tuned solution using the right combination of hardware and software (example: NEC’s PF5240 which can handle 160.000 L2, IPv4 or IPv6 flows in hardware) just might work. Still, we’re early in the development cycle, so make sure you do thorough (stress) testing before buying anything ... and just in case you need rock-solid traffic generator, Spirent will be more than happy to sell you one (or few).</p>
<p class="update">Update 2013-07-06: replaced diagram from NEC's slide deck with a more detailed diagram from NEC's whitepaper</p>

