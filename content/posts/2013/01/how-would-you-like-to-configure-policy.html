---
date: 2013-01-16T07:00:00.000+01:00
tags:
- data center
- IP routing
title: How would you like to configure Policy-Based Routing (PBR)
url: /2013/01/how-would-you-like-to-configure-policy.html
---

<p><a href="http://www.linkedin.com/pub/adam-sweeney/0/871/7a1">Adam Sweeney</a>, VP of EOS Engineering @ <a href="http://www.aristanetworks.com/">Arista Networks</a> posed me a challenging question after my <a href="https://blog.ipspace.net/2013/01/edge-and-core-openflow-and-why-mpls-is.html">I-so-hate-PBR-CLI rant</a>: “<em>Is there something in particular that makes the IOS PBR CLI so painful?  Is there a PBR CLI provided by any of the other systems out there that you like a lot better?</em><em>”</em></p>
<p>My Twitter friends helped me find the answer to the second question: PBR in Junos is even more convoluted than it is in Cisco IOS... but what would be a better CLI?<!--more--></p>
<p>Here’s my attempt at answering the question:</p>
<blockquote class="cite"><p>I understand one needs a route map (or something similar) to configure PBR. The major grudge I have with route maps is that they were designed for something completely different (after all, they’re called route maps for a reason) and then someone hammered a square peg into a round hole.</p>
<p style="margin-top: 1em">The other pretty obvious alternative (from Cisco IOS CLI perspective) would be the MQC, but that one is even more verbose than the route maps.</p>
<p style="margin-top: 1em">My biggest peeve is (probably) the need to create a separate ACL for every line in route-map (or a separate class-map for each class in a policy-map). It would be nice to have both existing syntax (for ACL reusability) and in-line options (for ease-of-understanding and brevity): refer to an ACL or have an ACL-like syntax within a route map, or refer to a class-map or have an inline class definition in a policy map.</p>
</blockquote>
<p>Do you have a better answer? What would you like to see in a PBR CLI? Here’s your chance to nudge Adam and his team in the right direction.</p>

