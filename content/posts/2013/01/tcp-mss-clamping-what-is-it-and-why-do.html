---
title: "TCP MSS clamping – what is it and why do we need it?"
date: "2013-01-22T06:50:00.000+01:00"
tags: [ IP Services,Podcast,PPP ]
media: http://media.blubrry.com/ipspace/www.ipSpace.net/nuggets/podcast/X1%20TCP%20MSS%20Clamping.mp4
---

<p>This (not so very) short video explains what TCP MSS clamping is and why we’re almost forced to use it on xDSL (PPPoE) and tunnel interfaces (TL&amp;DR summary: because Internet-wide Path MTU Discovery rarely works).</p>
<div class="separator" style="clear: both; text-align: center;"><a href="http://media.blubrry.com/ipspace/www.ipSpace.net/nuggets/podcast/X1%20TCP%20MSS%20Clamping.mp4" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="267" width="400" src="http://1.bp.blogspot.com/-TGISwFIehMo/UPuvHQ8KFqI/AAAAAAAAFmE/eypM4l7TtB8/s400/TCP%2BMSS%2BClamping%2BSnapshot.png" /></a></div>
<p class="more">If you liked the video, subscribe to my <a href="http://feeds.feedburner.com/ipspace">podcast</a>, or <a href="https://itunes.apple.com/si/podcast/ipspace.net/id590360061?mt=2">add my podcast to your iTunes</a>.<!--more--></p>
<h4>More details</h4><ul class="ListParagraph"><li><a href="http://en.wikipedia.org/wiki/Path_MTU_Discovery">Path MTU discovery</a> was first defined in <a href="http://www.ietf.org/rfc/rfc1191.txt">RFC 1191</a> (yeah, it’s THAT old and still doesn’t work well);</li>
<li>You’ll find more PMTUD and fragmentation hands-on details in my <a href="http://stack.nil.com/ipcorner/IP_Fragmentation/">Never-Ending Story of IP Fragmentation</a> article or in PacketLife’s <a href="http://packetlife.net/blog/2008/aug/18/path-mtu-discovery/">Path MTU Discovery</a> blog post;</li>
<li><a href="http://tools.ietf.org/html/rfc4821">Packetization Layer Path MTU Discovery</a> (RFC 4821) is an alternate approach that does not rely on ICMP replies;</li>
<li><a href="https://ripe65.ripe.net/presentations/100-RP2_presentation_RIPE65.pdf">Discovering Path MTU black holes</a> presentation from RIPE65 (<a href="https://ripe65.ripe.net/archives/video/58/">video</a>).</li>
</ul>
<h4>Some configuration tips</h4><ul class="ListParagraph"><li>TCP MSS clamping can be configured on <a href="http://tldp.org/HOWTO/IP-Masquerade-HOWTO/mtu-issues.html">end hosts</a> or on some routers (on Cisco IOS, use <strong>ip tcp adjust-mss </strong>interface configuration command).</li>
<li>The <strong>ip tcp adjust-mss</strong> functionality on Cisco IOS is bidirectional – MSS option is adjusted in inbound and outbound TCP SYN packets traversing the interface on which <strong>ip tcp adjust-mss </strong>is configured.</li>
<li>You should configure <strong>ip tcp adjust-mss </strong>on interfaces with low MTUs. In other words, MSS value configured on an interface should match MTU value of the same interface minus 40 bytes. </li>
<li><a href="http://www.cisco.com/en/US/tech/tk175/tk15/technologies_configuration_example09186a008071a6c3.shtml">Configuration examples</a> where <strong>ip tcp adjust-mss </strong>is configured on Ethernet interface have interesting side effects if the router has more than two interfaces.</li>
</ul>

