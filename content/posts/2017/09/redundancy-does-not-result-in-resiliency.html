---
title: "Redundancy Does Not Result in Resiliency"
date: "2017-09-28T09:28:00.000+02:00"
tags: [ Design,Data Center ]
---

<p>A while ago a large airline had a bad-hair day claiming it was caused by a faulty power supply. Not surprisingly, I got a question along the lines of “<em>is that feasible?</em>”</p>
<p>Short answer: Yes. However, someone should be really worried if that wasn’t made up.<!--more--></p>
<p>There are companies out there that learn from their mistakes. Even more, they publicly admit what went wrong, what they learned, and how they improved their processes to ensure this particular SNAFU won’t happen in the future. I even found a <a href="https://github.com/danluu/post-mortems">nice list of public post-mortem reports</a>. Not surprisingly, airlines and legacy financial institutions are nowhere to be found.</p>
<p>Sometimes something really stupid goes wrong. For example, you’re upgrading a component, and its redundant pair fails. Or you thought you had redundancy, but it wasn’t configured correctly (HSRP anyone). Or a failure resulted in resource shortage resulting in cascading failures as <a href="https://aws.amazon.com/message/65648/">Amazon found a while ago</a>.</p>
<p>Organizations who are seriously investing in services uptime talk about <em>Site Reliability Engineers </em>(so does everyone else – SRE is becoming another meaningless buzzword). They also trigger unexpected failures – <a href="http://queue.acm.org/detail.cfm?id=2371297">manually</a> or <a href="https://medium.com/netflix-techblog/the-netflix-simian-army-16e57fbab116">automatically</a>. Organizations who love to talk about redundancy to get a tick-in-the-box from their auditors move the active database instance once a year under tightly controlled conditions and at the time of minimum load (or even during a scheduled maintenance window).</p>
<p class="more">For more details on doing failover tests correctly read at least the <em>failovers </em>part of the <a href="http://queue.acm.org/detail.cfm?id=2945077">Small Batches Principle</a> article by Tom Limoncelli (and I strongly recommend you read the whole article).</p>
<p>Long story short: Full redundancy doesn't prevent failures. When done correctly, it reduces the probability of a total failure. When done incorrectly, redundant solutions get less robust than non-redundant ones due to increased complexity... and you don’t know which one you’re facing until you stress-test your solution.</p>
<p>There’s also this crazy thing called statistics. It turns out that <a href="https://blog.acolyer.org/2017/06/15/gray-failure-the-achilles-heel-of-cloud-scale-systems/">adding redundant components results in decreased availability under gray (or byzantine) failures</a><em>.</em> The authors of the original article <a href="https://en.wikipedia.org/wiki/Hand-waving">handwaved</a> us to that conclusion, but I did check the math and the results are what they claim they are (or my knowledge of statistics is even worse than I assume).</p>
<p>Finally, do keep in mind that what I was talking about so far are ideal circumstances. In reality, we keep <a href="http://blog.ipspace.net/2013/04/this-is-what-makes-networking-so-complex.html">heaping layers of leaky abstractions</a> and <a href="http://blog.ipspace.net/2013/08/temper-your-macgyver-streak.html">ever-more-convoluted kludges</a> on top of each other until the whole thing comes crashing down resulting in days of downtime. Or as Vint Cerf said in a <a href="https://cacm.acm.org/magazines/2017/7/218867-a-brittle-and-fragile-future/fulltext">recent article</a>: we’re facing a brittle and fragile future.</p>
<p>Need more details? You might find some useful ideas in my <a href="http://www.ipspace.net/Designing_Active-Active_and_Disaster_Recovery_Data_Centers">Designing Active-Active and Disaster Recovery Data Centers</a> webinar… or you might go read a vendor whitepaper. <a href="https://en.wikipedia.org/wiki/Red_pill_and_blue_pill">The choice</a> is yours.<p> </p>
</p>

