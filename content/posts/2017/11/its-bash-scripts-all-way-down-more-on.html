---
title: "It’s Bash Scripts All the Way Down (more on CLI versus API)"
date: "2017-11-27T08:56:00.000+01:00"
tags: [ Automation ]
---

<p>Netfortius made an interesting comment to my <a href="http://blog.ipspace.net/2017/10/turn-your-ansible-playbook-into-bash.html"><em>Ansible playbook as a bash script</em></a> blog post:</p>
<blockquote class="cite">Ivan - aren't we now moving the "CLI"[-like] approach, upstream (the one we are just trying to depart, via the more structured and robust approach of RESTAPI).</blockquote>
<p>As I <a href="http://blog.ipspace.net/2017/10/cli-or-api-again-and-again-and-again.html">explained several times</a>, I don’t know where the <a href="http://blog.ipspace.net/2014/02/is-cli-in-my-way-or-is-it-just-symptom.html"><em>we must get rid of CLI</em></a><em> </em>ideas are coming from; the <em>CLI is root of all evil </em>mantra is just hype generated by startups selling alternative approaches (the best part: one of them was actually <a href="http://techfieldday.com/appearance/big-switch-presents-at-networking-field-day-6/">demonstrating their product using CLI</a>).<!--more--></p>
<p>Have to admit though that there’s a huge difference between the scriptability of typical Linux CLI and the <a href="http://blog.ipspace.net/2014/02/cli-or-api-wait-do-you-really-have-to.html">arcane stuff you get on network devices</a>. Just because they look similar doesn’t mean that they are. Speaking of differences: the network device CLI tends to be way more consistent than UNIX or Linux CLI were before Cumulus Networks invested time into writing NCLU.</p>
<p>Regardless of the acronym layers, what we really want to do is to get our network infrastructure automated. You could decide to buy a monolithic $vendor product (because that worked so well in the past), or an extensible platform (Cisco NSO is a great example… but keep in mind that SAP is also a highly-extensible platform), or build your toolchain from smaller components (the UNIX way). </p>
<p>In any case, as I explained in the <a href="https://my.ipspace.net/bin/list?id=NetAutSol&amp;module=6#M6S1">last session of the autumn 2017 network automation online course</a>, there are several ways your automation solution will be consumed:</p>
<ul class="ListParagraph"><li>You need a GUI (or something very close to it) for a casual user;</li>
<li>You need an API for upstream software (for example an umbrella orchestration system) consuming your solution. The upstream API could be as simple as <em>call this bash script using that username</em>.</li>
<li>You need CLI for power users who have to get the job done fast.</li>
</ul>
<p class="note">API stands for <em>Application Program Interface </em>– anything that a program can use to get services from another program. Invoking a script with well-defined arguments and getting error code and JSON data structure on <em>stdout </em>is an API, although arguably a pretty primitive one.</p>
<p>Making Ansible playbooks easily consumable by wrapping them into bash/Python/Perl/whatever scripts, making them into executable scripts, invoking them with <strong>inv </strong>or embedding them into a bigger Python solution reduces the friction for the CLI users and might prevent <a href="https://aws.amazon.com/message/41926/">fat-fingers mistakes that occasionally bring down whole data centers</a>.</p>
<p>To summarize – as with any other software project a network automation architect must:</p>
<ul class="ListParagraph"><li>Figure out what needs to be done;</li>
<li>Find out who the users will be, what their expectations are, and what the best UX (User Experience) is for each type of users (aka persona);</li>
<li>Find the best tool(s) or toolchain for the job;</li>
</ul>
<p>Then it’s up to the software developers to:</p>
<ul class="ListParagraph"><li>Get the core job done;</li>
<li>Implement all the necessary UI bindings.</li>
</ul>
<p>Want to go down this journey? Hundreds of your peers already did by joining the <a href="http://www.ipspace.net/Building_Network_Automation_Solutions">Building Network Automation Solutions</a> online course. </p>
<div class="jump-link"><a href="http://www.ipspace.net/Building_Network_Automation_Solutions#register">Register now!</a></div>

