---
date: 2020-01-07T08:20:00.000+01:00
tags:
- cloud
- training
title: There Is no Layer-2 in Public Cloud
url: /2020/01/there-is-no-layer-2-in-public-cloud/
---

<p>The amount of layer-2 tricks we use to make enterprise networking work never ceases to amaze me - from shared IP addresses used by various clustering solutions (because it’s too hard to <a href="/2011/06/multisite-clusters-done-right-by-none/">read the manuals and configure DNS</a>) to shared MAC addresses used by first-hop router redundancy protocols (because it would be really hard to send a Gratuitous ARP message on failover) and all sorts of shenanigans we’re forced to engage in to enable running servers to be moved <a href="/2015/02/before-talking-about-vmotion-across/">willy-nilly around the Earth</a>.<!--more--></p>
<p>The only way to get rid of that complexity is to say “<strong>NO</strong>, we won’t support that” or “<strong>NO</strong>, that is too risky” and I have rarely seen an enterprise networking architect who would be able to stick to that decision for a long time. Public cloud providers are different - they are big enough that an individual customer doesn’t matter (much), so it was pretty easy for them to say <em>“<strong>NO</strong>, you can’t use any of the layer-2 tricks, or run your own routing protocols, or ask us to implement IP Multicast. We don’t care, you are free to walk away to our competitor… who made the same decision.”</em></p>
<p class="note">It seems someone managed to pay enough to <a href="https://aws.amazon.com/about-aws/whats-new/2019/12/run-ip-multicast-workloads-aws-transit-gateway/">get IP multicast into AWS</a>, and AWS started down the slippery slope of implementing half-baked kludges. More about that in another blog post.</p>
<p>Migrating to a public cloud is thus an excellent opportunity to get your house in order. After all, if the same developers and server administrators who <a href="/2018/01/revisited-need-for-stretched-vlans/">continuously ask for layer-2 extensions in enterprise data centers</a> manage to implement their application stacks in a public cloud, they clearly demonstrated that there is no technology limitation to cleaning up your enterprise network.</p>
<p>While public clouds seem like a layer-3 nirvana, they present unique challenges. How do you implement shared IP addresses? How do you bring your own network appliances into a public cloud? How do you do service insertion (pushing traffic through your network appliances)? We’ll cover all these aspects of public cloud networking, including examples from AWS and Azure, in our <a href="https://www.ipspace.net/PubCloud/">Networking in Public Cloud Deployments</a> course. All you have to do is <a href="https://www.ipspace.net/PubCloud/#register">register</a>.</p>

