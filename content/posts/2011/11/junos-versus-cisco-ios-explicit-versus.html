---
url: /2011/11/junos-versus-cisco-ios-explicit-versus.html
title: "Junos versus Cisco IOS: Explicit versus Implicit"
date: "2011-11-18T06:20:00.000+01:00"
tags: [ MPLS,IS-IS,LDP,Junos ]
---

<p>My first Junos labbing project was an IPv6 backbone; I wanted to create a simple single-area IS-IS/BGP-free backbone running LDP and MPLS, and using 6PE for IPv6 connectivity. Needless to say, even though I read the <a href="http://www.juniper.net/us/en/community/junos/training-certification/day-one/">excellent Day One books</a> (highly recommended: <a href="http://www.juniper.net/us/en/community/junos/training-certification/day-one/networking-technologies-series/exploring-ipv6/">Exploring IPv6</a>, <a href="http://www.juniper.net/us/en/community/junos/training-certification/day-one/networking-technologies-series/advanced-ipv6-config/">Advanced IPv6 configuration</a> and <a href="http://www.juniper.net/us/en/community/junos/training-certification/day-one/networking-technologies-series/this-week-deploying-mpls/">Deploying MPLS</a>), I stumbled on almost every step.<!--more--></p>
<p>The most problematic aspect of Junos (from the perspective of an old IOS grump) is the total disconnect between interface configuration and protocol configuration. You have to configure everything twice – under [interface <em>name</em>] and under [protocols <em>name</em>]. For example, if you want to configure IS-IS, you have to list the interfaces within [protocols isis] and enable <strong>family iso </strong>on every interface. </p>
<p class="codecaption">Adding family ISO to the physical interfaces</p>
<pre class="code">interfaces {<br/>    ge-0/0/1 {<br/>        unit 0 {<br/>            description "Link to RR";<br/>            family iso;<br/>        }<br/>    }<br/>    ge-0/0/4 {<br/>        unit 0 {<br/>            description "Link to PE-A";<br/>            family iso;<br/>        }<br/>    }<br/>    ge-0/0/5 {<br/>        unit 0 {<br/>            description "Link to PE-C";<br/>            family iso;<br/>        }<br/>    }<br/>}</pre><p class="codecaption">Listing physical interfaces in the IS-IS process</p>
<pre class="code">protocols {<br/>    isis {<br/>        interface ge-0/0/1.0;<br/>        interface ge-0/0/4.0;<br/>        interface ge-0/0/5.0;<br/>    }<br/>}</pre><p><a href="/2011/11/junos-versus-cisco-ios-mpls-and-ldp.html">LDP configuration is no different</a> – you have to list interfaces within the [protocols isis] section and enable <strong>family mpls </strong>on every interface.</p>
<p>To add insult to injury, Junos never tells you there’s something wrong with your configuration – you can add interfaces to LDP or IS-IS protocol (and commit the configuration) without enabling required address families on the interfaces. When you try to troubleshoot the lack of connectivity (or adjacencies), you don’t even get an error message. When you list IS-IS or LDP interfaces, the interfaces you added to LDP or IS-IS protocol are simply not there ... yet again, with no error message.</p>
<p class="note">Seriously, while I understand why Junos does things the way it does, Juniper could add a few error messages along the lines of “interface configured but lacks address family”.</p>
<p>After a few days of grumbling, it finally hit me: Cisco IOS configurations include a lot of <em>implicit assumptions </em>while Junos wants you to <em>configure everything explicitly</em>. </p>
<p>For example, when you configure <strong>mpls ip </strong>on an interface, Cisco IOS automatically starts LDP. Junos wants you to configure the LDP protocol and the interface address family (which really specifies the ethertypes you can receive or send through that interface) ... but you only have to configure the interface once. When you add RSVP, BGP or other label distribution mechanisms, you don’t change the Junos interface configuration.</p>
<p>Arguing the merits and pitfalls of the two configuration approaches makes no sense; just remember that Junos wants you to be very explicit and configure exactly what you want – and that’s what you’ll get, no less, no more. And, as my lovely wife likes to say, it’s a fact of life – the sooner you get over it, the easier your life will be.</p>
<h4>Disclosure</h4><p>Access to Junosphere environment was kindly provided by Juniper (thanks to @abnerg) ... but I was never asked to write about Junos or Junisphere.</p>

