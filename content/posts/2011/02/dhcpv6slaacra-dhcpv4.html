---
url: /2011/02/dhcpv6slaacra-dhcpv4.html
title: "DHCPv6+SLAAC+RA = DHCPv4"
date: "2011-02-21T07:04:00.002+01:00"
tags: [ IPv6,Workshop ]
---

<p>We all know that <a href="https://blog.ipspace.net/2010/06/ipv6-autoconfiguration-too-many-cooks.html">IPv6 handles host network parameter initialization a bit different than IPv4</a> (where we usually use DHCP), but the details could still confuse you if you’re just entering the IPv6 world. </p>
<p>LAN-attached hosts first: a typical host needs its own address as well as the addresses of the default router and DNS server. DHCPv4 provides all three; in the IPv6 world you need two or three protocols as summarized in the following table</p>
<!--more--><table cellpadding="0" cellspacing="0" class="codeTable"><tr class="TRFirst"><th class="TDHead" style="vertical-align: bottom">Parameter </th><th class="TDHead" style="vertical-align: bottom">DHCPv4 </th><th class="TDHead" style="vertical-align: bottom">DHCPv6 </th><th class="TDHead" style="vertical-align: bottom">SLAAC<span style="vertical-align: super; font-size: 80%;">1</span></th><th class="TDHead" style="vertical-align: bottom">RA<span style="vertical-align: super; font-size: 80%;">2</span></th></tr><tr><td style="vertical-align: bottom">Host address </td><td style="vertical-align: bottom">Yes </td><td style="vertical-align: bottom">Yes<span style="vertical-align: super; font-size: 80%;">3</span></td><td style="vertical-align: bottom">Yes </td><td style="vertical-align: bottom"></td></tr><tr><td style="vertical-align: bottom">Default router </td><td style="vertical-align: bottom">Yes </td><td style="vertical-align: bottom">No </td><td style="vertical-align: bottom"></td><td style="vertical-align: bottom">Yes </td></tr><tr><td style="vertical-align: bottom">DNS server </td><td style="vertical-align: bottom">Yes </td><td style="vertical-align: bottom">Yes </td><td style="vertical-align: bottom"></td><td style="vertical-align: bottom">Yes<span style="vertical-align: super; font-size: 80%;">4</span></td></tr><tr class="TRLast"><td class="TDLast" style="vertical-align: bottom">DNS search list </td><td class="TDLast" style="vertical-align: bottom">Yes </td><td class="TDLast" style="vertical-align: bottom">Yes </td><td class="TDLast" style="vertical-align: bottom"></td><td class="TDLast" style="vertical-align: bottom">Yes<span style="vertical-align: super; font-size: 80%;">4</span></td></tr></table><div class="note"><p style="margin: 0 0">Notes:</p>
<ol class="ListParagraph"><li>SLAAC (RFC 2462) uses RA to get IPv6 prefix information for the local subnet.</li>
<li>Router Advertisements (RA) are part of ICMPv6 (RFC 4443).</li>
<li>While it might be desirable to retain control over IPv6 address allocation with IPv6, it’s better to use SLAAC with privacy extensions (RFC 4941), otherwise the web servers throughout the Internet can track your end-users based on their IPv6 addresses.</li>
<li><a href="https://tools.ietf.org/html/rfc6106"><em>IPv6 RA options for DNS configuration</em></a> (RFC 6106) is rarely implemented in desktop operating systems.</li>
</ol>
</div>
<p>In my opinion it makes most sense to:</p>
<ul class="ListParagraph"><li><strong>Deploy DHCPv6 servers on the routers</strong> without associated IPv6 address pools. DHCPv6 should be used just to pass the DNS information to the hosts;</li>
<li><strong>Enable RA on all LAN interfaces</strong>. If your LAN switches support RA guard, you should enable it to prevent RA spoofing and MITM attacks. RA is enabled by default on most LAN interfaces (but check BVI, SVI and wireless interfaces).</li>
<li><strong>Use SLAAC with privacy extensions</strong>. RA is enabled, so SLAAC works; use of privacy extensions has to be configured on the host.</li>
<li><strong>Use DNS server that supports dynamic host registration</strong>. Dynamically-assigned (and frequently changing) IPv6 addresses can turn your troubleshooting efforts into a nightmare. If the IPv6 hosts register their addresses with your DNS server, you’ll have at least a fighting change.</li>
</ul>
<h4>More information</h4><p>Various IPv6 access interface configurations are described in my <a href="http://www.ioshints.info/Building_IPv6_Service_Provider_Core"><em>Building IPv6 Service Provider Core</em></a> webinar (<a href="http://www.ioshints.info/Recordings">buy the recording</a> or <a href="http://spipv6.eventbrite.com/">register for an online session</a>); if you’re an enterprise engineers running a decently large network, you’ll find it useful despite its title.</p>
<p>Entry-level information for enterprise engineers considering IPv6 deployment in their networks is summarized in my <a href="http://www.ioshints.info/IPv6E101">Enterprise IPv6 – the first steps</a> webinar (<a href="http://www.ioshints.info/Recordings">buy the recording</a> or <a href="http://entipv6.eventbrite.com/">register for an online session</a>).</p>
<p>Both webinars are also available as part of the <a href="http://www.ioshints.info/Subscription">yearly subscription package</a>.</p>

