---
date: 2011-06-08T07:15:00.002+02:00
tags:
- switching
- data center
- workshop
- you've asked for it
- virtualization
title: What exactly is a Nexus 1000V?
url: /2011/06/what-exactly-is-nexus-1000v.html
---

<p>Nexus 1000V makes a lot of people unfamiliar with the virtualization intricacies mightily confused (more so as Cisco usually discusses it together with hardware-based switches like Nexus 5000 and Nexus 7000). These are the typical questions I get from my readers:</p>
<blockquote class="cite">What exactly is the Nexus 1000V? It sits in the VMware host, but how do the servers connect into it?  Is it a software connection spilled out into hardware at the 1000V egress? Do you somehow track what traffic belongs to each server and put polices against them like a normal switch would?</blockquote>
<p>Nexus 1000V is a replacement for VMware’s distributed switch; it’s a software-only layer-2 switch sitting inside the VMware hypervisor kernel.<!--more--></p>
<p>It uses the same NX-OS code base and the same familar CLI as the hardware Nexus switches, so you can configure it the way you’d configure any other Nexus switch. Similarly to the supervisor/linecard architecture in a hardware switch, the Nexus 1000V uses switching modules embedded in VMware hypervisor (VEM – Virtual Ethernet Module) and control-plane software running in a VM (VSM – Virtual Switch Module). The VSM can run on any ESX host or in a dedicate appliance (Nexus 1010) and control up to 64 VEMs.</p>
<p>Like with VMware’s vSwitch, the virtual servers (VMs) connect to a VEM resident in the hypervisor kernel in the ESX host on which they're running through virtual ports; VEM uses existing physical Ethernet ports (pNICs) to connect to the rest of the Data Center network. As said before, Nexus 1000V is a purely software solution; there’s no switching hardware associated with it.</p>
<p class="note">VEM pass-through used in VM-FEX/VN-Link is a totally different story. It uses VEM inside the VMware kernel to modify vSwitch/vDS behavior, but does not have the NX-OS-based control plane.</p>
<p>Deploying Nexus 1000V in your VMware-based data center gives you numerous advantages (read the relevant <a href="http://www.vmware.com/files/pdf/technology/cisco_vmware_virtualizing_the_datacenter.pdf">Cisco/VMware white paper</a> for more details), but as it’s a software-only solution it cannot implement all the feature you’d expect in a full-blown switch made by Cisco. For example, it can do extensive QoS classifications, policing and marking, but only limited queuing (CB-WFQ based on 802.1p CoS and VMware-specific traffic types).</p>
<p><b>Update 2011-06-09</b>: CB-WFQ support was added in software release 4.2(1) SV1(4).</p>
<h4>More information</h4><p>Basic virtualization techniques are described in my <a href="http://www.ioshints.info/Next-generation_IP_services">Next-Generation IP Services</a> webinar (<a href="http://www.ioshints.info/Recordings?code=NGIPSvc">buy a recording</a>). The <a href="http://www.ioshints.info/DC30">Data Center 3.0 for Networking Engineers</a> webinar (<a href="http://www.ioshints.info/Recordings?code=DC30">buy a recording</a>) has a whole section devoted to server virtualization and its impact on LAN and SAN. Last but definitely not least, the <a href="http://www.ioshints.info/VMnet">VMware Networking Deep Dive</a> webinar (<a href="http://vnetwork.eventbrite.com/">register for an online session</a>) has in-depth description of virtual layer-2 switching inside VMware hypervisor, and the roles of Nexus 1000V, Adapter FEX (VN-Tag) and VM-FEX (VN-Link). You can get access to all three webinars as part of the <a href="http://www.ioshints.info/Subscription">yearly subscription</a>.</p>

