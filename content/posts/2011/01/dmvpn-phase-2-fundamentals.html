---
url: /2011/01/dmvpn-phase-2-fundamentals.html
title: "DMVPN Phase 2 Fundamentals"
date: "2011-01-18T06:35:00.000+01:00"
tags: [ DMVPN,Workshop ]
---

<p>Continuing with the DMVPN Fundamentals series, the <a href="http://demo.ipspace.net/bin/watch?id=fa600b88-3b98-11e1-96be-005056880254">following video explains the DMVPN Phase 2 fundamentals and detailed spoke-to-spoke packet flow with dynamic NHRP resolution and IPSec session establishmen</a>t. Before watching it, you might want to read the “<a href="https://blog.ipspace.net/2011/01/sometimes-you-need-to-step-back-and.html"><em>Sometimes you need to step back and change your design</em></a>” article and watch the <a href="https://blog.ipspace.net/2011/01/dmvpn-phase-1-fundamentals.html">Phase 1 Fundamentals</a> video.</p>
<div class="separator" style="clear: both; text-align: center;"><a href="http://demo.ipspace.net/bin/watch?id=fa600b88-3b98-11e1-96be-005056880254" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="277" src="/2011/01/s400-DMVPN_Phase2_Intro_Play.png" width="400"/></a></div>
<p>Let’s summarize:<!--more--></p>
<ul class="ListParagraph"><li>Phase 2 DMVPN uses multipoint GRE tunnels on all routers.</li>
<li>NHRP is used for dynamic spoke registrations (like with Phase 1 DMVPN), but also for on-demand resolution of spoke transport addresses.</li>
<li>Traffic between the spokes initially flows through the hub router until NHRP resolves the remote spoke transport IP address and IKE establishes the IPSec session with it.</li>
<li>The IP next-hop address for any prefix reachable over DMVPN must be the egress router (hub or spoke). From the routing perspective, Phase 2 DMVPN subnet should behave like a LAN.</li>
<li>Multicast packets (including routing protocol hello packets and routing updates) are exchanged only between the hub and the spoke routers. </li>
<li>Routing adjacencies are established only between the hub and the spoke routers unless you use statically-configured neighbors.</li>
</ul>
<h4>More information</h4><p>The <em>Phase 2 DMVPN </em>section of the <a href="http://www.ioshints.info/DMVPN"><em>DMVPN: from Basics to Scalable Networks</em></a> webinar (<a href="http://dmvpn.eventbrite.com/">register here</a> or <a href="http://www.ioshints.info/Recordings">buy a recording</a>) also includes the following topics:</p>
<ul class="ListParagraph"><li>Spoke and hub router configuration;</li>
<li>Routing protocol configuration, including OSPF, EIGRP and BGP;</li>
<li>DMVPN redundancy and shared IPSec tunnel protection;</li>
<li>Monitoring and troubleshooting guidelines.</li>
</ul>

