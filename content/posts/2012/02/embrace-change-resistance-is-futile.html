---
title: "Embrace the change ... resistance is futile ;)"
date: "2012-02-24T06:41:00.000+01:00"
tags: [ SDN,OpenFlow,virtualization ]
---

<p>After all the <a href="http://blog.ioshints.info/2011/03/open-networking-foundation-fabric.html">laws-of-physics-are-changing hype</a> it must have been anticlimactic for a lot of people to realize what Nicira is doing (although <a href="http://blog.ioshints.info/2011/10/what-is-nicira-really-up-to.html">I’ve been telling you that for months</a>). Not surprisingly, there were the usual complaints and twitterbursts:<!--more--></p>
<ul class="ListParagraph"><li>It’s just an overlay solution;</li>
<li>It’s yet another tunneling protocol;</li>
<li>It doesn’t have end-to-end QoS;</li>
<li>It’s a simple solution using too-complex technology;</li>
<li>Why are they playing at the edge instead of solving the whole problem?</li>
</ul>
<p>All of these complaints have merits ... and I’ve heard them at least three or four times:</p>
<ul class="ListParagraph"><li>When we started encapsulating SNA in TCP/IP using RSRB and later DLSw;</li>
<li>When we started replacing voice switches with VoIP and transporting voice over IP networks;</li>
<li>When we replaced Frame Relay and ATM switches with MPLS/VPN.</li>
</ul>
<p class="note">Interestingly I don’t remember a huge outcry when we started using IPsec to build private networks over the Internet ... maybe the immediate cost savings made everyone forget we were actually building tunnels with no QoS.</p>
<p>Anyhow, we’ve proven time and again in the last 20+ years that the only way to scale a networking solution is to <a href="http://blog.ioshints.info/2011/05/complexity-belongs-to-network-edge.html">push the complexity to the edge</a> and to decouple edge from the core (in case of virtual networks, <a href="http://blog.ioshints.info/2011/12/decouple-virtual-networking-from.html">decouple them from the physical ones</a>). </p>
<div class="separator" style="clear: both; text-align: center;"><a href="/2012/02/s1600-borg.jpg" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="317" src="/2012/02/s400-borg.jpg" width="400"/></a><br/>Stop fighting the IP tunneling ... you will be assimilated.</div>
<p>Assuming one could design the whole protocol stack from scratch, one could do a proper job of eliminating all the redundancies. Given the fact that the only ubiquitous transport we have today is IP, and that you can’t expect the equipment vendors to invest into anything else but Ethernet+IP in the foreseeable future, the only logical conclusion is to use IP as the transport for your virtual networking data ... like any other application is doing these days. It obviously works well enough for Amazon.</p>
<p class="info">You have to use transport over IP if you want the solution to scale ... or a completely revamped layer-2 forwarding paradigm, which is not impossible, merely impractical in a reasonable timeframe ... but of course OpenFlow will bring us there ;)</p>
<p>I’m not saying Nicira’s solution is the right one. I’m not saying GRE or VXLAN or NVGRE or something else is the right tunneling protocol. I’m not saying transporting Ethernet frames in IP tunnels is a good decision – I would prefer to have full IP routing in the hypervisors and transport IP datagrams, not L2 frames, between hypervisor hosts. I’m also not saying IP is the right transport protocol, it’s just the only scalable one we have today.</p>
<p>However, I’m positive that the only way to build scalable virtual networks is to:</p>
<ul class="ListParagraph"><li><a href="http://networkheresy.wordpress.com/2012/01/15/networking-needs-a-vmware-part-1-address-virtualization/">Split hypervisor host addressing (which is visible in the core) from VM addressing</a> (which is only visible to hypervisors);</li>
<li>Use simple routed core transport which allows the edge (hypervisor) addresses to be aggregated for scalability;</li>
<li>Remove all VM-related state from the transport core;</li>
<li>Use <a href="http://blog.ioshints.info/2011/12/vxlan-ip-multicast-openflow-and-control.html">proper control plane</a> that will minimize the impact of stupidities we have to deal with if we have to build L2 virtual networks.</li>
</ul>
<p>But, as always, this is just my personal opinion, and I'm <a href="http://blog.ioshints.info/2010/07/extremely-off-topic-another-recognition.html">known to be biased</a>.</p>

