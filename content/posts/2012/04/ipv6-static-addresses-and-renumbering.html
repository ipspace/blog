---
url: /2012/04/ipv6-static-addresses-and-renumbering.html
title: "IPv6 static addresses and renumbering"
date: "2012-04-04T06:54:00.000+02:00"
tags: [ IPv6 ]
---

<p>The proponents of <a href="http://blog.ioshints.info/2011/12/we-just-might-need-nat66.html">Network Prefix Translation for IPv6 (NPT66)</a> usually claim it’s required for one of the two reasons: to implement <a href="http://blog.ioshints.info/2010/12/small-site-multihoming-in-ipv6-mission.html">multihoming without BGP</a> (<a href="http://blog.ioshints.info/2009/05/lack-of-ipv6-multihoming-elephant-in.html">valid</a>) and to avoid renumbering inside network(s) when the ISP assigns you a new IPv6 prefix. Let’s focus on the renumbering claim today.<!--more--></p>
<p class="info">A lot of IPv6-focused enterprise engineers have long advised medium-to-large networks to get their own IPv6 address space.  Greg Ferro <a href="http://etherealmind.com/importance-provider-independent-ipv6-addresses/">compiled a long list of good reasons</a> to do that, and having your own PI space is not overly expensive anyway – <a href="http://www.ripe.net/lir-services/member-support/info/billing/billing-procedure-and-fee-schedule-for-lirs-2011">50€ per year in RIPE region</a>.</p>
<h4>Network renumbering</h4><p>There are two reasons you might have to renumber your IPv6 network (assuming it’s using public IPv6 addresses like it should):</p>
<ul class="ListParagraph"><li>You’re using DHCP prefix delegation with your ISP;</li>
<li>You’ve been assigned a static IPv6 prefix but decided to change ISPs (or your ISP decided they have nothing better to do than to annoy their customers).</li>
</ul>
<p>Most hosts are renumbered automatically if you use SLAAC (it might take a while, so if you’re renumbering your static IPv6 prefix take advance precautions like lowering RA prefix lifetimes), configurations of layer-3 forwarding devices (routers, layer-3 firewalls) and the hosts with static IPv6 addresses have to be changed manually.</p>
<div class="separator" style="clear: both; text-align: center;"><a href="/2012/04/s1600-GoodEnough.jpg" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" src="/2012/04/s400-GoodEnough.jpg" width="400"/></a></div>
<p>Assuming you have a small network with a single layer-3 device (that also acts as a firewall), you can usually perform all renumbering automatically based on IPv6 prefix delegated via DHCPv6 (checking whether your edge router supports that might be a good idea if you’re buying new gear).</p>
<p>If you have more than one layer-3 device in the network, you’ll probably have to do the renumbering process manually (one would hope that vendors would eventually implement hierarchical prefix delegation, but I haven’t seen it implemented yet), but even there a bit of planning goes a long way – <a href="http://ccietobe.blogspot.com/2009/01/renumbering-ipv6-with-ease-via-ipv6.html">general prefixes make life easy for Cisco IOS users</a> (Junos has a regex search/replace that you can use to replace patterns, including parts of IPv6 addresses, throughout the configuration).</p>
<p class="note">Ah, so your preferred vendor doesn’t support easy IPv6 renumbering? Yell at them or vote with your wallet and buy something else.</p>
<h4>Server renumbering</h4><p>Automatic IPv6 host renumbering works only if the hosts use SLAAC. Hosts with static IPv6 addresses have to be renumbered manually, but even there you could use <a href="http://en.wikipedia.org/wiki/Unique_local_address">Unique Local Addresses</a> (ULA – <a href="http://tools.ietf.org/html/rfc4193">RFC4193</a>) to avoid most of the renumbering hassle – assign a global IPv6 prefix and an ULA prefix to every subnet, use static ULA addresses for your inside servers, and use ULA addresses for all internal communications.</p>
<p>Servers that are not reachable from the Internet don’t have to have static public IPv6 addresses – they should have a static ULA address that their clients can use, and a dynamic public IPv6 address they use to access the Internet if needed (example: software patches).</p>
<div class="separator" style="clear: both; text-align: center;"><img border="0" src="/2012/04/s500-MythBusted.gif"/></div>
<p>But what about publicly reachable servers? Technology doesn’t provide a good answer here and so we enter the realms of layer-10 (religious layer). Some people claim it makes perfect sense to have your own public servers even in networks that are so small they can’t justify paying for their own IPv6 address space ... and thus invoke the magic of NPT66 to avoid server renumbering (because it’s so hard to renumber the only server you have in your organization after manually changing its public DNS entry whenever you decide to change your ISP). </p>
<p>I would rather <a href="http://myhosting.com/personal-website-hosting/">spend $4.95 a month</a> and have a server hosted by someone with reliable infrastructure, which might also increase my web site availability, but that’s just me.</p>
<h4>Summary</h4><p>Properly-designed IPv6 networks will use public IPv6 addresses in combination with ULA addresses (when needed). Get used to it. If you’re big enough, get your own IPv6 address space; if you’re too small, buy networking gear that supports easy renumbering.</p>
<p>In my personal opinion, the need for NPT66 to avoid server renumbering in single-homed networks without their own PI IPv6 address space is a totally bogus claim. Organizations this small should not have public-facing servers – web hosting is cheap enough these days.</p>
<p class="note">If you’re an IT geek who wants to be able to hug all his servers, that’s perfectly fine with me – just don’t complain if you have to take care of them every now and then. I prefer to have a web site that keeps running even when I’m on vacation.</p>
<h4>More information</h4><p>If you’ve just started considering the impact of IPv6 on your network, my <a href="http://www.ipspace.net/Roadmap/IPv6_webinars"><em>Enterprise IPv6 – The First Steps</em></a> webinar will get you started. <a href="http://www.ipspace.net/Building_Large_IPv6_Service_Provider_Networks"><em>Building Large IPv6 Service Provider Networks</em></a> webinar will give you numerous design guidelines that are also applicable to large enterprise networks (<a href="http://www.amazon.com/gp/product/1587142279/ref=as_li_tf_tl?ie=UTF8&amp;tag=cisioshinandt-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=1587142279">IPv6 for Enterprise Networks</a> is also a pretty good book). </p>
<p>A few more <a href="http://www.ipspace.net/Roadmap/IPv6_webinars">IPv6 webinars</a> are planned for this year and you can get access to all of them with the <a href="http://www.ipspace.net/Subscription_to_ioshints_webinars">yearly subscription</a>.</p>
<p class="update">2012-04-04 11:30 GMT: Added information from Sebastian's comment — Junos search/replace functionality.</p>

