---
url: /2012/06/we-need-both-openflow-and-netconf.html
title: "We need both OpenFlow and NETCONF"
date: "2012-06-28T06:18:00.000+02:00"
tags: [ SDN,network management,OpenFlow ]
---

<p>Every time I write about a simple use case that could benefit from OpenFlow, I invariably get a comment along the lines of “<a href="https://blog.ipspace.net/2012/06/hybrid-openflow-brocade-way.html?showComment=1340415130204#c22766764086057868">you can do that with NETCONF</a>”. Repeated often enough, such comments might make an outside observer believe you <a href="http://www.networkworld.com/news/2011/111711-sdn-openflow-253228.html">don’t need OpenFlow for Software Defined Networking (SDN)</a>, which is simply not true. Here are at least three fundamental reasons why that’s the case.<!--more--></p>
<h4>Control/Data Plane Separation</h4><p>Whether you need OpenFlow for SDN obviously depends on how you define SDN. The networking components were defined by their software the moment they became smarter than cables connecting individual hosts (around the time IBM launched 3705 in the seventies if not earlier), so you definitely don’t need OpenFlow to implement networking defined by software.</p>
<p>However, lame joking aside, the definition of SDN as promoted by the Open Networking Foundation requires the separation of control and data planes, and you simply can’t do that with NETCONF. If anything, <a href="http://datatracker.ietf.org/wg/forces/charter/">ForCES</a> would be the right tool for the job, but you’ve not heard much about ForCES from your favorite vendor, have you … even though its development has been slowly progressing (or not, depending on your point of view) for the last decade.</p>
<h4>Implementing new functionality</h4><p>NETCONF is a protocol that allows you to modify networking device’s configuration. OpenFlow is a protocol that allows you to modify its forwarding table. If you need to reconfigure a device, NETCONF is the way to go. If you want to implement new functionality (whatever it is) that is not easily configurable within the software your networking device is running, you better be able to modify the forwarding plane directly. </p>
<p>There might be interesting things you could do through network device configuration with NETCONF (installing route maps with policy-based routing, access lists or static MPLS in/out label mappings, for example), but installing the same entries via OpenFlow would be way easier, simpler and (most importantly) device- and vendor-independent.</p>
<p>For example, <a href="https://blog.ipspace.net/2012/06/netconf-expect-on-steroids.html"><span class="high">NETCONF has no standard mechanism you can use today to create and apply an ACL to an interface</span></a>. You can create an ACL on a Cisco IOS/XR/NX-OS or a Junos switch or router with NETCONF, but the actual contents of the NETCONF message would be vendor-specific. To support devices made by multiple vendors, you’d have to implement vendor-specific functionality in your NETCONF controller. On the contrary, you could install the same forwarding entries (with the DROP action) through OpenFlow into any OpenFlow-enabled switch (the “only” question being whether these entries would be executed in hardware or on the central CPU).</p>
<h4>Ephemeral state</h4><p>NETCONF protocol modifies device configuration. Whatever you configure with NETCONF appears in the device configuration and can be saved from running configuration to permanent (or startup) one when you decide to save the changes. You might not want that to happen if all you want to do is apply a temporary ACL on an interface or create an MPLS-TP-like traffic engineering tunnel (computed externally, not signaled through RSVP).</p>
<p>OpenFlow-created entries in the forwarding table are by definition temporary. They don’t appear in device configuration (and are probably fun to troubleshoot because they only appear in the forwarding table) and are lost on device reload or link loss.</p>
<h4>Can we do it without NETCONF?</h4><p>Given all of the above, can we implement SDN networks without NETCONF? Of course we can assuming we go down the OpenFlow-only route, but not many users or vendors considering OpenFlow are willing to do that (<a href="https://blog.ipspace.net/2012/05/openflow-google-brilliant-but-not.html">Google being one of the exceptions</a>); most of them would like to retain the field-proven smarts of their networking devices and augment them with additional functionality configured through OpenFlow. In a real-life network, we will thus need both NETCONF to configure the existing software running in networking devices (hopefully through standardized messages in the not-too-distant future), and potentially OpenFlow to add new functionality where needed.</p>

