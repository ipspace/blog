---
title: "Cisco ACI â€“ a Stretched Fabric That Actually Works"
date: "2015-03-05T08:12:00.000+01:00"
tags: [ Data Center,Fabric,WAN,ACI ]
---

<p>In mid-February a blog post on Cisco&#x2019;s web site <a href="http://blogs.cisco.com/datacenter/new-cisco-apic-software-allows-stretched-aci-fabric-across-long-distances">announced stretched ACI fabric</a> (bonus points for not using <a href="http://blog.ipspace.net/2014/05/marketing-grammar.html">marketing grammar</a> but talking about a <a href="http://www.cisco.com/c/en/us/td/docs/switches/datacenter/aci/apic/sw/1-x/release/notes/aci_nxos_rn_1103.html#46677">shipping product</a>). Will it work better than <a href="http://blog.ipspace.net/2011/09/long-distance-irf-fabric-works-best-in.html">other PowerPoint-based fabrics</a>? You bet!</p>
<h4>What&#x2019;s the Big Deal?</h4><p>Cisco&#x2019;s ACI fabric uses distributed (per-switch) control plane with APIC controllers providing fabric configuration and management functionality. In that respect, the ACI fabric is no different from any other routed network, and we know that those work well in distributed environments.<!--more--></p>
<h4>But What about Stretched Subnets?</h4><p>Even though you can use Cisco ACI to implement <a href="http://blog.ipspace.net/2011/04/distributed-firewalls-how-badly-do-you.html">stretched subnets</a> (and there was the mandatory mention of <a href="http://blog.ipspace.net/2015/02/before-talking-about-vmotion-across.html">VM mobility</a> in Cisco&#x2019;s documentation), the fabric uses VXLAN-over-IP as the transport protocol, making the underlying transport network rock-solid. You cannot get a L2 forwarding loop in a pure L3 network.</p>
<p>Stretched subnets are <a href="http://blog.ipspace.net/2013/09/sooner-or-later-someone-will-pay-for.html">as great idea as they ever were</a> (there&#x2019;s nothing you can do to fix a broken concept), but ACI&#x2019;s handling of stretched subnets is better than almost anything else out there (including OTV). </p>
<p>ACI uses ARP proxies and anycast gateways on leaf switches, and something equivalent to VRF-based host routing to forward traffic toward IP endpoints. The traffic transported across the fabric is thus mostly unicast IP traffic (admittedly encapsulated in VXLAN envelopes), and we know that IP-based networks got pretty good at handling unicast IP traffic.</p>
<h4>But there&#x2019;s Split Brain Problem</h4><p>True &ndash; and Cisco was quick to admit the problem exists (many vendors try to pretend you don&#x2019;t have a problem because the <a href="http://blog.ipspace.net/2012/10/if-something-can-fail-it-will.html">redundant links between sites can never fail</a>) and documented the split fabric scenario in their <a href="http://www.cisco.com/c/en/us/td/docs/switches/datacenter/aci/apic/sw/kb/b_kb-aci-stretched-fabric.html">design guidelines</a>:</p>
<ul class="ListParagraph"><li>Controller cluster is split, and the minority part of the cluster goes into read-only mode;</li>
<li>The fabric continues to forward traffic based on already-established policy rules;</li>
<li>Leaf switches can detect new endpoints (assuming they&#x2019;re covered with existing policy rules) and report them to the spine switches &ndash; both isolated fabrics thus continue to operate normally even under edge or core topology changes.</li>
</ul>
<h4>More Information</h4><p>If you&#x2019;re interested in data center fabrics, you (RFC 2119) MUST watch the Cisco ACI videos from <a href="http://techfieldday.com/appearance/cisco-presents-at-networking-field-day-8/">NFD8</a> and <a href="http://techfieldday.com/appearance/cisco-presents-at-networking-field-day-9/">NFD9</a>, and you SHOULD register for the <a href="http://www.ipspace.net/Data_Center_Fabrics">Data Center Fabrics Update</a> webinar in mid-May.</p>
<p><strong>Disclosure</strong>: Cisco Systems was indirectly covering some of the costs of my attendance at the Network Field Day 9 event. <a href="http://blog.ipspace.net/p/networking-tech-field-day-disclaimer.html">More&hellip;</a></p>

