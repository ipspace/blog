---
url: /2018/09/vxlan-broadcast-domain-size-limitations.html
title: "VXLAN Broadcast Domain Size Limitations"
date: "2018-09-24T09:00:00.000+02:00"
tags: [ VXLAN,Data Center,Fabric,EVPN ]
---

<p>One of the attendees of my <a href="https://www.ipspace.net/Building_Next-Generation_Data_Center">Building Next-Generation Data Center</a> online course tried to figure out whether you can build larger broadcast domains with VXLAN than you could with VLANs. Here’s what he sent me:</p>
<blockquote class="cite">I'm trying to understand differences or similarities between VLAN and VXLAN technologies in a view of (*cast) domain limitation. </blockquote>
<p>There’s no difference between the two on the client-facing side. VXLAN is just an encapsulation technology and doesn’t <a href="https://blog.ipspace.net/2010/07/bridging-and-routing-is-there.html">change how bridging works</a> at all (read also <a href="https://blog.ipspace.net/2010/07/bridging-and-routing-part-ii.html">part 2</a> of that story).<!--more--></p>
<p>The only difference between VLAN-based fabric and VXLAN-based fabric is the core transport. VLAN-based fabric uses STP/MLAG in the fabric core, TRILL/SPB/… based fabrics use their own routing protocols, and VXLAN uses IP routing. Edge flooding and learning behavior remains the same.</p>
<p class="info">I covered the basics of TRILL and SPB (in case anyone is still interested) in <a href="https://www.ipspace.net/Data_Center_Infrastructure_for_Networking_Engineers">Data Center Infrastructure for Networking Engineers</a> webinar. Roger Lapuh did a <a href="https://my.ipspace.net/bin/list?id=Clos#L2_FABRIC">deeper dive into SPB</a> during his presentation @ <a href="https://www.ipspace.net/Leaf-and-Spine_Fabric_Architectures">Leaf-and-Spine Fabrics webinar</a>. His presentation is accessible with <a href="https://www.ipspace.net/Subscription/Free">free ipSpace.net subscription</a>.</p>
<p><a href="https://www.ipspace.net/EVPN_Technical_Deep_Dive">EVPN is a different story</a> as it’s IP aware… but keep in mind that EVPN became SIP of Networking - every implementation supports a different subset of features.</p>
<p>Several EVPN-based fabrics support ARP proxy at the fabric edge, reducing the number of broadcasts caused by ARPs… assuming someone is not ARPing for a non-existent IP address, in which case you’d probably see those ARPs flooded. Test, test, test… and make sure you also test all possible crazy scenarios.</p>
<p>EVPN-based fabric could implement pure IP transport and turn off flooding altogether, turning what looks like a VLAN into stable routed IP network (admittedly doing routing on host routes). I don’t think any vendor is brave enough to do that.</p>
<p class="info">If you’re an ipSpace.net subscriber and want to learn more about EVPN, watch the <a href="https://www.ipspace.net/EVPN_Technical_Deep_Dive">EVPN Technical Deep Dive</a> webinar.</p>
<blockquote class="cite">Yes, we know and understand why we should keep VLAN size limited (let’s say 1K hosts/guests/) but what about VXLAN segment size?</blockquote>
<p><a href="https://blog.ipspace.net/2016/02/vlans-and-failure-domains-revisited.html">Same limitations apply</a> - although EPVN-based fabrics (whether using VXLAN or MPLS or GRE or …) could reduce the amount of ARP traffic, there’s nothing stopping a single host from blasting the network with a gazillion RARPs per second (because why not) and impacting everyone else in the same segment.</p>
<blockquote class="cite">Am I right that from business risk perspective I should keep VXLAN domain small as well because someone or something can impact all my 12.000 VM's in one VXLAN? Or is this technology resistant against broken frames/packets, flooding…? </blockquote>
<p><a href="https://blog.ipspace.net/2012/05/layer-2-network-is-single-failure.html">A single flooding domain is a single failure domain</a>. A VXLAN VNI (unless turned into pure routed solution) is a single flooding domain regardless of what the fabric and microsegmentation vendors are telling you. QED.</p>
<p><strong>Long story short</strong>: Bridging doesn’t scale. <a href="https://blog.ipspace.net/2014/02/keep-your-failure-domains-small.html">Keep your failure domains small</a>.</p>

