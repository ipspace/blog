---
date: 2016-05-05T09:28:00.000+02:00
tags:
- design
- data center
- high availability
title: Unexpected Recovery Might Kill Your Data Center
url: /2016/05/unexpected-recovery-might-kill-your.html
---

<p>Here’s an interesting story I got from one of my friends:</p>
<ul class="ListParagraph"><li>A large organization used a disaster recovery strategy based on <a href="http://blog.ipspace.net/2013/01/long-distance-vmotion-stretched-ha.html">stretched IP subnets</a> and restarting workloads with unchanged IP addresses in a secondary data center;</li>
<li>Once they experienced a WAN connectivity failure in the primary data center and their disaster recovery plan kicked in.</li>
</ul>
<p>However…<!--more--> while they were busy restarting the workloads in the secondary data center, and managed to get most of them up and running, the DCI link unexpectedly came back to life.</p>
<p>That wouldn’t be a problem if they would have re-addressed the servers, or at least done proper shutdown in the primary data center, but they were so busy recovering from the failure that they forgot to turn off the servers and storage in the primary data center.</p>
<p><strong>End result</strong>: tons of duplicate IP addresses, cluster failures and data corruption (because the data on replicated disks diverged in the meantime).</p>
<p><strong>Moral of the story</strong>: disaster recovery starts with a proper shutdown of the failed data center. The extra half an hour you need to do that is much better than being offline for days while restoring data from tape backups… and if your Recovery Time Objective (RTO) is less than a few hours you probably need an application-level active/active solution anyway.</p>
<p>Or as my friend Boštjan Šuštar (who did a great job <a href="http://blog.ipspace.net/2016/03/sad-news-im-not-coming-to-interop-las.html">replacing me at Interop</a>) wrote in a recent email:</p>
<blockquote class="cite">Disaster Recovery Procedure: Don’t panic and always carry a towel.</blockquote>
<p>Don’t think such a disaster could ever happen in real life? Then you definitely don’t need my <a href="http://www.ipspace.net/Building_Next-Generation_Data_Center?utm_source=blog&amp;utm_medium=blog">Building Next-Generation Data Center online course</a>.</p>

