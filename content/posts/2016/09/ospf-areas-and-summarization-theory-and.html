---
date: 2016-09-09T13:59:00.000+02:00
tags:
- design
- OSPF
title: 'OSPF Areas and Summarization: Theory and Reality'
url: /2016/09/ospf-areas-and-summarization-theory-and.html
---

<p><a name="_GoBack"></a>While most readers, commenters, and Twitterati agreed with my take on the uselessness of OSPF areas and inter-area summarization in 21<span style="vertical-align: super; font-size: 80%;">st</span> century, a few of them pointed out that <a href="http://c2.com/cgi/wiki?DifferenceBetweenTheoryAndPractice">in practice, the theory and practice are not the same</a>. Unfortunately, most of those counterexamples failed due to broken implementations or vendor “optimizations”.<!--more--></p>
<h4>Broken OSPF Implementation</h4><p>Someone (name and other details withheld for an obvious reason) described the problem they faced in their data center network: while switches from most vendors worked like a charm without route summarization (they had to use OSPF areas due to the network size), a particular vendor’s switches needed seconds to recompute the topology and install the new routes in the forwarding table.</p>
<p>They tried using BGP and the problem disappeared, proving that it must have been a broken OSPF implementation.</p>
<p>Potential workarounds:</p>
<ul class="ListParagraph"><li>Use BGP;</li>
<li>Use stub areas, either with aggressive summarization or as totally stubby areas (no inter-area routes inserted into an area).</li>
</ul>
<p class="warn">The second workaround requires inter-spine links to avoid black holes after leaf-to-spine link failures. The proof is left as an exercise to the reader, or you could cheat and watch the <a href="http://www.ipspace.net/Leaf-and-Spine_Fabric_Designs">Leaf-and-Spine Fabric Designs</a> webinar (more specifically, the <em>Route Summarization and Link Aggregation </em>video in the <a href="http://content.ipspace.net/get/Clos#Layer-3 Fabrics with Non-Redundant Server Connectivity"><em>Layer-3 Fabrics with Non-redundant Server Connectivity</em></a><em> </em>section).</p>
<h4>Vendor Licensing</h4><p><a href="https://www.linkedin.com/in/jochenbartl">Jochen Bartl</a> sent me this message:</p>
<blockquote class="cite">Another sad but valid reason to use summarization could be also due to licensing. There are still vendors out there who put artificial limitations on their data center gear. Nexus 5600 for example supports only 256 dynamic routes in the <a href="http://www.cisco.com/c/en/us/td/docs/switches/datacenter/sw/nx-os/licensing/guide/b_Cisco_NX-OS_Licensing_Guide/b_Cisco_NX-OS_Licensing_Guide_chapter_01.html">LAN_BASE_SERVICES_PKG license</a>. Ordering and getting budget for a license upgrade can become quite a challenge on its own in some organizations ;-)</blockquote>
<p>Well done, Cisco! It’s so nice to see you guys supporting clean and simple network designs.</p>
<h4>Old Gear</h4><p>Finally, there’s always a dinosaur hiding in a dusty closet. As an <a href="https://blog.ipspace.net/2016/09/do-we-still-need-ospf-areas-and.html?showComment=1473093047491#c2289999859109206256">anonymous commenter wrote</a>:</p>
<blockquote class="cite">Got some customers still using very old routers managing critical services with 7+ yrs uptime that can't process a large DB and cannot be touched whatever is the issue/project.</blockquote>
<p>Deal with these like you would with a broken OSPF implementation: isolate them in a stub area, and hope they fail soon (even better if they’re so old you can’t even replace them anymore).</p>

