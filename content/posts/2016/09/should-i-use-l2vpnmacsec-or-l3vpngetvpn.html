---
date: 2016-09-15T08:08:00.000+02:00
tags:
- design
- DMVPN
- WAN
title: Should I Use L2VPN+MACSEC or L3VPN+GETVPN?
url: /2016/09/should-i-use-l2vpnmacsec-or-l3vpngetvpn.html
---

<p><a name="_GoBack"></a>Here are the outlines of an interesting <a href="http://www.ipspace.net/ExpertExpress">ExpertExpress</a> discussion:</p>
<ul class="ListParagraph"><li>A global organization wanted to connect data centers across the globe with a new transport backbone.</li>
<li>All the traffic has to be encrypted.</li>
</ul>
<p>Should they buy L2VPN and use MACsec on it or L3VPN and use GETVPN on it (considering they already have large DMVPN deployments in each region)?<!--more--></p>
<p>As always, the correct answer is <em>it depends, </em>in this case on how much you value SP independence versus performance, cost and equipment manufacturer independence.</p>
<p class="warn">Please note that they were not looking for a highly secure solution. That requirement would totally change the conversation and I’d recommend they get in touch with <a href="http://uebermeister.com/about.html">Christoph Jaggi</a> who knows infinitely more about that topic than I do.</p>
<p>The first recommendation I made was <em>try to be as independent from your Service Provider as you can be</em>. In other words, don’t go for a classic L3VPN where the SP owns your core routing (yes, I know that sounds weird coming from the guy who wrote <a href="#MPLS.2FVPN">several MPLS books</a>).</p>
<p>There are (at least) two ways to achieve that goal:</p>
<ul class="ListParagraph"><li>Buy L2VPN and run traditional IP routing on top of it.</li>
<li>Buy L3VPN and build an overlay (CE-to-CE tunnels) on top of it. Don’t run routing protocol with the SP but rely on PE-CE subnets for transport connectivity (an architecture recently <a href="https://blog.ipspace.net/2015/06/software-defined-wanwell-orchestrated.html">remarketed as SD-WAN</a>).</li>
</ul>
<p>The beauty of the second approach: you can use it with every VPN service (or even across the Internet) from every SP worldwide, which puts your SP in an awkward spot during the contract negotiation. </p>
<p class="note">Not surprisingly, the customer’s SP contacts strongly suggested staying with traditional L3VPN.</p>
<p>Second recommendation: decide whether you want to use a single VPN design for your access and core networks (in which case go with DMVPN for the core network) or whether you want to optimize other criteria, for example:</p>
<ul class="ListParagraph"><li>Price/performance. High-speed MACsec is dirt cheap comparted to IPsec or IP-over-GRE-over-IPsec-over-IP (= DMVPN).</li>
<li>Equipment vendor independence. Any router or firewall on the market supports point-to-point IPsec tunnels, and it’s reasonably easy to build a multi-vendor solution, giving you more negotiation room when faced with expensive high-speed IPsec hardware from your beloved vendor. DMVPN locks you into Cisco.</li>
</ul>
<p>Why would I even consider DMVPN for the core network? Because the customer already has extensive DMVPN operational experience, whereas anything else would introduce a learning curve.</p>
<p>Why did I totally ignore GETVPN? GETVPN was designed for a single (end-to-end) routing domain, for example securing customer (CE-to-CE) traffic in classic L3VPN deployment with PE-CE routing protocols, which would make it hard to change SPs on the fly.</p>

