---
title: "Early Data-Link Layer Addressing"
date: 2023-10-01 06:37:00
tags: [ networking fundamentals ]
draft: True
comment: |
  In early 2020 I created the _[Early Data Link Layer Addressing Mechanisms](https://my.ipspace.net/bin/get/Net101/NA2.1%20-%20Early%20Data%20Link%20Layer%20Addressing%20Mechanisms.mp4?doccode=Net101)_ video as part of the _[How Networks Really Work webinar](https://www.ipspace.net/How_Networks_Really_Work)_. This blog post is an edited transcript of that video.
---

Now that we covered the theoretical part of addressing, let's go into some practical examples and I'll start with data link layer and then move on to networking and higher layers. The earliest data link implementations that were not point-to-point links were multi-drop links and I mentioned them in networking challenges. Initially, we implemented this with modems, but today you can still see multi-drop in satellite communications or in Wi-Fi or in cable modems. Cable modems have two channels, one for downstream, one for upstream and two nodes actually can't talk to each other without going through the central router. Same with satellite uplinks and downlinks. So even though you would say, well, this is a really old technology, we still use the same concept, only today we wouldn't use a special format for data link frames, we would just put Ethernet on top of whatever and be done with it. In early multi-drop implementations, a single master, like my router here, would be polling slave stations. Today, we mostly don't do polling because that is time consuming with very high speeds and large latencies like satellite communication, you can't afford that. So there are other mechanisms in, for example, wireless or passive optical network spawn, which is also another case of multi-drop, how the time slots are allocated to different stations so that everyone knows when they can transmit without polling. As they figured out that all the communication was going on between a master and a slave, they said, well, you know, we don't really need two addresses in our data link layer frames because the slaves can't communicate directly anyway. So what we will do is we'll just have one address field and it started with 8 bits in SDLC and then got extended to more than 8 bits with HDLC. And if the frame is sent by the master, this is obviously the destination address of the slave. And if the frame is sent by the slave, this is the source address of the slave sending the frame. Interestingly, people are still using SDLC and HDLC today. No surprise there because the hardware implementations of these protocols were extremely widespread. Everyone is using this on some sort of serial links. And I was told that, for example, the alarm systems are still using SDLC or HDLC-based framing and addressing. Interestingly, the exact same data link layer format, including the addressing bit, is used for, for example, PPP frames. So when you were using PPP on serial links or Cisco HDLC on serial links, there was always the address field and the control byte, which specified whether this was a numbered frame or a numbered frame or a control frame and so on. But we didn't use that in point-to-point protocol, for example. So this is straight from Wikipedia, where they explain how PPP works. And first you have the flag. This is the sequence of 8 bits that identifies start of frame. And then, as always, in HDLC or SDLC, you have the address bit. And because this is a point-to-point link between two nodes and because PPP doesn't have any addresses, they decided to fake it and put the broadcast address in, meaning this frame is addressed to everyone on the link that happens to be listening. Obviously, on a point-to-point link, only the other node is listening, but, you know, they figured how to put something in the address field that makes sense from the protocol perspective. And then they would use the 03 in the control bit, which means unnumbered data frame. And then you would get the 2-byte protocol ID and then the rest of the PPP frame. So yet again, why are we using this in PPP frames? Because there were so many hardware implementations for HDLC or SDLC. And by the way, the exact same frame format with address and control byte and everything was also used in lab B, which is layer 2 of X25, and in lab D, which is layer 2 for ISDN signaling. Everyone, at a certain point in time, was using the same frame format, including the 8-bit address that didn't mean anything in those days on serial links. So the world of junk header fields didn't start with VXLAN encapsulating Ethernet frames in IP packets. We had junk header fields in 1980s. There was this other standard that rarely got used because it was so awkward, but from the addressing perspective, they got it right. This was so-called serial line IP, and it was an extremely simple mechanism, how to send IP packets over asynchronous serial links. Remember that on asynchronous serial links, you can send one 8-byte character at a time. And what they did was they modified TCP IP datagram by appending an end byte, and this would be decimal value 192 to the end. Then, of course, you would collect characters until you got the end byte, and then you would say, well, by now I should have collected an IP datagram. Let's look at it. Things just work because, you know, on a point-to-point serial line, you really don't need layer 2 addressing. The problem with serial line IP or SLIP was that you could only transport IP because there was really no usable data link layer. Characters were encoded on layer 1, on the physical layer. The modem provided character data string. There was no data link layer, so you could only transport one network layer protocol on top of that, which was perfectly good for people dialing into access servers to access the internet, but useless for any enterprise communications because we usually had more than one protocol. Also, they solved another interesting problem, namely, what happens if you have 192 value in the IP header or anywhere in the IP datagram? Because that could mean end of the datagram. Well, in that case, they would send the escape character and then the original character. So instead of 192, they would send 219, 192 or 219, 220. And then, of course, there's a problem. What if there is 219 in the data stream? And in that case, they would send 219, 221. So you see, with very simple tricks, they got to the point where they could send IP datagrams over point-to-point links without any data link layer addressing because honestly, there was no data link layer. Quite similar is packet over SONET, where the SONET infrastructure provides bitstream and then you just put IP datagrams in that bitstream.