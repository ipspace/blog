---
title: "IPv4 forever?"
date: "2008-04-17T07:08:00.001+02:00"
tags: [ IPv6,OSPF ]
---

One of the obscure facts of IPv6 OSPF (OSPFv3) is that it uses a 32-bit router ID like OSPFv2. It's a reasonable choice, I haven't seen an OSPF network with more than a billion routers yet. However, could you guess how this requirement is implemented in Cisco IOS? <a href="http://blog.ioshints.info/2007/10/ospf-router-id-does-not-change-when.html">OSPFv3 searches for an IPv4 address</a> (effectively the same algorithm used by OSPFv2) to get the router ID for the IPv6 routing process. Neat, isn't it?<br /><br />You might wonder what happens if you want to configure an IPv6-only router. OSPF won't start unless you configure the router ID manually. And, no, you cannot enter a number (which would be the expected format, as the router ID is just a number in the IPv6 world), you have to enter an IPv4 address. Long live IPv4 :))<script>startHide()</script>Here is a sample printout from a router. First, let's check the interface status:<pre class='code'>Site-D(config)#<strong>do show ip interface brief</strong><br />Interface           IP-Address      OK? Method Status    Protocol<br />FastEthernet0/0     unassigned      YES manual up        up      <br />FastEthernet0/1     unassigned      YES manual up        up      <br />Loopback0           unassigned      YES manual up        up</pre>No IPv4 running anywhere. Good. Let's continue and configure IPv6:<pre class='code'>Site-D(config)#<strong>ipv6 unicast</strong><br />Site-D(config)#<strong>ipv6 router ospf 1</strong><br />Site-D(config-rtr)#<br />*Mar  1 01:18:46.423: %OSPFv3-4-NORTRID: OSPFv3 process 1 could not pick a router-id,<br />please configure manually</pre>Oops, IPv6 OSPF won't start if the router doesn't have an IPv4 address. Let's configure the router ID:<pre class='code'>Site-D(config-rtr)#<strong>router-id ?</strong><br /><span class='high'>  A.B.C.D  OSPF router-id in IP address format</span><br /><br />Site-D(config-rtr)#router-id 10.0.1.8<br />Site-D(config-rtr)#</pre><script>endHide()</script><p class='info'>If you're a Cisco partner, you can run the <a href="http://cisco.partnerelearning.com/pec/Direct.asp?URL=2021135259965.1626">Configuring OSPFv3</a> remote lab exercise <a href="http://blog.ioshints.info/2008/02/ipv6-remote-labs-on-partner-education.html">free-of-charge from Partner Education Connection</a>. Everyone else can get the same exercise as part of the <a href="http://www.nil.com/C1256F620032CACB/NILLookup/lb_rl_ip6fd20?Open&amp;dm=&amp;s=0&amp;rid=C1256F0A00429755">IPv6 remote lab bundle</a> from our learning store, where you can also buy the <a href="http://www.nil.com/C1256F620032CACB/NILLookup/bs_ip6fd20?Open&dm=&s=0&rid=C1256F0A00429755">IPv6 Fundamentals, Design and Deployment (IP6FD) e-course</a>.</p>

