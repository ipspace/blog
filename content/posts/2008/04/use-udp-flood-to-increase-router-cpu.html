---
url: /2008/04/use-udp-flood-to-increase-router-cpu.html
title: "Use UDP flood to increase router's CPU load"
date: "2008-04-03T06:34:00.001+02:00"
tags: [ network management,ERM ]
---

If you want to test the <a href="http://blog.ioshints.info/2008/03/detect-routers-operating-in-process.html">ERM policies</a> in a controlled environment, it's almost mandatory to have tools that allow you to overload the router. One of these tools is the <a href="http://blog.ioshints.info/2008/03/udp-flood-in-perl.html">UDP flood</a>: if you flood a router's IP address, you're guaranteed to raise the CPU to 100%, with majority of the <em>process</em> CPU being used by the <em>IP Input</em> process (the <em>interrupt</em> CPU load will also be significant).<p class="important">This phenomenon illustrates very clearly why it's so important to have inbound access lists protecting the router's own IP addresses on all edge interfaces.</p>
<p>If you want to stress-test the router's forwarding functionality, you could use the host route to the <strong>null0</strong> interface; all packets sent to that IP address will be CEF-switched, so the only impact of the UDP flood to the unreachable IP address will be the increased <em>interrupt</em> CPU load. I was able to increase the interrupt CPU load to close to 50% on a 2800 router using a virtual PC with a Fast Ethernet interface.</p>
<p>And just in case you need it, here is the configuration from my test router. All packets sent to 10.0.0.22 are CEF-switched and dropped (the CPU load from the <em>IP input</em> process is negligible).</p>
<pre class="code">interface FastEthernet 0/0<br/> ip address 10.0.0.1 255.255.255.0<br/>!<br/>ip route 10.0.0.22 255.255.255.255 null 0</pre>

