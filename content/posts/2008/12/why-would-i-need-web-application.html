---
date: 2008-12-19T07:06:00.000+01:00
tags:
- firewall
title: Why would I need a Web Application Firewall?
url: /2008/12/why-would-i-need-web-application/
---

<p style="text-align: left">If you have been visited by a friendly Cisco sales engineer recently, you might have already heard about the <strong>ACE Web Application Firewall (WAF)</strong>. If you’re curious enough to start investigating on your own, you might have stumbled across the <a href="http://www.cisco.com/en/US/products/ps9586/index.html">WAF product description on Cisco’s Web site</a>, which tells you … nothing.</p>
<p style="text-align: left">Let’s start with an easy question: <strong>if I already have a firewall, why would I need another box with “fire” and “wall” in its name?</strong> The short answer is “Because Web programmers rarely know how to write secure Web applications.”<!--more--></p>
<p style="text-align: left">The long answer is somewhat more complex. Everyone is talking about “SQL injection” and “cross-site scripting” today (even if they don’t have a clue what they’re talking about), but these attacks were not widely known a few years ago. If you have a Web application that was developed more than a few months ago by an average team of programmers, chances are that <strong>at least some of the modules are vulnerable to HTML-based attacks</strong>. It’s easier to install a dedicated filter in front of your application than to dig into hundreds of thousands of lines of scripting code, trying to identify all vulnerable code segments. To make your job easier, WAF contains predefined signatures for most common attacks (the famous <a href="http://www.owasp.org/index.php/Top_10_2007">Top 10 attacks of 2007</a>).</p>
<p style="text-align: left">The next question should also be obvious: <strong>why can’t my existing firewall or intrusion detection system (IDS) handle these functions?</strong> Of course it could (in theory), but the attacks we’re trying to catch can be highly obfuscated. For example, a typical SQL injection attack inserts an SQL statement into a parameter of a Web (HTTP) transaction. The parameter can be passed in the query string part of the Web address (URL) or in the body of the request, where it could be escaped in several different ways to make it unrecognizable by a simple signature match. (If you want to know how many steps are needed to get an application-level value of a parameter, read the <a href="http://www.cisco.com/en/US/docs/app_ntwk_services/data_center_app_services/ace_waf/v60/user/guide/waf_ug_extendingrulessigs.html#wp1117620"><em>message normalization</em> section</a> of the <a href="http://www.cisco.com/en/US/docs/app_ntwk_services/data_center_app_services/ace_waf/v60/user/guide/acewafug.html">WAF user’s guide</a>.) These operations cannot be performed at the same speed as simpler TCP/UDP-based filters or simple IDS signature matches. <strong>If you implemented application-level functionality in an ASA firewall or IDS, its performance would drop significantly</strong> … and all of us would immediately start complaining.</p>
<p style="text-align: left">And here is the third question you should ask before starting to dig into the WAF documentation: <strong>why would I need both a dedicated firewall (ASA or FWSM) and a WAF?</strong> Well, if you believe that you can make a fast and reliable firewall out of a Red Hat Linux system (the WAF platform), be my guest and use only WAF … but then I wonder why you had a firewall in front of your servers in the first place. <strong>You need a dedicated firewall to perform high-speed low-level inspections, catching various attacks on network and transport layers</strong>. After the firewall does its job (letting only the “clean” content through), the WAF inspects the incoming data on the application level and rejects attacks that are too complex for the ASA/FWSM.</p>

