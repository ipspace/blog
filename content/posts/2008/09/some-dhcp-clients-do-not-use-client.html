---
url: /2008/09/some-dhcp-clients-do-not-use-client/
title: "Some DHCP clients do not use Client identifier option"
date: "2008-09-03T07:07:00.000+02:00"
tags: [ DHCP ]
---

A while ago I've documented how you can <a href="/2008/06/static-dhcp-assignment-for-clients/">cope with DHCP clients that do not send <i>Client identifier</i></a> (DHCP option 61) in their DHCP Discover/Request messages, but some people are still trying to persuade me that the <b>client-identifier </b>pool configuration command should work. I really wanted to be sure I hadn't missed something, so I started Wireshark and captured the actual DHCP Discover packet generated by a Linux host:<br/><div class="separator" style="clear: both; text-align: center;"><a href="/2008/09/DHCP_No_ClientID.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="/2008/09/DHCP_No_ClientID.png"/></a> </div>
<div class="separator" style="clear: both; text-align: left;">As you can see, the DHCP packet does <i>not </i>contain the <i>Client identifier</i> option, so the DHCP server (the router) has nothing to compare the value of the <b>client-identifier </b>parameter with. The only parameter the DHCP server can use is the <i>Client MAC address</i> field in the DHCP Discover message, which is matched with the <b>mac-address </b>pool configuration command.</div>
<div class="separator" style="clear: both; text-align: left;"></div>
<div class="separator" style="clear: both; text-align: left;">In contrast to the default Linux behavior, DHCP Discover messages generated by other platforms (for example, Windows or a Cisco router) include the <i>Client identifier</i> option:</div>
<div class="separator" style="clear: both; text-align: center;"> <a href="/2008/09/DHCP_Client.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="/2008/09/DHCP_Client.png"/></a></div>

