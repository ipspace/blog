---
url: /2008/06/another-way-to-generate-snmp-trap-on.html
title: "Another way to generate SNMP trap on high CPU load"
date: "2008-06-03T07:02:00.001+02:00"
tags: [ network management ]
---

Yesterday ago I've described how you can <a href="https://blog.ipspace.net/2008/06/generate-snmp-trap-on-high-cpu-load.html">use the ERM functionality together with an EEM applet to generate SNMP traps whenever the CPU load exceeds predefined thresholds</a>. When testing this solution, I started to wonder what the <strong>snmp-server enable traps cpu threshold</strong> command does. After lenghty conversation with uncle Google and Cisco documentation, I found that there's another way to detect and report high CPU load in Cisco IOS: the <a href="http://www.cisco.com/en/US/docs/ios/netmgmt/configuration/guide/nm_cpu_thresh_notif_ps6441_TSD_Products_Configuration_Guide_Chapter.html">CPU threshold notification</a> introduced in IOS release 12.3T (and <a href="http://www.blogger.com/profile/04512662084752743003">Tassos</a> <a href="https://blog.ipspace.net/2008/06/generate-snmp-trap-on-high-cpu-load.html?showComment=1212387900000#c7388782097655963321">pointed that out</a> before I had the time to write a post about it :).<!--more-->To use this feature, you have to configure the thresholds with the <strong>process cpu threshold</strong> configuration command and enable related SNMP traps with the <strong>snmp-server enable traps cpu threshold</strong>. For example, to send SNMP traps whenever the total CPU load measured over a 30-second interval exceeds 40%, use the following configuration:<pre class="code">snmp-server enable traps cpu threshold<br/>process cpu threshold type total rising 40 interval 30<br/></pre>

