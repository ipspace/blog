---
url: /2008/06/change-source-ip-address-of-eem-smtp.html
title: "Change the source IP address of an EEM SMTP session"
date: "2008-06-16T06:49:00.001+02:00"
tags: [ Tcl,EEM ]
---

I've got the following question from Levi: <blockquote class="cite">I have a Tcl script that is used in conjunction with EEM to send email whenever the amount of CRC errors on a particular interface increases above a certain threshold. My problem is that the router uses the IP of the outgoing interface as the source IP when it communicates with the SMTP server. This particular interface happens to have a private IP. There's another interface with a public IP and I wanted to know how to get the router to use the public IP on the other interface when it's sending email generated by the TCL script.</blockquote>
There are several ways to solve this problem. If you use Tcl, you could write your own SMTP client and use the <strong>-myaddr</strong> parameter in the <strong>socket</strong> call to specify the source IP address. Those of us who prefer EEM applets are not so lucky, you have to <a href="http://wiki.nil.com/Set_the_source_IP_address_of_EEM_SMTP_session">use NAT to change the source IP address before the packet is sent toward the SMTP server</a>. <p class="more">This article is part of <a href="https://blog.ipspace.net/2007/01/youve-asked-for-it-series.html">You've asked for it</a> <a href="https://blog.ipspace.net/search/label/You%27ve%20asked%20for%20it">series</a>.</p>

