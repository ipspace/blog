---
url: /2008/06/cef-and-mls.html
title: "CEF and MLS"
date: "2008-06-04T06:53:00.001+02:00"
tags: [ switching,LAN ]
---

<p>Harold Arley Morales has asked an interesting question:</p>
<blockquote class="cite">What's the difference between Cisco Express Forwarding and Cisco MLS? Is Cisco's implementation of MLS standardized?</blockquote>
<p>CEF is a routing table lookup mechanism. Instead of doing a lookup in the main IP routing table (displayed with the <b>show ip route</b>), the router does a lookup in a fully computed non-recursive version of the IP routing table (<em>Forwarding Information Base - FIB</em>) with layer-2 next-hop information attached to it (adjacency table).<br/><br/>MLS is a caching mechanism (similar to Netflow) that offloads layer-3 processing from the routing component into layer-2 ASICs that cannot perform full-blown layer-3 switching. When the layer-2 engine detects a single IP packet traversing multiple VLANs, the MLS populates the cache with the flow details and the subsequent packets belonging to the same flow (same source/destination IP addresses and port numbers ...) are switched without going through all the layer-3 mechanisms (for example, access lists). The <a href="http://www.cisco.com/en/US/docs/ios/12_0/switch/configuration/guide/xcmls.html">Multilayer Switching Overview</a> document gives you additional details.<br/><br/>The MLS uses a proprietary protocol (MLSP) through which the layer-2 switches identify routers.<p class="more">This article is part of <a href="https://blog.ipspace.net/2007/01/youve-asked-for-it-series.html">You've asked for it</a> <a href="https://blog.ipspace.net/tag/youve-asked-for-it.html">series</a>.</p>
<p><ins>Update 2008-12-08:</ins> Ofer Granit sent me the following information: according to <a href="http://www.cisco.com/en/US/products/hw/switches/ps700/products_tech_note09186a00800f99bc.shtml">Troubleshooting IP Multilayer Switching</a> document, Supervisor Engine 2 and Supervisor Engine 720 no longer use MLS but rely exclusively on CEF to perform layer-3 forwarding.</p>
</p>

