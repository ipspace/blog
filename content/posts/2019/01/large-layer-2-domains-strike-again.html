---
url: /2019/01/large-layer-2-domains-strike-again.html
title: "Large Layer-2 Domains Strike Again…"
date: "2019-01-07T08:31:00.000+01:00"
tags: [ bridging, network management, high availability ]
---

<p>I started January 2018 blogging with a <a href="https://blog.ipspace.net/2018/01/fat-fingers-strike-again.html">major service provider failure</a>. Why should 2019 be any different? Here’s what <a href="https://twitter.com/briankrebs/status/1079135599309791235">Century Link claimed was causing two-day outage</a> (<a href="https://twitter.com/GossiTheDog/status/1079144491238469638">more comments here</a>).</p>
<p>Supposedly it was a <a href="https://twitter.com/stubarea51/status/1079423228437823488">problem with the management network used by their optical gear</a>, but it looks a lot like a <a href="https://twitter.com/cmsirbu/status/1079173861940387840">layer-2 network spanning 15 data centers</a> and no control-plane policing on the managed devices… proving yet again that large-scale layer-2 networks are a really bad idea.<!--more--></p>
<p>Please note that it doesn’t matter whether they had problems with a stretched Ethernet segment or something else. According to their explanation a single device broadcasting packets was able to affect devices across multiple locations – as I’m trying to explain for years (not that many people would listen and/or care), a <a href="https://blog.ipspace.net/2012/05/layer-2-network-is-single-failure.html">single broadcast domain is a single failure domain</a> no matter what $vendor PowerPoints or whitepapers claim, and it’s not a question of <em>whether </em>the concoction will fail but <em>when</em>. Keep that in mind the next time your $vendor rep brings dancing unicorns into the room.</p>
<p class="info">On a tangential note, cloud providers that know what they’re doing don’t support anything else but unicast routing for a really good reason – check out the details in <a href="https://www.ipspace.net/Amazon_Web_Services_Networking">AWS Networking</a> webinar.</p>
<p>Finally, just in case you think failures like this one are a black swan event, check the <a href="https://github.com/danluu/post-mortems">list of post-mortems</a> and <a href="http://danluu.com/postmortem-lessons/">associated lessons learned</a> collected by <a href="https://danluu.com/about/">Dan Luu</a>… keeping in mind that most of the failures are never reported.</p>

