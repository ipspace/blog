---
title: "Text Files or Relational Database?"
date: "2019-04-23T08:28:00.000+02:00"
tags: [ Automation,Ansible ]
---

<p><em>This blog post was initially sent to subscribers of my SDN and Network Automation mailing list. </em><a href="http://www.ipspace.net/Subscribe/Five_SDN_Tips"><em>Subscribe here</em></a><em>.</em></p>
<p>One of the common questions I get once the networking engineers progress from Ansible 101 to large-scale deployments (example: generating configurations for 1000 devices) is “Can Ansible use a relational database? Text files don’t scale…”</p>
<p><strong>TL&amp;DR</strong><strong> answer</strong>: Not directly, but there are tons of database Ansible plugins or custom Jinja2 filters out there.<!--more--></p>
<h4>A quick detour</h4><p>Before going into Ansible and relational databases, let me point out that Microsoft managed to put the <a href="https://blogs.msdn.microsoft.com/bharry/2017/05/24/the-largest-git-repo-on-the-planet/">whole Windows codebase into a single Git repository</a> (admittedly after writing a <a href="https://github.com/Microsoft/GVFS">Git-specific layer on top of the file system</a>), so I would consider scalability of text files a solved problem. They might not be the best tool for the job, but that’s a different story.</p>
<h4>Ansible and relational databases</h4><p>While there’s no relational database support built into Ansible, you can always <a href="https://my.ipspace.net/bin/list?id=AnsibleOC#EXTEND">extend it in multiple directions</a>. You could use dynamic inventory scripts or Python modules to solve the particular problem of storing Ansible inventory or host variables in a relational database, and there are plenty of them lying around GitHub, for example <a href="https://github.com/avinash6784/ansible-dynamic-inventory-mysql">dynamic Ansible inventory for MySQL</a>. </p>
<p>However, before rushing out and writing a Python module or adapting the above-mentioned dynamic inventory script, you have to ask yourself:</p>
<ul class="ListParagraph"><li>What problem am I trying to solve?</li>
<li>What is the best tool for the job?</li>
</ul>
<p class="info">The following section is a very quick summary of the <a href="https://my.ipspace.net/bin/list?id=NetAutSol&amp;module=3#M3S1">Data Models and Data Stores</a> section from the <a href="https://www.ipspace.net/Building_Network_Automation_Solutions">Building Network Automation Solutions</a> online course. <a href="https://www.ipspace.net/Building_Network_Automation_Solutions#register">Register here</a>.</p>
<h4>Text files or relational databases?</h4><p>Regardless of what technology you use for the data store, your solution has to provide this functionality:</p>
<ul class="ListParagraph"><li>Create/Read/Update/Delete (CRUD) functionality</li>
<li>Reasonably easy-to-use user interface that provides search, adds, updates and deletes.</li>
<li>Data validation and referential integrity (either built-in or through data validation)</li>
<li>Change logging and audits (optional)</li>
<li>Transactional consistency (optional)</li>
</ul>
<p>Text files (using text editor + Git) provide all of the above apart from transactional consistency and data validation. Data validation including referential integrity checks is relatively easy to implement with either commit scripts or CI pipeline.</p>
<p>Relational databases provide CRUD functionality, data validation and referential integrity. If you want to have a user interface, change logging, reviews, or audit, you have to add a front-end application (often custom-written). </p>
<p>If you already have a service provisioning system with relational database back-end and good UI, go for it. If you’d have to write it from scratch, text files might be good enough for the first few days.</p>
<p>Is there a middle ground? Sure. You might want to check out IPAM/CMDB platforms like NSoT and NetBox… and speaking of NetBox, <a href="https://www.ipspace.net/Author:Jeremy_Stretch">Jeremy Stretch</a> talked about it during his <a href="https://automation.ipspace.net/Public:Speakers#Changing_Network_Configurations_or_State">guest speaker presentation</a> in the <a href="https://www.ipspace.net/Building_Network_Automation_Solutions">Building Network Automation Solutions</a> online course.</p>

