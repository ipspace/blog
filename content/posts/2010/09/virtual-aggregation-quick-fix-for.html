---
url: /2010/09/virtual-aggregation-quick-fix-for.html
title: "Virtual aggregation: a quick fix for FIB/TCAM overflow"
date: "2010-09-03T06:53:00.001+02:00"
tags: [ switching,IP routing ]
---

<strong>Quick summary for the <a href="https://blog.ipspace.net/2010/03/qppb-in-mpls-vpn.html#comments">differently-attentive</a></strong>: virtual aggregation solves TCAM overflow problems (<a href="http://searchtelecom.techtarget.com/tip/0,289483,sid103_gci1517081,00.html">high-level description of how it works</a>). <p>During the <a href="http://packetpushers.net/show-16-big-hot-heavy-part-1/">Big Hot and Heavy Switches podcast</a>, <a href="http://blog.olorin.co.uk/">Dan Hughes</a> complained that the Nexus 7000 switch cannot take the full BGP table. The reason is simple: it’s TCAM (FIB) has only 56.000 entries and the <a href="http://bgp.potaroo.net/">BGP table has almost 350.000 routes</a>. </p>
<p>Nexus 7000 is a Data Center switch, so the TCAM size is not really a limitation (it would  usually have a default route toward the WAN core), but the same problem is experienced by Service Providers all over the world – the TCAM/FIB size of their high-speed routers is limited.</p>
<!--more--><p>It’s usually easy (and comparatively cheap) to upgrade router’s main memory which holds the BGP table and the IP routing table. Upgrading SRAM or TCAM that holds the FIB is either expensive or mission-impossible (<a href="https://blog.ipspace.net/2010/09/ribs-and-fibs.html">the difference between IP routing table (RIB) and IP forwarding table (FIB) is explained in my RIB/FIB blog post</a>), resulting in premature forced retirement of the high-speed gear. </p>
<p>Faced with this problem, <a href="http://www.cs.cornell.edu/people/francis/va-wp.pdf">some very smart researchers proposed virtual aggregation</a> (and named it <em>ViAggre</em>), a technique that allows you to reduce FIB/TCAM requirements while still having the full BGP table in your router. For an <a href="http://searchtelecom.techtarget.com/tip/0,289483,sid103_gci1517081,00.html">overview of virtual aggregation, read my SearchTelecom article</a>, for more details, <a href="http://conferences.sigcomm.org/hotnets/2008/papers/19.pdf">read their paper</a>.</p>

