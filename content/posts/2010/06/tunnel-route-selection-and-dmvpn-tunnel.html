---
date: 2010-06-23T06:57:00.000+02:00
tags:
- DMVPN
- VPN
- workshop
title: Tunnel Route Selection and DMVPN Tunnel Protection don’t work together
url: /2010/06/tunnel-route-selection-and-dmvpn-tunnel.html
---

<p>Cisco has introduced <em>Tunnel Route Selection</em>, another “somewhat” underdocumented feature in IOS release 12.4(11)T (reading the sparse documentation, it appears to be a half-baked kludge implemented for a specific customer). I was wondering for a long time why I would ever want to use this feature, until Floris Martens asked me a question about a redundant DMVPN network using two ISPs ... and all of a sudden it all made a perfect sense.</p>
<!--more--><p>Building redundant DMVPN networks with multiple ISPs is a pretty common scenario, so I’ve included it in the <a href="http://www.ipspace.net/DMVPN:_From_Basics_to_Scalable_Networks"><em>DMVPN – From Basics To Scalable Networks</em></a>. However, when I tried to build a test lab, I could not get <strong>tunnel route-via </strong>to work in a protected DMVPN network. After a few hours, I had to conclude there’s no way to make <strong>tunnel route-via </strong>work with <strong>tunnel protection</strong> (you could probably make it work in combination with crypto maps in Phase I DMVPN configuration, but I definitely didn’t want to go down that route).</p>
<p class="note">BTW, that’s one of the significant differences between my webinars and some other trainings or presentations you can attend ... my solutions or configurations are tested and work on actual devices, not only in PowerPoint.</p>
<p>To add insult to injury, somehow Cisco’s programmers managed to lose the “tunnel route-via feature is on” part of the <strong>show interface </strong>printout when merging various IOS trains to produce 15.0(1)M. The feature works in 15.0(1)M, but there’s no way to check with a <strong>show </strong>printout whether it’s enabled or not.</p>

