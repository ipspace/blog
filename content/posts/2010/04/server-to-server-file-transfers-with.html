---
url: /2010/04/server-to-server-file-transfers-with.html
title: "Server-to-server file transfers with FTP"
date: "2010-04-12T06:59:00.000+02:00"
tags: [ FTP ]
---

<p>Did you know that you could do server-to-server file transfers with FTP? I didn’t; this little gem (usually known as FXP – <a href="http://en.wikipedia.org/wiki/File_eXchange_Protocol">File eXchange Protocol</a>) was described by <em>davro </em>and <em>g </em>in comments to the <a href="/2010/03/ftp-butterfly-effect.html"><em>FTP Butterfly Effect</em></a> post.</p>
<p class="note">If you’re using FXP, please write a comment; although I am well aware why it was extremely useful 25 years ago, I’m wondering how many people are actually using it today.</p>
<!--more--><p>It’s easy to start server-to-server transfers; all the commands you need are available in standard FTP servers. Sending the PASV command to one server and the PORT command to another one establishes a server-to-server data session (see <a href="http://tools.ietf.org/html/rfc959">Section 5.2 of RFC 959</a> for details). The file is then transferred directly between the servers without the involvement of the client host, significantly reducing the client’s bandwidth requirements.</p>
<p class="warn">The PORT command pointing to a third-party IP address can be misused to <a href="http://en.wikipedia.org/wiki/FTP_bounce_attack">probe otherwise unreachable servers</a> (<em>FTP bounce </em>attack). Most FTP servers are thus unwilling to open TCP sessions to an IP address different from the source IP address of the control session.</p>
<p>FXP requires somewhat modified FTP client (it has to open simultaneous control sessions to two servers). It’s supported by the <a href="http://tutorials.papamike.ca/pub/lftp.html"><strong>lftp</strong> client</a> available on most linux distributions; if you use Windows, you can use <a href="http://www.flashfxp.com/">FlashFXP</a>. </p>

