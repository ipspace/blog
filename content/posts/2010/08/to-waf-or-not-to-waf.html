---
date: 2010-08-09T07:23:00.003+02:00
tags:
- firewall
- security
- web
title: To WAF or not to WAF?
url: /2010/08/to-waf-or-not-to-waf.html
---

<p>Extremely valid comment made by Pavel Skovajsa in response to my “<a href="https://blog.ipspace.net/2010/08/rest-in-peace-my-waf-friend.html"><em>Rest in peace, my WAF friend</em></a>” post beautifully illustrates the compartmentalized state some IT organizations face; before going there, let’s start with the basic questions.</p>
<p><strong>Do we need WAF</strong> ... <a href="http://jeremiahgrossman.blogspot.com/2009/04/disagree-with-concept-or-implementation.html">as a function, not as a box or a specific product</a>? It’s the same question as “do we need virus scanners” or “do we need firewalls” in a different disguise. In an ideal world where all the developers would be security-conscious and there would be no bugs, the answer is “NO”. As we all know, we’re in a different dimension and getting further away from the heavens every time someone utters “just good enough” phrase or any other such <a href="http://www.bullshitbingo.net/cards/bullshit/">bingo-winning slogan</a>.</p>
<p>It’s popular to bash IT vendors’ lack of security awareness (Microsoft comes to mind immediately), but they’re still far ahead of a typical web application developer. At least they get huge exposure, which forces them to implement security frameworks. </p>
<!--more--><p>The exposure a typical web application gets is low (unless you’re working for Google, Facebook, Twitter, Amazon or a few others) and the vulnerabilities are thus hidden until someone takes advantage of them. Not surprisingly, hacking accounts for more than 90% of stolen data records in 2009 and within that category, SQL injection is responsible for almost 90% of the stolen goods (source: Verizon’s <a href="http://www.verizonbusiness.com/resources/reports/rp_2010-DBIR-combined-reports_en_xg.pdf">2010 Data Breach Investigation Report</a>). <a href="http://jeremiahgrossman.blogspot.com/2007/02/we-need-web-application-firewalls-to.html">All this has been known years ago</a>, but still most web sites don’t use a WAF. The situation is similar to the behavior of early Internet adopters around the time the <a href="http://www.wilyhacker.com/1e/">Firewalls and Internet Security</a> book was published, but with infinitely more money at stake.</p>
<p><strong>Web server module or standalone solution?</strong><strong> </strong>When you mention standalone WAF to the web community, the typical response is “we don’t need it; there’s <a href="http://www.modsecurity.org/projects/modsecurity/apache/">mod_security</a> for Apache”. They might be partially correct: if you write your application in an <a href="http://www.php.net/">open-source language</a> running within an <a href="http://httpd.apache.org/">open-source web server</a> on an <a href="http://www.linux.org/">open-source operating system</a> it makes sense to use yet another open-source firewall product ... just make sure you <a href="http://bugs.php.net/bug.php?id=50696">understand the support model</a>. The good-enough open-source solutions also explain (at least partially) Cisco’s failure in this market segment. However, the choice of the product (and its licensing methodology) should have no impact on the <em>embedded or standalone</em><em> </em>question. </p>
<p>There are tons of good reasons favoring standalone solution and only a single one favoring the embedded module (it’s cheaper). In the world of virtual servers and virtual appliances deploying another virtual machine carries little incremental cost, so even the cost argument is gone.</p>
<p>And now let’s get to the behavior problems described in Pavel’s comment.</p>
<p><strong>Application folks usually get to choose stuff protecting their application.</strong><strong> </strong>True, but completely wrong. It’s the same idea as server people choosing the firewall to protect them. BTW, don’t even try to launch the “if they knew something about security, we wouldn’t need a WAF” argument; it will not make you popular.</p>
<p>WAF security should be a Data Center-wide function like firewalls and load balancers and whoever is made responsible for it should choose the best solution for the job, not the one the application people are most familiar with.</p>
<p>Last but not least, there’s always the “checks and balances” question.</p>
<p><strong>Application people usually choose server-based protection.</strong><strong> </strong>Of course they do, as they already have the web server up and running (see above). One should also consider that they’ll usually deploy tons of web servers for isolation, scalability and redundancy reasons ... and some web servers (or Web UI interfaces embedded in other software products) might not even have a WAF module. </p>
<p>Now step back a bit and look at the bigger picture: is it easier to manage, configure, patch and upgrade tens of modules on individual web servers (with different users having administrative rights) or a single centralized device?</p>
<p><strong>Putting L7 devices managed by network guys in front of public facing servers is a bad idea due to the "</strong><strong><em>it's not our fault</em></strong><strong>" tendency.</strong><strong> </strong>If this applies to your IT organization, it might be time to polish your resume and consider looking around. If your managers don’t understand <a href="http://chucksblog.emc.com/chucks_blog/2010/04/the-10-big-ideas-that-are-shaping-it-infrastructure-today.html">where the industry is going</a>, and what they should do to adapt, your users will eventually give up, try to bypass you and move to public cloud services. <a href="http://chucksblog.emc.com/service_provider_insider/2010/06/why-public-clouds-will-never-appeal-to-enterprises.html">Definitely a bad idea</a>, but it will happen eventually.</p>
<p>BTW, second part of <a href="http://chucksblog.emc.com/chucks_blog/2009/06/the-future-is-here.html"><em>The Future is Here</em> post by Chuck Hollis</a> has some useful ideas; I know I’ve read something even better, but (as usual) can’t find it when needed.</p>

