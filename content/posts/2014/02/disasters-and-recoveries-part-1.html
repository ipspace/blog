---
date: 2014-02-03T06:53:00.000+01:00
tags:
- data center
- high availability
title: Disasters and Recoveries, Part 1
url: /2014/02/disasters-and-recoveries-part-1.html
---

<p>You probably know the three steps to a disaster recovery plan: Disaster. Recovery. Plan. It’s amazing how true that joke is, and how unprepared we tend to be for infrequent outages.<!--more--></p>
<h4>The Outage</h4><p>After heavy snows on Thursday we got a hefty dose of sleet on Friday. The trees almost immediately got a wonderful ice coating … and we lost electricity a few hours afterwards.</p>
<div class="separator"><img border="0" src="/2014/02/s320-IceAge.png"/><br/>Photo taken by Armin Agič (thanks for sharing!)</div>
<p class="lesson">Things that look great might actually do more harm than good. Technologies that <a href="http://blog.ipspace.net/2011/09/long-distance-irf-fabric-works-best-in.html">look great in PowerPoint</a> might bring down your network.</p>
<style>.post .lesson {    background-position: 0px 6px;   background-repeat: no-repeat;   padding: 8px 1em 8px 58px;   margin: 0.8em 0;   line-height: 1.8em;   min-height: 40px;   height: auto !important;   height: 40px; background-image: url(data:image/png;base64,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); } </style><h4>Recovery ... the first steps</h4><p>We live in a small village in Slovenian hills. Heavy snows are not unusual, and we were warned that prolonged power outages aren’t exactly impossible, so I implemented all sorts of redundancy measures.</p>
<div class="separator"><img src="http://www.zaplana.net/Zaplana/winter2001/Dcp00231.jpg"/><br/>A typical winter day ... when the weather is cooperating</div>
<p>Being in the middle of a winter storm, I was most worried about us staying warm. Time to fire up our ceramic wood oven. Half an hour later the fire was happily burning.</p>
<div class="separator"><img src="http://www.peci-keramika.si/media/img/desno/peci/krusna-pec.jpg"/><br/>Just in case you don't know what I'm talking about - you can <a href="http://www.peci-keramika.si/si/peci/krusne/">buy them here</a>.</div>
<p class="lesson">Simple technologies work best. Find the simplest possible technology that will <a href="http://blog.ipspace.net/2013/01/long-distance-vmotion-stretched-ha.html">meet your recovery time objectives</a> and stick with it.</p>
<p class="lesson">Go for easy wins that solve the most pressing problems. Establish connectivity, get the critical services up and running. Take a deep breath, relax, and continue.</p>
<p>However, it takes incredibly long for the warmth to propagate through the layers of bricks and ceramic (hint: 3-4 hours).</p>
<p class="lesson">Recovery isn’t instantaneous. Even if you manage to get a backup data center up and running, it might take hours to recovery all storage volumes, databases, servers … If you need faster recovery, you need a better plan (and no, live VM migration won’t help if you’re dealing with a data center failure).</p>
<p>As the oven was getting warm the seams between the ceramic tiles started leaking smoke (a regular annoyance when you use this type of oven after a while).</p>
<p class="lesson">Recovery procedures that haven’t been used or tested for a long time might have a few glitches. You might discover out-of-date configurations and missing firewall/load balancer rules. There’s a good reason you should start the diesel generators every few weeks.</p>
<h4>Unfortunately that wasn't all</h4><p>We got power after ~6 hours, and our house has better insulation than I expected ;), but I was still bound to get a few more hard lessons. As I'm updating this post, <a href="http://translate.google.com/translate?sl=sl&amp;tl=en&amp;js=n&amp;prev=_t&amp;hl=en&amp;ie=UTF-8&amp;u=http%3A%2F%2Fwww.rtvslo.si%2Fokolje%2Fbrez-elektrike-10-odjemalcev-prosnja-za-pomoc-sosedam-in-eu-ju%2F328872">10% of Slovenia has no power</a> and it might take days before it's restored.</p>
<h4>The true heroes</h4><p>Every emergency has its true heroes - in this case the servicemen from the power distribution companies that have been working days and nights to restore the power, and the firefighters (most of them volunteers) that are still removing all the trees blocking the local roads. Thank you, guys - you're my heroes!</p>
<div class="separator"><img src="http://img.rtvslo.si/_up/upload/2014/02/02/65071679_3.jpg" style="width: 450px"/><br/>Source: <a href="http://www.rtvslo.si/okolje/foto-in-video-za-celotno-slovenijo-razglasen-rdeci-alarm/328872">rtvslo.si</a></div>

