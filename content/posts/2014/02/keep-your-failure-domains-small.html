---
date: 2014-02-11T06:49:00.000+01:00
tags:
- bridging
- data center
title: Keep Your Failure Domains Small
url: /2014/02/keep-your-failure-domains-small.html
---

<p>A week after the <a href="http://blog.ipspace.net/2014/02/disasters-and-recoveries-part-1.html">disastrous sleet</a> that kicked whole regions of Slovenia off power grid the servicemen of the local power distribution company (working literally days and nights) managed to restore electricity to the closest town … but it still might take days or even weeks before everyone gets it. One of the reasons: huge failure domains.<!--more--></p>
<p>The 10 KV power lines that bring electricity to the transformer near my house (luckily I have an underground cable) are hardwired together in a multidrop fashion that would have made SDLC oldtimers either immensely proud or scared to death (because they knew how much havoc a single misbehaving modem could wreak).</p>
<p>For those of you that never experienced the beauties of multidrop SDLC, here’s how the power distribution works around my place:</p>
<div class="separator"><a href="/2014/02/s1600-PowerGrid_Failure_Domain.png" imageanchor="1"><img border="0" src="/2014/02/s400-PowerGrid_Failure_Domain.png"/></a></div>
<p>The crucial problem: there’s no <a href="http://en.wikipedia.org/wiki/Disconnector">disconnector</a> at the junctions, making the whole distribution tree a single failure domain. A single tree branch short-circuiting the wires at the remotest point could cut off hundreds of customers.</p>
<h4>Back to bits and bytes</h4><p>Wondering what this blog post has to do with networking? You do remember that <a href="http://blog.ipspace.net/2012/05/layer-2-network-is-single-failure.html">every bridged network (aka layer-2 network) is also a single failure domain</a>, right? A <a href="http://blog.ipspace.net/2012/04/stp-loops-strike-again.html">forwarding loop</a> might bring down the whole domain (which some people <a href="http://blog.ipspace.net/2011/06/stretched-clusters-almost-as-good-as.html">enthusiastically extend across multiple data centers</a>).</p>
<h4>What can we do?</h4><p>Here are a few things to keep in mind:</p>
<ul class="ListParagraph"><li>Keep your failure domains as small as possible. Terminate bridging as soon as possible;</li>
<li>Insert as much failure isolation as you can. <a href="http://blog.ipspace.net/2011/12/decouple-virtual-networking-from.html">Overlay virtual networks</a> nicely isolate the single failure domain of a layer-2 virtual network from the robust layer-3 transport infrastructure; </li>
<li>Use technologies that reduce the size of a failure domain. <a href="http://blog.ipspace.net/2013/12/hyper-v-network-virtualization-packet.html">Layer-3 hypervisor switching</a> eliminates layer-2 failure domains altogether (other failure domains like single cluster of managements systems are obviously still an issue);</li>
<li>Build a hierarchy of failure domains. Availability zones in your private cloud are the necessary first step.</li>
<li>Analyze the structure of mission-critical applications (covered in more details in the fantastic <a href="http://www.amazon.com/gp/product/0321753887?ie=UTF8&amp;camp=1789&amp;creativeASIN=0321753887&amp;linkCode=xm2&amp;tag=cisioshinandt-20">Scalability Rules</a> book).</li>
</ul>
<h4>More information</h4><p><a href="http://www.ipspace.net/ExpertExpress">ExpertExpress</a> might be a good way to get a second opinion on the robustness of your data center design, and if you’re attending <a href="http://www.interop.com/lasvegas/">Interop Las Vegas</a> in April don’t forget to <a href="http://www.interop.com/lasvegas/schedule-builder/speaker/pepelnjak-ivan.0191389e-da8d-af42-a31c-57df5beb3797">register for my workshops</a>.</p>
<p>You’ll also find more details in these <a href="http://www.ipspace.net/Roadmap/Cloud_computing_webinars">cloud computing</a> webinars.</p>
<ul class="ListParagraph"><li><a href="http://www.ipspace.net/Overlay_Virtual_Networking">Overlay virtual networking</a>;</li>
<li><a href="http://www.ipspace.net/Cloud_Computing_Networking">Cloud computing networking</a>;</li>
<li><a href="http://www.ipspace.net/Designing_a_Private_Cloud">Designing the infrastructure for a private cloud</a>.</li>
</ul>

