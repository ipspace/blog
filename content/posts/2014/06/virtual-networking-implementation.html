---
date: 2014-06-05T07:47:00.000+02:00
tags:
- overlay networks
- virtualization
title: Virtual Networking Implementation Taxonomy
url: /2014/06/virtual-networking-implementation/
---

<p>I’m not sure I wrote about the taxonomy of numerous virtual networking implementations. Just in case, here it is ;)</p>
<h4>Layer-2 or layer-3 networks? </h4><p>Some virtual networking solutions emulate thick coax cable (more precisely, layer-2 switch), giving their users the impression of having regular VLAN-like layer-2 segments.<!--more--></p>
<p><strong>Examples</strong>: traditional VLANs, VXLAN on Nexus 1000v, VXLAN on VMware vCNS, VMware NSX, Nuage Networks Virtual Services Platform, OpenStack Open vSwitch Neutron plugin.</p>
<p>Other solutions perform layer-3 forwarding at the first hop (vNIC-to-vSwitch boundary), implementing a pure layer-3 network.</p>
<p><strong>Examples</strong>: <a href="/2013/12/hyper-v-network-virtualization-packet/">Hyper-V Network Virtualization</a>, Juniper Contrail, Amazon VPC.</p>
<h4>Layer-2 networks with layer-3 forwarding</h4><p>Every layer-2 virtual networking solution allows you to implement layer-3 forwarding on top of <em>pure layer-2 segments</em> with a multi-NIC VM.</p>
<p>Some virtual networking solutions provide <em>centralized built-in layer-3 gateways</em> (routers) that you can use to connect layer-2 segments.</p>
<p><strong>Examples</strong>: inter-VLAN routing,<a href="http://demo.ipspace.net/get/4.2%20-%20Layer-3%20Gateways.mp4"> VMware NSX</a>, OpenStack</p>
<p>Other layer-2 solutions provide <em>distributed routing</em> – the <a href="/2013/05/optimal-l3-forwarding-with-varp-and/">same default gateway IP and MAC address are present in every first-hop switch</a>, resulting in optimal end-to-end traffic flow.</p>
<p><strong>Examples</strong>: Cisco DFA, <a href="/2013/06/arista-eos-virtual-arp-varp-behind/">Arista VARP</a>, <a href="/2011/09/qfabric-part-3-forwarding/">Juniper QFabric</a>, <a href="/2013/11/layer-2-and-layer-3-switching-in-vmware/">VMware NSX</a>, Nuage VSP, Distributed layer-3 forwarding in OpenStack Icehouse release.</p>
<h4>Layer-3 networks and dynamic IP addresses</h4><p>Some layer-3 virtual networking solutions assign <em>static IP addresses</em> to end hosts. The end-to-end layer-3 forwarding is determined by the orchestration system.</p>
<p><strong>Example</strong>: Amazon VPC</p>
<p>Other layer-3 virtual networking solutions allow <em>dynamic IP addresses</em> (example: customer DHCP server) or IP address migration between cluster members.</p>
<p><strong>Examples</strong>: <a href="/2013/08/whats-coming-in-hyper-v-network/">Hyper-V network virtualization in Windows Server 2012 R2</a>, Juniper Contrail</p>
<p>Finally, there are layer-3 solutions that <em>fall back to layer-2 forwarding</em> when they cannot route the packet (example: non-IP protocols).</p>
<p>Example: Juniper Contrail</p>
<h4>A picture is worth a 1000 words</h4><div class="separator"><a href="/2014/06/s1600-VNTaxonomy.png" imageanchor="1"><img border="0" src="/2014/06/s550-VNTaxonomy.png"/></a></div>
<h4>Why does it matter?</h4><p>In a nutshell: the <a href="/2010/07/bridging-and-routing-is-there/">further away from bridging</a> a solution is, the more scalable it is from the architectural perspective (there’s always an odd chance of having clumsy implementation of a great architecture). No wonder Amazon VPC and Hyper-V network virtualization (also used within the Azure cloud) lean so far toward pure layer-3 forwarding.</p>
<h4>Need more?</h4><ul class="ListParagraph"><li>Watch the <a href="http://www.ipspace.net/Following_Packets_across_Overlay_Virtual_Networks">Overlay Virtual Networking</a> webinar (and the <a href="http://www.ipspace.net/Following_Packets_across_Overlay_Virtual_Networks">Following Packets across Overlay Virtual Networks</a> addendum).</li>
<li>Check out <a href="http://www.ipspace.net/Roadmap/Cloud_computing_webinars">cloud computing and networking webinars</a> and <a href="http://www.ipspace.net/Subscription">webinar subscription</a>.</li>
<li>Use <a href="http://www.ipspace.net/ExpertExpress">ExpertExpress service</a> if you need short online consulting session, technology discussion or a design review.</li>
</ul>

