---
url: /2014/08/do-you-really-need-to-see-all-512k.html
title: "Do you really need to see all 512K Internet routes?"
date: "2014-08-18T06:57:00.000+02:00"
tags: [ Internet,BGP ]
---

<p>Last week the global routing table (as seen from some perspectives) <a href="http://www.bgpmon.net/what-caused-todays-internet-hiccup/">supposedly exceeded 512K routes</a>, and weird things started to happen to some people that are using <a href="http://www.cisco.com/c/en/us/products/collateral/switches/catalyst-6500-series-switches/product_data_sheet09186a0080159856.pdf">old platforms</a> that by default support 512K IPv4 routes in the switching hardware.</p>
<p class="warn">I’m still wondering whether the BGP table size was the root cause of the observed outages. Cisco’s documentation (at least <a href="http://www.cisco.com/c/en/us/support/docs/switches/catalyst-6500-series-switches/116132-problem-catalyst6500-00.html">this document</a>) is pretty sloppy when it comes to the fact that usually 1K = 1024, not 1000 – I’d expect the hard limit to be @ 524.288 routes … but then maybe Cisco’s hardware works with decimal arithmetic.<!--more--></p>
<p>In any case, networks relying on boxes that support 512K IPv4 routes in their switching hardware might face interesting problems in a very near future… and the workaround is: <a href="http://www.cisco.com/c/en/us/support/docs/switches/catalyst-6500-series-switches/116132-problem-catalyst6500-00.html">reduce the maximum number of IPv6 routes</a>. Isn’t that just the perfect solution for the days when most of the world already ran out of public IPv4 addresses? On the other hand, the default IPv6 table size on Cat6500 is 256K entries, and the <a href="http://bgp.potaroo.net/v6/as2.0/">current size of global IPv6 routing table is below 20K</a> (HT: <a href="http://www.renesys.com/2014/08/internet-512k-global-routes/">Renesys blog</a>).</p>
<p class="note">The same hard limits usually don’t apply to boxes that perform packet forwarding in software, for example ISR-series routers and probably also ASR1K – but don’t forget that you’ll need more memory as BGP table, RIB and FIB continue to grow.</p>
<p>Regardless of the platform you’re using in your Internet edge, you should ask another question: do I really need the full Internet routing table? Most edge networks don’t, and I <a href="http://www.ipspace.net/BGP_Convergence_Optimization">described several techniques you can use to reduce the BGP table size</a>.</p>
<p>Furthermore, you can use <a href="http://www.cisco.com/c/en/us/td/docs/ios-xml/ios/iproute_bgp/configuration/xe-3s/irg-xe-3s-book/irg-selective-download.html"><em>BGP Selective Route Download</em></a><em> </em>(unfortunately available only on IOS XE) or a similar Junos functionality to reduce the IP RIB and FIB sizes (see also my article on <a href="https://blog.ipspace.net/2010/09/virtual-aggregation-quick-fix-for.html">virtual aggregation</a>).</p>
<h4>Need more help?</h4><p>Some pretty large organizations got fantastic results after one or two <a href="http://www.ipspace.net/ExpertExpress">ExpertExpress sessions</a>. Why wouldn’t you join them?</p>

