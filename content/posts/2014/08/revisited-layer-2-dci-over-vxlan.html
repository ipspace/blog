---
date: 2014-08-19T08:58:00.000+02:00
tags:
- VXLAN
- data center
- WAN
title: 'Revisited: Layer-2 DCI over VXLAN'
url: /2014/08/revisited-layer-2-dci-over-vxlan.html
---

<p>I’m still getting questions about layer-2 data center interconnect; it seems this particular bad idea isn’t going away any time soon. In the face of that sad reality, let’s revisit <a href="https://blog.ipspace.net/2012/11/vxlan-is-not-data-center-interconnect.html">what I wrote about layer-2 DCI over VXLAN</a>.</p>
<p>VXLAN hasn’t changed much since the time I explained why it’s not the right technology for long-distance VLANs.<!--more--></p>
<ul class="ListParagraph"><li>I haven’t seen integration with OTV or LISP that was promised years ago (or maybe I missed something – please write a comment);</li>
<li>VXLAN-to-VLAN gateways are still limited to single gateway (or <a href="https://blog.ipspace.net/2014/04/brocade-shipped-vxlan-vtep-with-nsx.html">MLAG cluster</a>) per VXLAN segment, generating <a href="http://blog.ipspace.net/2011/02/traffic-trombone-what-it-is-and-how-you.html">traffic trombones</a> with <a href="http://blog.ipspace.net/2010/09/long-distance-vmotion-and-traffic.html">long-distance VLANs</a>;</li>
<li>Traffic trombones generated by stateful appliances (inter-subnet firewalls or load balancers) are impossible to solve.</li>
</ul>
<p>Then there’s the obvious problem of <a href="https://blog.ipspace.net/2013/05/data-has-mass-and-gravity.html">data having gravity</a> (or applications being used to being close to data) – if you move a VM away from the data, <a href="http://blog.ipspace.net/2010/10/coping-with-long-distance-vmotion.html">the performance quickly drops way below acceptable levels</a>.</p>
<p>However, if you’re <a href="https://blog.ipspace.net/2013/09/sooner-or-later-someone-will-pay-for.html">forced to implement a stretched VLAN</a> (because the application team cannot possibly deploy their latest gizmo without it, or because the server team claims they need it for disaster recovery … that <a href="http://blog.ipspace.net/2013/01/long-distance-vmotion-stretched-ha.html">has no chance of working</a>) that nobody will ever use, VXLAN is the least horrible technology. After all, you’ve totally <a href="http://blog.ipspace.net/2011/12/decouple-virtual-networking-from.html">decoupled</a> the physical infrastructure from the follies of virtual networking, and even if someone manages to generate a forwarding loop between two VXLAN segments, <a href="http://blog.ipspace.net/2014/03/whose-failure-domain-is-it.html">the network infrastructure won’t be affected</a> assuming you implemented some basic traffic policing rules.</p>

