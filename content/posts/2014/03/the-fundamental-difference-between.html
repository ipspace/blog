---
url: /2014/03/the-fundamental-difference-between.html
title: "The Fundamental Difference between Phase 2 and Phase 3 DMVPN"
date: "2014-03-11T07:43:00.000+01:00"
tags: [ DMVPN ]
---

<p>DMVPN networks still confuse some engineers, particularly the true differences between Phase 2 and Phase 3 DMVPN. Here’s the explanation that worked for an engineer that sent me a question along these lines.<!--more--></p>
<p><a href="https://blog.ipspace.net/2011/01/dmvpn-phase-2-fundamentals.html"><strong>Phase 2 DMVPN</strong></a><strong> forwarding</strong> relies exclusively on IP routing table (RIB). Whatever IP next hop is in the routing table (as computed by the routing protocol) is <a href="http://blog.ipspace.net/2010/09/ribs-and-fibs.html">copied into forwarding table (FIB)</a> and used for packet forwarding. </p>
<p>In <strong>Phase 3 DMVPN</strong>, there's the NHRP redirect cache below the forwarding table. FIB entries are copied from the routing table, but the next hop in the FIB table doesn’t necessarily reflect the actual next hop (which might be overridden by a dynamic NHRP entry). This functionality allows direct spoke-to-spoke traffic even if the only route spokes have is a default route toward the hub router.</p>
<p>In both cases, the next hop router that appears in the FIB table or NHRP cache isn’t used unless there’s an already-established IPsec session with that router. Otherwise, the packet is sent <a href="https://blog.ipspace.net/2013/04/the-impact-of-changed-nhrp-behavior-in.html">toward the <em>best </em>hub router</a> (for whatever value of <em>best</em>).</p>
<h4>Need more details?</h4><p>Check out the webinars in the <a href="http://www.ipspace.net/DMVPN_trilogy">DMVPN trilogy</a>.</p>

