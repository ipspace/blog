---
date: 2014-12-05T06:36:00.000+01:00
tags:
- design
- vMotion
- cloud
title: Hotel California Effects of Public Clouds
url: /2014/12/hotel-california-effects-of-public.html
---

<p>In his <a href="http://www.plexxi.com/2014/11/case-hybrid-clouds/"><em>The Case for Hybrids</em></a><em> </em>blog post Mat Mathews described the Hotel California effect of public clouds as: “<em>One of the most oft mentioned issues with public cloud is the difficulty in getting out.</em>” Once you start relying on cloud provider APIs to provide DNS, load balancing, CDN, content hosting, security groups, and a plethora of other services, it’s impossible to get out.</p>
<p>Interestingly, the side effects of public cloud deployments extend into the realm of application programming, as I was surprised to find out during one of my <a href="http://www.ipspace.net/ExpertExpress">Expert Express engagements</a>.<!--more--></p>
<p>I was talking with an engineer who was tasked with setting up networking infrastructure for a private cloud that would allow his company to migrate the workloads from a too-expensive public cloud into a more cost-controllable private environment.</p>
<p>It looked to be an easy engagement focusing on designing the networking infrastructure for maximum scalability – after all, the programmers deploying cloud applications usually know a bit about scale-out architectures and resiliency – and I got a real shock when encountering the <a href="https://blog.ipspace.net/2013/09/sooner-or-later-someone-will-pay-for.html">stretched subnets</a> needed to support <a href="http://blog.ipspace.net/2013/01/long-distance-vmotion-stretched-ha.html">live long-distance VM mobility</a> in a list of requirements.</p>
<p>It turned out that while the programmers understood everything about application resiliency, the redundant database service offered by AWS lulled them into complacency – they never thought about the database redundancy, and because writing database connect strings straight into source code seems to make sense to some people, they got stuck with an application stack relying on a single database instance that had to be constantly nurtured and <a href="https://blog.ipspace.net/2011/09/long-distance-vmotion-for-disaster.html">carefully migrated to another data center during disaster avoidance process</a> (all other virtual machines could be shut down and restarted on the other end, but the database remained an untouchable holy cow). </p>
<p>Fixing the application stack was (as always) out of question, resulting in another case of brownish substance flowing downwards until it creates <a href="https://blog.ipspace.net/2013/04/this-is-what-makes-networking-so-complex.html">expensive complexities in the network layer</a>.</p>

