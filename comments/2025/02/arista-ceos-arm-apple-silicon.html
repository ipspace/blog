<div class="comments post" id="comments">
  <h4>3 comments:</h4>
  <div class="comments-content">
    <div class="comment-thread">
        <ol>
      <div>
        <li class="comment" id="2517">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Mtai</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2517" href="#2517">10 February 2025 06:27</a>
              </span>
            </div>
            <div class="comment-content"><p>Great to see that ARM-based cEOS has finally been released! I&#39;m running it on my Mac with Apple Silicon, but it seems to have limited support for routing protocols at the moment.</p>

<p>ceos01(config)#router bgp
  bgp  not supported on this hardware platform</p>

<p>ceos01(config)#router ?
  adaptive-virtual-topology  Configure adaptive virtual topology
  bfd                        Bidirectional Forwarding Detection
  general                    Protocol independent routing configuration
  internet-exit              Configure Internet exit
  kernel                     Routes installed by kernel
  l2-vpn                     l2-vpn configuration
  ospfv3                     OSPF Version 3
  service-insertion          Configure network services inserted to data forwarding
  traffic-engineering        Traffic-engineering global config</p>

<p>ceos01(config)#show version
Arista cEOSLab
Hardware version:
Serial number:
Hardware MAC address: 0242.ac20.996c
System MAC address: 0242.ac20.996c</p>

<p>Software image version: 4.33.1F-39308076.liffeyceoslabarm (engineering build)
Architecture: aarch64
Internal build version: 4.33.1F-39308076.liffeyceoslabarm
Internal build ID: 98fc6c22-9c8e-4226-9f9f-083a36d0bcb3
Image format version: 1.0
Image optimization: None</p>

<p>Kernel version: 6.10.14-linuxkit</p>

<p>Uptime: 2 minutes
Total memory: 8025636 kB
Free memory: 6454428 kB</p>
</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="2518">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2518" href="#2518">10 February 2025 09:05</a>
              </span>
            </div>
            <div class="comment-content"><p>Interestingly, I started the lab with netlab/containerlab and BGP works just fine for me using the same engineering build (or at least &quot;show version&quot; claims it&#39;s the same build).</p>
</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2519">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow"> Mtai</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2519" href="#2519">10 February 2025 04:52</a>
              </span>
            </div>
            <div class="comment-content"><p>I didn&#39;t use the netlab to bring up the container, I use the &quot;docker create&quot; command, wondering if any parameters I&#39;m missing? </p>

<p>here is the docker create command I used</p>

<p>docker create --name=ceos01 --hostname=ceos01 -v /root/ceos01/startup-config:/mnt/flash/startup-config --privileged -e INTFTYPE=eth -e ETBA=4 -e SKIP_ZEROTOUCH_BARRIER_IN_SYSDBINIT=1 -e CEOS=1 -e EOS_PLATFORM=ceoslab -e container=docker -i -t ceosimage:4.33.1 /sbin/init systemd.setenv=INTFTYPE=eth systemd.setenv=ETBA=4 systemd.setenv=SKIP_ZEROTOUCH_BARRIER_IN_SYSDBINIT=1 systemd.setenv=CEOS=1 systemd.setenv=EOS_PLATFORM=ceoslab systemd.setenv=container=docker systemd.setenv=MAPETH0=1 systemd.setenv=MGMT_INTF=eth0</p>
</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2520">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Mtai</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2520" href="#2520">10 February 2025 04:59</a>
              </span>
            </div>
            <div class="comment-content"><p>Hi @Ivan Pepelnjak,</p>

<p>On a different note, have you tried running FRR Docker on Apple Silicon? If so, have you had any success with MPLS? It seems that the label forwarding path isn&#39;t working as expected, and I&#39;d appreciate any insights or experiences you could share.</p>

<p>Thanks!</p>
</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="2527">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2527" href="#2527">12 February 2025 09:02</a>
              </span>
            </div>
            <div class="comment-content"><p>&gt; Have you tried running FRR Docker on Apple Silicon?</p>

<p>Yes. It works.</p>

<p>&gt; If so, have you had any success with MPLS?</p>

<p>Yes, the simple <a href="https://github.com/ipspace/netlab/blob/dev/tests/integration/mpls/10-vpn-connected.yml">MPLS/VPN integration test</a> works with FRR 10.0.1 and 10.2.1, meaning that LDP, L3VPN and MPLS data plane all work correctly.</p>

<p>&gt; I&#39;d appreciate any insights or experiences you could share.</p>

<p>Use netlab? Or reverse-engineer how we configure the container ;) It&#39;s all open-source.</p>
</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2540">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow"> Ebin</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2540" href="#2540">26 February 2025 03:44</a>
              </span>
            </div>
            <div class="comment-content"><p>I followed these instructions on my Apple M2 Pro, but I couldn&#39;t get netlab up to work. Error Log pasted below -  </p>

<hr />

<p>ERRO[0000] failed deploy links for node &quot;r2&quot;: failed to Statfs &quot;/proc/0/ns/net&quot;: no such file or directory
ERRO[0000] failed deploy links for node &quot;r1&quot;: file exists</p>

<p>......(omitted lines) ...</p>

<p>TASK [Wait for device to become ready] <strong><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em>*</strong>
included: /home/ubuntu/.local/lib/python3.12/site-packages/netsim/ansible/tasks/readiness-check/eos-clab.yml for r1, r2</p>

<p>TASK [Wait for cEOS SSH daemon to start] <strong><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em></em>*</strong>
fatal: [r2]: FAILED! =&gt; changed=false
  elapsed: 60
  msg: &#39;timed out waiting for connection port up: ssh connection failed: ssh connect failed: Failed to resolve hostname clab-lab45-r2 (Temporary failure in name resolution)&#39;
fatal: [r1]: FAILED! =&gt; changed=false
  elapsed: 60
  msg: &#39;timed out waiting for connection port up: ssh connection failed: ssh connect failed: Failed to resolve hostname clab-lab45-r1 (Temporary failure in name resolution)&#39;</p>

<p>PLAY RECAP <strong><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em><em></em></em><em><em></em></em>*</strong>
r1                         : ok=3    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0
r2                         : ok=3    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0</p>

<p>Error executing ansible-playbook /home/ubuntu/.local/lib/python3.12/site-packages/netsim/ansible/initial-config.ansible:
  Command &#39;[&#39;ansible-playbook&#39;, &#39;/home/ubuntu/.local/lib/python3.12/site-packages/netsim/ansible/initial-config.ansible&#39;]&#39; returned non-zero exit status 2.
[FATAL]   Executing Ansible playbook /home/ubuntu/.local/lib/python3.12/site-packages/netsim/ansible/initial-config.ansible failed
Error executing netlab initial --no-message:
  Command &#39;[&#39;netlab&#39;, &#39;initial&#39;, &#39;--no-message&#39;]&#39; returned non-zero exit status 1.
[FATAL]   netlab up: netlab initial failed, aborting...</p>

<hr />

<p>When I ran docker logs, I got the following - </p>

<pre>
ubuntu@primary:~/lab45$ docker logs clab-lab45-r1
exec /usr/bin/bash: exec format error
</pre>

<p>Any pointers what I could be missing?</p>
</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="2541">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2541" href="#2541">26 February 2025 12:17</a>
              </span>
            </div>
            <div class="comment-content"><p>Unfortunately, I have no useful idea apart from &quot;there&#39;s something badly wrong with your system&quot; -- it looks like it refuses to start bash.</p>

<p>I would recommend you start from scratch (create a new Ubuntu VM), follow the netlab installation instructions, and then do &quot;netlab test clab&quot; to check everything works (apart from the Arista containers).</p>

<p>After you get that working, download the Arista container (make sure you&#39;re downloading the ARM image) and retry.</p>
</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2543">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow"> Ebin</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2543" href="#2543">27 February 2025 01:23</a>
              </span>
            </div>
            <div class="comment-content"><p>&quot;netlab test clab&quot; passed. Also using FRR instead of the cEOS worked fine.</p>

<p>I think I know what I missed. I didn&#39;t use the Arista cEOS ARM image. Looks like the only ARM image is under folder cEOS Lab/4.33 on Arista site, which I missed. </p>

<p>I will give that a go. Thanks Ivan.</p>
</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
  </ol>

    </div>
  </div>
</div>
