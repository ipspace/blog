<div class="comments post" id="comments">
  <h4>1 comments:</h4>
  <div class="comments-content">
    <div class="comment-thread">
        <ol>
      <div>
        <li class="comment" id="2505">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow"> Enrique Vallejo</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2505" href="#2505">23 January 2025 10:49</a>
              </span>
            </div>
            <div class="comment-content"><p>Very interesting!</p>

<p>It&#39;s surprising that the initial VRRPv3 RFC 5798 refers to the IPv6 RFC to define the pseudo-header calculation, leaving the behavior with IPv4 undefined. </p>

<p>If I understand correctly, the original IP specification does not define a pseudo-header, but it is defined in transport protocols (TCP and UDP both include the same exact definition for the pseudo-header fields) in order to calculate a valid checksum that does not depend on varying IPv4 fields such as TTL. Since IPv6 is defined after TCP and UDP, they had to include the pseudo-header calculation mechanism in the RFC for TCP and UDP use.</p>

<p>However, to me it&#39;s more surprising that when they identified the VRRPv3 ambiguity and clarified it in RFC 9568, they didn&#39;t refer to the pseudo-header definition in RFCs 793/768 (TCP/UDP) but instead preferred to avoid using any field from IPv4. I mean: if the pseudo-header is useful (since it was employed it in the first case), why not using it in IPv4? I suppose that compatibility with existing deployments was more relevant than functionality. </p>
</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="2506">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2506" href="#2506">23 January 2025 10:59</a>
              </span>
            </div>
            <div class="comment-content"><p>&gt; The original IP specification does not define a pseudo-header, but it is defined in transport protocols</p>

<p>Wow. Thanks a million. From that perspective, the alternate interpretation of the RFC makes sense. Have to reword that paragraph.</p>

<p>&gt; I suppose that compatibility with existing deployments was more relevant than functionality.</p>

<p>All early implementations used a single (interoperable) approach, so one would hope that everyone else would lean the same way, but of course, that never happens. Some people write code in perfect isolation &#x1F937;&zwj;&#x2642;&#xFE0F;</p>

<p>From the &quot;what&#39;s out there&quot; perspective, it makes sense to define the majority view as the &quot;correct&quot; one, or we could look at the authors of the new RFC and draw whatever conclusions &#x1F61C;</p>
</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
  </ol>

    </div>
  </div>
</div>
