{
   "comments": [
      {
         "comments": [
            {
               "date": "29 April 2025 10:20",
               "html": "<p>Thanks a million for the feedback!</p>\n\n<p>&gt; the router is well able to do it during the upgrade process</p>\n\n<p>... which makes it even worse. They <em>have</em> the solution but don&#39;t feel like they should make it available to external API consumers.</p>\n\n<p>&gt; I also think that YANG/NETCONF underestimated the importance of dealing with versioning.</p>\n\n<p>Yes. However, seasoned vendors like Juniper never experienced problems on such a scale -- they always knew they had to be very careful when making changes to the configuration data model.</p>\n\n<p>Finally, I have to work with SR Linux (not SR OS) through the Nokia SR Linux Ansible collection, which uses JSON-RPC, so there&#39;s no way to specify the version in the XML namespace :(</p>\n",
               "id": "2617",
               "name": " Ivan Pepelnjak",
               "pub": "2025-04-29T10:20:16",
               "ref": "2616",
               "type": "comment"
            }
         ],
         "date": "29 April 2025 10:07",
         "html": "<p>Hi Ivan. I agree with your point on the necessity of backward compatibility, and yes, Nokia (NB: I workly work with their routers) puts that burden on the client. Being able to <code>get-config</code> a full XML configuration from version N and <code>edit-config</code> it to version N+1 would be a bless (and the router is well able to do it during the upgrade process...). You actually <em>can</em> include the YANG version in your request, by embeeding it to the xmlns model of your XML payload (never done that though).\nI also think that YANG/NETCONF underestimated the importance of dealing with versioning. gRPC/protobufs do it better. Like, including changelogs inside the YANG file in the age of git?? Come on. Even back in 2010 (first YANG RFC, 6020), versioning tools were all over the place (maybe not at the IETF though).\nPS: here is a freely available web tool developed by Nokia to help you list the YANG changes between versions : https://yang.labctl.net/yang/SROS/.\nCheers.</p>\n",
         "id": "2616",
         "name": " Bob",
         "pub": "2025-04-29T10:07:45",
         "type": "comment"
      },
      {
         "date": "29 April 2025 10:52",
         "html": "<p>Good rant and to the point obviously from customer perspective. Noooooow, if on the other hand the customers would not camp for literally tens of years on regex scripts scraping screens lots of stuff could progress much faster as a little input from vendor&#39;s side (and yes, I know that XML parsing needs bit learning) ;-) </p>\n",
         "id": "2619",
         "name": " Tony P",
         "pub": "2025-04-29T10:52:54",
         "type": "comment"
      },
      {
         "date": "29 April 2025 12:04",
         "html": "<p>This is why I always test the relevant API endpoints and the responses in automated test series (e.g. using pyATS engine).</p>\n\n<p>There are other aspects, except a breaking API change, which could make this necessary (and I ran in all of them):</p>\n\n<ul>\n<li><p>Is the returned HTTP status code still the expected one (as applications might catch the codes for error handling or as a success indicator). Imagine you expect (in your code) a HTTP code 403 and the vendor changes it to 401 (or whatever).</p></li>\n<li><p>Is the API authentication still as expected? In my latest ISE testing I discovered, that Basic Auth didn&#39;t work for external AD users any more, for <strong>one</strong> specific API endpoint.</p></li>\n<li><p>Are the API response times for a specific endpoint still as expected?</p></li>\n<li><p>...</p></li>\n</ul>\n\n<p>So regardless if the vendor introduced (undocumented) breaking changes to the API, the API should be tested very intensively before a software update. Especially if the API is used for business critical applications. I heard rumors, that a bug fix release sometimes introduce new bugs :).</p>\n",
         "id": "2620",
         "name": " Johannes",
         "pub": "2025-04-29T12:04:09",
         "type": "comment"
      },
      {
         "comments": [
            {
               "date": "29 April 2025 05:56",
               "html": "<p>&gt; Thanks for the rant ;)</p>\n\n<p>You&#39;re welcome ;))</p>\n\n<p>&gt; Having said that, I am inquiring internally if the transformation infrastructure can be made available to the north-bound interfaces, and if it can we will make sure to provide it. Thanks for flagging this.</p>\n\n<p>Thanks a million. However, as I pointed out in the blog post, all the changes that tripped the <em>netlab</em> development team could be easily avoided with a slightly more gradual approach to data model changes.</p>\n",
               "id": "2622",
               "name": "Ivan Pepelnjak",
               "pub": "2025-04-29T17:56:16",
               "ref": "2621",
               "type": "comment"
            }
         ],
         "date": "29 April 2025 03:53",
         "html": "<p>Thanks for the rant ;)</p>\n\n<p>NBC changes suck, believe it or not both for a vendor and a customer, especially a customer. But sometimes they are unavoidable or have a very high cost of avoidance.\nThis does not excuse us from making them frequently, and we understand the cost, the pain, and everything you outlined.</p>\n\n<p>This is why we have a rigid restraint of only introducing NBC changes once a year, when we have our first release in the calendar year. A semver analogy would be that every year you have a bump in the major version where NBC changes can be made and expected.</p>\n\n<p>Having said that, I wanted to point out that SR Linux maintains a config transformation infrastructure that translates the config from vA.B.C to vA+N.x.z when either</p>\n\n<p>a) the node boots up and detects that the config it has on disk is provided with an older version\nb) the <code>tools system configuration update file &amp;lt;file&amp;gt;</code> command is executed</p>\n\n<p>This &quot;version&quot; is part of the config file in the json format and can be found in <code>._preamble</code> object.</p>\n\n<p>These transformation scripts take care of all the changes we introduce config-wise, so the previously singular import policies would be translated to a list of one element, and all other changes as well.\nSo, this backward compatibility &quot;at boot&quot; is guaranteed, and users who upgrade between releases won&#39;t have issues with it. But as you can see, it is <em>not</em> currently available to the north-bound management interfaces when you send payloads in an older format to the newer one.</p>\n\n<p>Having said that, I am inquiring internally if the transformation infrastructure can be made available to the north-bound interfaces, and if it can we will make sure to provide it. Thanks for flagging this.</p>\n\n<p>TLDR: Contrary to what you have said about the golf courses, I am pretty confident no other big vendor is as receptive to feedback on the management interfaces as we are.</p>\n",
         "id": "2621",
         "name": " Roman Dodin",
         "pub": "2025-04-29T15:53:23",
         "type": "comment"
      }
   ],
   "count": 4,
   "type": "post",
   "url": "2025/04/api-data-model-contract.html"
}
