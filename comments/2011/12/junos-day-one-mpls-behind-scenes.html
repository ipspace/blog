<div class="comments post" id="comments">
  <h4>13 comments:</h4>
  <div class="comments-content">
    <div class="comment-thread">
        <ol>
      <div>
        <li class="comment" id="1347821393988899319">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c1347821393988899319" href="#1347821393988899319">03 December 2011 18:22</a>
              </span>
            </div>
            <div class="comment-content">I found your blog post very interesting. I think you may have missed a point in the history of MPLS and the differences in the approach of Cisco and Juniper as far as MPLS. I believe your history on the Cisco side is correct and that they were looking for a way to do switching through the network without doing an ip lookup at each hop and Cisco was pushing LDP as the standard for MPLS. <br /><br />I believe that Juniper’s first routers on the other hand were built on ASICs so they did not have the same constraints as Cisco on IP lookups. The thing that Juniper was trying to address with initial MPLS was a way to replace the TE capabilities that were present with ATM. I think ISPs wanted to do away with the ATM switches but still have Traffic Engineering capabilities. My understanding is this is the reason that Juniper was pushing RSVP as the standard of MPLS.  <br /><br />Since in RSVP you have an LSP going to a single address the loopback of the remote device it makes sense to only have that single IP address associated with that LSP. I think that Junipers LDP behaviour is just applying their first implementation approach RSVP to what they implemented later in LDP. This is just a guess on the reason for the implementation difference but I know that Cisco pushed LDP and Juniper pushed RSVP at the standard when MPLS first came around.<br /><br />Grumpy</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="5272810592811422809">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c5272810592811422809" href="#5272810592811422809">04 December 2011 11:59</a>
              </span>
            </div>
            <div class="comment-content">Thank you! You&#39;re probably right, Juniper came out with edge routers years after the core ones, so their first MPLS application was most likely MPLS-TE (yet again, focusing on transporting traffic toward BGP destinations)<br /><br />BTW, Cisco also had RSVP-based MPLS-TE very early on, but it took them a while to get the headend CB-SPF sorted out.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="6768880853376126651">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Francesco</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c6768880853376126651" href="#6768880853376126651">05 December 2011 14:09</a>
              </span>
            </div>
            <div class="comment-content">And your handwritten pictures? (I prefer this, probably made by Visio)  :-P</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="7744285630581893355">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c7744285630581893355" href="#7744285630581893355">05 December 2011 14:10</a>
              </span>
            </div>
            <div class="comment-content">These ones were actually made in PowerPoint (I dropped Visio years ago when Microsoft bought and bloated it). The hand-drawn ones make sense for simple things that I&#39;ll probably never reuse.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2676871353424946412">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/08553520426989660627" rel="nofollow">Unknown</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2676871353424946412" href="#2676871353424946412">19 May 2014 12:10</a>
              </span>
            </div>
            <div class="comment-content">Ivan,<br /><br />It took me complete 24 hours to keep my head banging on the wall that why non BGP (infact I was not running BGP in my core at all) routes are not in mpls table of JUNOS and secondly why IGP learnt routes were not being labelled / tagged.<br /><br />Until I found this post :)<br /><br />No doubt, there is immeasurable gap between the knowledge base write ups of Juniper as compare to CISCO .<br /><br />Cheers.<br /><br />JM</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="6913958679236056189">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/09966823476823599670" rel="nofollow">Vade</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c6913958679236056189" href="#6913958679236056189">22 October 2015 11:30</a>
              </span>
            </div>
            <div class="comment-content">Ivan - do you know if there&#39;s a way to make JUNOS load balance between inet.0 and inet.3?</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="4087033885962680744">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c4087033885962680744" href="#4087033885962680744">22 October 2015 12:26</a>
              </span>
            </div>
            <div class="comment-content">Unfortunately I don&#39;t know enough about Junos to answer this one.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="6702983400526862823">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/10620847123941072601" rel="nofollow">Chris Whyte</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c6702983400526862823" href="#6702983400526862823">29 October 2015 08:55</a>
              </span>
            </div>
            <div class="comment-content">Vade, Why would you want to do that? Does configuring &#39;mpls traffic-engineering bgp-igp&#39; not address your requirement?</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="8097413178989772186">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/09966823476823599670" rel="nofollow">Vade</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c8097413178989772186" href="#8097413178989772186">29 October 2015 10:54</a>
              </span>
            </div>
            <div class="comment-content">Thanks for the reply Chris. <br />The reason: I want to limit the number of LSPs. (I want to load balance to a neighbour via 2 links, of which only one is directly connected to the neighbour. On Cisco I use forwarding adjacency, and require only one TE tunnel)<br />I did see &#39;mpls traffic-engineering bgp-igp&#39;, but did not try it because I was under the impression this is only needed where you want LSP&#39;s to be used for IGP destinations. In my case all destinations are BGP destinations (which automatically uses the LSP if the next-hop exists, and has preferred preference and metric in, the inet3.0 table). But I have since discovered that I might have to use that, in conjunction with <br />&#39;isis traffic-engineering family inet shortcuts&#39;<br />and<br />&#39;isis traffic-engineering multipath lsp-equal-cost&#39;<br />Will try and remember to post here if I ever get a chance to test it</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="8636892325291565928">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/08618975450399372471" rel="nofollow">Unknown</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c8636892325291565928" href="#8636892325291565928">23 February 2018 12:07</a>
              </span>
            </div>
            <div class="comment-content">Hi all<br /><br />&quot;IP traffic received by a Cisco IOS router will be labeled if at all possible (outbound label is entered in the FIB whenever there’s a corresponding mapping in LDP database)&quot;<br /><br />Since this is the default behaviour<br /><br />with MPLS enabled, Cisco normally uses labels to forward as soon as it receives labels from its LDP neighbors, if you want to have IP forwarding you have to disable LDP on egress (next-hop) interface.<br /><br />Is there a way you could have IP forwarding on an interface that is LDP enabled without having to disable LDP?</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="6073360225913132828">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c6073360225913132828" href="#6073360225913132828">23 February 2018 15:32</a>
              </span>
            </div>
            <div class="comment-content">You can control which prefix-to-label mappings are accepted with LDP filters, but (IIRC) once you accept a mapping from downstream neighbor, it goes into your FIB.</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="1669301560019978432">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/08618975450399372471" rel="nofollow">Unknown</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c1669301560019978432" href="#1669301560019978432">28 February 2018 14:43</a>
              </span>
            </div>
            <div class="comment-content">Hi Ivan,<br /><br />Thanks for the reference<br /><br />I read about LDP filters, seems like the way to go. Since I haven&#39;t put that in practice, please help me understand this<br /><br />Say you have a series of PE routers namely (PE1, PE2...PE100). Now at PE1 you decided to allocate label for PE1 loopback (IP 1.1.1.1/32) with below command<br /><br />#ip prefix-list PE1-LOOPBACK permit 1.1.1.1/32<br />#mpls ldp label<br />  allocate global prefix-list PE1-LOOPBACK <br /><br />Does this mean PE1 will only allocate a label for the loopback IP 1.1.1.1 and ignore any other IGP learned routes?<br /><br />If yes does it mean if we need to have PE1 assign labels for loopback IPs of other PE routers from PE2,PE3,PE4....PE100 we have to use the command below<br /><br />#mpls ldp neighbor 2.2.2.2 labels accept 99<br />#access-list 99 permit host 2.2.2.2<br />#access-list 99 permit host 3.3.3.3<br />#access-list 99 permit host 3.3.3.3<br /><br />Therefore the access-list 99 will contain the other PE routers (PE2,PE3...PE100) loopback IPs, but this does not scale very well assuming 100 PE routers, you will need a 100 entries in the access-list. Is there a way you can reference all /32 prefixes in a non-contagious IP block?<br /><br />Or what is the work around in this scenario?<br /></div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="6248507177802414189">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c6248507177802414189" href="#6248507177802414189">28 February 2018 16:06</a>
              </span>
            </div>
            <div class="comment-content">Can&#39;t see one, apart from automating stuff.</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
  </ol>

    </div>
  </div>
</div>
