{
  "comments": [
    {
      "date": "06 December 2011 09:30",
      "html": "I am very happy to read that the need for NPT66 is now recognized officially. This will target two needs : the multi-homing problem and also a simplification of IPv6 addressing in the enterprise (for example by using ULA addressing).<br /><br />Decisions like not allowing some form of NAT is, in my opinion, one of the main reasons the deployment of IPv6 was several years late.<br /><br />Now we need a CPE implementing NPT66 ! (Cisco ?).<br /><br />Also a good implementation of NAT64 (at CPE or Edge ?) will be a plus.",
      "id": "3635401229144136251",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "Alain RICHARD",
      "profile": null,
      "pub": "2011-12-06T09:30:49.550+01:00",
      "ref": "8082162834167838046",
      "type": "comment"
    },
    {
      "date": "06 December 2011 09:44",
      "html": "NAT64 is already available where it&#39;s actually needed - in SP environments when they&#39;re deploying IPv6-only client and in DMZ edge when you need to provide IPv4-only content over IPv6. Any other use of NAT64 is (in my personal opinion) a technology abuse  :-P<br /><br />You can get NAT64 on ASR1K and MX-series routers and on many load balancers (ACE-30/Cisco, BIG-IP/F5, Brocade ...). There are also less-well-known large-scale carrier implementations (I think Ericsson might have one).",
      "id": "8137013988145236577",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "Ivan Pepelnjak",
      "profile": null,
      "pub": "2011-12-06T09:44:09.429+01:00",
      "ref": "8082162834167838046",
      "type": "comment"
    },
    {
      "date": "06 December 2011 13:34",
      "html": "I&#39;m not as familiar with this, but why can&#39;t mutlihoming in IPv6 be done at the host level with dual IPv6 addresses?<br />Perhaps I&#39;m just revolted at the idea of NAT66 because I remember IPv4 before NAT &amp; want that back so badly.  I really don&#39;t like the idea of applications coming up with more duct-tape methods to get around NAT again. I&#39;m looking at you, STUN.",
      "id": "3691281013159338335",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "Jason Tracy",
      "profile": null,
      "pub": "2011-12-06T13:34:56.774+01:00",
      "ref": "8082162834167838046",
      "type": "comment"
    },
    {
      "date": "06 December 2011 14:57",
      "html": "Seriously everyone only thinks of large enterprises. I was going to make a blog post about this on my blog.<br /><br />How are we small enterprises supposed to connect to the internet locally? You just can&#39;t with the current IPv6 system. I will not even consider implementing IPv6 on my network until this is resolved. <br /><br />NAT isn&#39;t evil. It is just another tool in my arsenal. It only becomes a problem when people try to fit a square peg into a round hole.",
      "id": "221084737885905641",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "John P.",
      "profile": null,
      "pub": "2011-12-06T14:57:55.419+01:00",
      "ref": "8082162834167838046",
      "type": "comment"
    },
    {
      "date": "06 December 2011 15:33",
      "html": "The most precise description I found so far is in the &quot;IPv6 multihoming without NAT&quot; draft:<br /><br />http://tools.ietf.org/html/draft-ietf-v6ops-ipv6-multihoming-without-ipv6nat-03<br /><br />Read at least 3.3 (Problem statement), and I would strongly recommend reading the whole document.",
      "id": "9007330407809622665",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "Ivan Pepelnjak",
      "profile": null,
      "pub": "2011-12-06T15:33:23.334+01:00",
      "ref": "8082162834167838046",
      "type": "comment"
    },
    {
      "date": "06 December 2011 15:44",
      "html": "The IETF is working on this multi-homing issue -- stay tuned.  In the meantime, read http://tools.ietf.org/html/draft-ietf-v6ops-ipv6-multihoming-without-ipv6nat-03 and http://tools.ietf.org/html/draft-ietf-v6ops-multihoming-without-nat66-00 which discuss some of the issues.",
      "id": "8145389983914557312",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "Frank",
      "profile": null,
      "pub": "2011-12-06T15:44:44.435+01:00",
      "ref": "8082162834167838046",
      "type": "comment"
    },
    {
      "date": "06 December 2011 16:25",
      "html": "A long time ago, when I first read through the IPv6 specs, I thought that the way you would build a network was to use the &quot;site local&quot; header inside the access router, then just replace the public prefix when egressing to the external network.  <br /><br />I guess this is NAT66, but it seems like it is more a gateway/routing action than an addressing one, since the host identifier remains constant and you aren&#39;t getting the obfuscation that you typically get when using rfc1918 addresses in IPv4, since that gateway device is going to have a /64 assigned to it, which should be more than enough to do endpoint independent address mapping for a typical branch office or soho site.<br /><br />Fast forward to today... with a smart flow-router, this seems really easy; and in the example of the branch office, would let you have out-bound link decision routing tables - Internet gets sent to the Internet, the corporate intranet gets sent down the VPN.  Yeah, you spend more for the device, today, but that seems like a more sensible way to do things than to have any of the all or nothing scenarios you give as possible solutions.  Because you are flow centric, you keep all the packets for a flow (or for a client or a destination or anything you can key on for persistence) going out the same link, so they all have the same public source address.  The internal nodes all have three addresses, the link local address, and an address corresponding to each link&#39;s public IP space; DNS sorts out which address to use when.  <br /><br />You could set it all up with an f5 in about an hour, fwiw.",
      "id": "2264524369555555644",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "Ian",
      "profile": null,
      "pub": "2011-12-06T16:25:26.400+01:00",
      "ref": "8082162834167838046",
      "type": "comment"
    },
    {
      "date": "06 December 2011 16:28",
      "html": "In my opinion, IETF should have been working on this issue 10 years ago, not when parts of the world have already run out of IPv4 addresses. Repeating &quot;NAT is EVIL&quot; without doing anything that would solve real-life operational issues got us to the point where we are forced to admit that we need NPT66, because we have no other solution that would work with existing OS stacks.<br /><br />BTW, the IETF draft you quoted (draft-ietf-v6ops-ipv6-multihoming-without-ipv6nat-03) has one of the best descriptions of the need for NPT66. The only other reasonable alternative is changing host stacks and we all know we&#39;re years too late for that ... there are real people out there doing real work on Windows XP and IE6. They are ready for IPv6 ... as it was defined 5+ years ago. We had 15+ years to get it right ... and failed miserably.<br /><br />Just my grumpy $0.02  :(",
      "id": "4055268357304356143",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "Ivan Pepelnjak",
      "profile": null,
      "pub": "2011-12-06T16:28:51.620+01:00",
      "ref": "8082162834167838046",
      "type": "comment"
    },
    {
      "date": "06 December 2011 17:13",
      "html": "Seems like NAT66 is on the way, at least for Linux, see http://h-online.com/-1385877 ...",
      "id": "2897735004936246244",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "Christoph",
      "profile": null,
      "pub": "2011-12-06T17:13:38.168+01:00",
      "ref": "8082162834167838046",
      "type": "comment"
    },
    {
      "date": "06 December 2011 17:42",
      "html": "The other way around the problems in draft-ietf-v6ops-ipv6-multihoming-without-ipv6nat-03 is to have each host connect to a vlan for each link using vlan tagging, run radvd on each vlan, and key the radvd to the availability of the upstream link; the link drops, you withdraw the advertised route.<br /><br />Bottom line, NAT66 doesn&#39;t seem like the horror you make it out to be; dealing with the internal LAN issues isn&#39;t something that we haven&#39;t already dealt with when running IPv6 LANs connected to the IPv4 Internet, and multihoming doesn&#39;t appear to be that big of a deal if you look at it (and gateway it) from L4 up.",
      "id": "5856641635992547122",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "Ian",
      "profile": null,
      "pub": "2011-12-06T17:42:36.808+01:00",
      "ref": "8082162834167838046",
      "type": "comment"
    },
    {
      "date": "06 December 2011 19:13",
      "html": "Yeah, you could do NPT66 in F5 with iRules. Very good point (but also &quot;a bit&quot; expensive ;) )<br /><br />However, it seems that what you&#39;re describing falls more under the PBR behavior (which is now available in IOS for IPv6 ... unless I got it all wrong again), in which case the source IPv6 address selection on the host remains unsolved problem.",
      "id": "8710556895859406878",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "Ivan Pepelnjak",
      "profile": null,
      "pub": "2011-12-06T19:13:11.366+01:00",
      "ref": "8082162834167838046",
      "type": "comment"
    },
    {
      "date": "06 December 2011 19:15",
      "html": "The VLAN approach might actually work (assuming you can tweak RA on routers ... probably could do that with EEM today), but I don&#39;t think it&#39;s realistic to expect to see something like that in environments that are too small to have their own AS number, PI space and BGP with ISPs.<br /><br />Also, I see no problem implemented that on Linux, Windows might be able to do it, iDevices - no way.",
      "id": "1600029963098977177",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "Ivan Pepelnjak",
      "profile": null,
      "pub": "2011-12-06T19:15:44.997+01:00",
      "ref": "8082162834167838046",
      "type": "comment"
    },
    {
      "date": "06 December 2011 20:45",
      "html": "Templin&#39;s IRON seems like a simpler alternative to LISP; I think something like that is the best tradeoff that is possible if you want to maintain real Internet access (i.e. accepting incoming connections over both paths). Of course everything is easier if you just want to browse the Web.",
      "id": "654418721124670707",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "wmf",
      "profile": null,
      "pub": "2011-12-06T20:45:05.799+01:00",
      "ref": "8082162834167838046",
      "type": "comment"
    },
    {
      "date": "07 December 2011 11:17",
      "html": "For this case you don&#39;t need NAT66. If you host a server, then you need to choose one IPv6 address from one of assignments to put it into DNS - so for server this does not work. For local users, you use multiple addresses in the host - you connect to multiple providers with multiple routers and every router is connected to your LAN and every router sends out RA packets. With priority setting (low/normal/high) you can set which router is preferred and host then uses right source address for communication. You have all &quot;default&quot; routes in routing table, but just one (highest priority in RA) is active. If that goes down, you loose the neighbor in NA and route dissapears with next one being activated and different source address being used. <br /><br />Works for me, using that for quite some time now. <br /><br />Don&#39;t make me sick with NAT66, come on :)",
      "id": "7061190391329404134",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "Jan Zorz",
      "profile": null,
      "pub": "2011-12-07T11:17:11.404+01:00",
      "ref": "8082162834167838046",
      "type": "comment"
    },
    {
      "date": "08 December 2011 09:35",
      "html": "Jan, it doesn&#39;t work (just tested it, blog post on Monday). It works as long as you don&#39;t care about return path, the ISPs don&#39;t do RPF checks, and both links work ... in which case you don&#39;t need two ISPs in the first place  :-P",
      "id": "6561767895984705487",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "Ivan Pepelnjak",
      "profile": null,
      "pub": "2011-12-08T09:35:13.661+01:00",
      "ref": "8082162834167838046",
      "type": "comment"
    },
    {
      "date": "08 December 2011 10:01",
      "html": "Yeah Firewalls doesnt care about return path also (Statefullolol ?) :P<br /><br />/sarcasm off..<br /><br />Funny I was discussing this with a network architect here and he told me that we will need some kind of Nat in IPV6 too",
      "id": "848733859240291932",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "Nicolas MICHEL",
      "profile": null,
      "pub": "2011-12-08T10:01:14.120+01:00",
      "ref": "8082162834167838046",
      "type": "comment"
    },
    {
      "date": "08 December 2011 21:56",
      "html": "Your 2 cents is right but again it is a perspective &quot;how you look at it thing&quot; IP was around in 1980 so by 1995 it was considered &quot;old &quot;by the time widespread adoption took place. Granted other IP protocols developed in the late 80s and 90s helped in its adoption  In that context 1999(for IPv6 from SIPP and TUBA)to today ehhh we have a couple of years;).<br /><br />Nonetheless, had the ISO prevailed IPv6 would have been DECNET 5. so we are thankful for the IETF for keeping ownership of IPv6. It took 15 years from IP to get past the multiprotocol world of IPX/DEC/SNA/LLCx/and Appletalk etl. all. to its adoption so I am confident IPv6 will too. <br /><br />Yet one has to wonder had the ISO kept ownership of IPv6 would they have tied it into CLNS-ISIS natively and all this trill fabric multipath ISIS stuff of today would be moot. <br /><br />As for the XP stacks they are done. IPv6 on XP is just as evil as NAT.",
      "id": "3014226295316057758",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "jsicuran",
      "profile": null,
      "pub": "2011-12-08T21:56:40.578+01:00",
      "ref": "8082162834167838046",
      "type": "comment"
    },
    {
      "date": "11 December 2011 22:31",
      "html": "I hate to point out the obvious, but the small site multihoming argument is yet again an application problem being thrust onto the network, and it should be rejected.<br /><br />In the event of a non-bgp, PA-addressed site, hosts must recieve addresses from each PA block from ecah provider. The application is responsible for selecting the correct source address (try PA IP 1, if no joy in 2 seconds, switch to PA IP 2) or send simultanious requests from each PA IP and reset the last one to succeed.<br /><br />There are unexplored solutions to this problem, and NAT is the old comfortable blanket full of bed bugs. We need to burn it, not cling to it.",
      "id": "2564627628797528331",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "nosx",
      "profile": null,
      "pub": "2011-12-11T22:31:18.306+01:00",
      "ref": "8082162834167838046",
      "type": "comment"
    },
    {
      "date": "12 December 2011 13:27",
      "html": "I somewhat agree with you, but unfortunately that&#39;s not how this world works.<br /><br />To start with, it&#39;s not an application problem, it&#39;s a networking stack problem. The application cares about getting a session to the server; solving a broken networking stack/API problem in the application is as wrong as thrusting it onto the network.<br /><br />IETF  has been ignoring multihoming issues for more than a decade, in the meantime the OS vendors built what RFCs told them to build. Now that the OS stacks have been built and deployed (based on RFC specs), the IPv4 addresses are running out, and some people are finally deploying the academic architectures designed 15 years ago, we&#39;re &quot;all of a sudden&quot; rediscovering the problem.<br /><br />As always, it seems the problem will be &quot;solved&quot; by implementing the easiest-to-implement kludge.",
      "id": "8433460959094078150",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "Ivan Pepelnjak",
      "profile": null,
      "pub": "2011-12-12T13:27:43.125+01:00",
      "ref": "8082162834167838046",
      "type": "comment"
    },
    {
      "date": "22 December 2011 06:23",
      "html": "This issue never crossed my mind until now. So I want to be clear, the reason why multihoming is such an issue is, if we were getting two ip spaces from two ISPs , how do we assign our hosts and route the two spaces were one is active and one is standby ?<br /><br />So does that mean NAT66 will force us to use a &quot;private&quot; ipv6 space for hosts behind the NAT? If so , dont we now lose the beauty of having every host reachable directly by everyother host?<br /><br />Sorry for the ignorance, just curious about this issue.",
      "id": "8756166749296130889",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "CJ",
      "profile": null,
      "pub": "2011-12-22T06:23:58.236+01:00",
      "ref": "8082162834167838046",
      "type": "comment"
    },
    {
      "date": "22 December 2011 07:46",
      "html": "The root cause is getting two spaces from two ISPs. <br /><br />With active/active uplinks, you have a &quot;proper source address selection&quot; problem.<br />With active/standby uplinks, you have either &quot;proper source address selection&quot; problem or &quot;lack of fast renumbering&quot; one.",
      "id": "796834442746527657",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "Ivan Pepelnjak",
      "profile": null,
      "pub": "2011-12-22T07:46:40.576+01:00",
      "ref": "8082162834167838046",
      "type": "comment"
    },
    {
      "date": "11 January 2012 17:10",
      "html": "My problem is related to remote sites connecting back to two different data centers via an MPLS cloud or a point to point link. Those DCs then each have their own AS with PI address space and multiple connections via two ISPs. Right now, outgoing connections are NAT&#39;d on the edge firewall. This allows the connection to receive an IP from that DC&#39;s address space.",
      "id": "1081445843161845195",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "Nathaniel McAuliffe",
      "profile": null,
      "pub": "2012-01-11T17:10:59.915+01:00",
      "ref": "8082162834167838046",
      "type": "comment"
    },
    {
      "date": "28 February 2012 15:03",
      "html": "Well in the case of natv6 you will need a way to signal a host os of the external prefix for things like correct source addresses in sip/sdp etc so we can do away with ALGs and natv6 traversal the may or may not be there or be there but operating incorrectly . Wouldn&#39;t it be simpler if host addresses only existed in the IP header?<br /><br />PS: I&#39;m no expert in these matters so feel free to correct me if you wish",
      "id": "440501508631559459",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "bn-7bc",
      "profile": null,
      "pub": "2012-02-28T15:03:16.608+01:00",
      "ref": "8082162834167838046",
      "type": "comment"
    },
    {
      "date": "18 November 2012 03:45",
      "html": "Wow, you mean I&#39;ll actually get to control my own network again? COOL!<br /><br />",
      "id": "4939216692395005396",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "Anonymous",
      "profile": null,
      "pub": "2012-11-18T03:45:17.854+01:00",
      "ref": "8082162834167838046",
      "type": "comment"
    }
  ],
  "count": 24,
  "id": "8082162834167838046",
  "type": "post",
  "url": "2011/12/we-just-might-need-nat66.html"
}