<div class="comments post" id="comments">
  <h4>13 comments:</h4>
  <div class="comments-content">
    <div class="comment-thread">
        <ol>
      <div>
        <li class="comment" id="4370893378309017217">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">Michael</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c4370893378309017217" href="#4370893378309017217">09 September 2011 15:49</a>
              </span>
            </div>
            <div class="comment-content">Is there a way to manage how BGP falls *back* over? Say if you want the primary session to stay down until you administratively inspect the event that caused the loss of the tracked object ?</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="6055906649077399364">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c6055906649077399364" href="#6055906649077399364">09 September 2011 16:06</a>
              </span>
            </div>
            <div class="comment-content">Just create an EEM applet that reacts to &quot;track&quot; object going down and sets another track object to &quot;down&quot;.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2018249706647578883">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">Daniel G</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2018249706647578883" href="#2018249706647578883">09 September 2011 16:54</a>
              </span>
            </div>
            <div class="comment-content">What I am currently doing is using EEM to watch my tracked objects and then issuing a neighbor shutdown command, then a a no neighbor shutdown command. (Along with email notifications)<br /><br />Is there a functional reason I would not want to do it that way, and use the method you prescribe?</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="3809367198328230700">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">Dave C</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c3809367198328230700" href="#3809367198328230700">09 September 2011 22:23</a>
              </span>
            </div>
            <div class="comment-content">Great info; we have been literally working on this same problem area in our environment this week, but by trying to keep the BGP session up and instead stop advertising a network by removing that network&#39;s (static) route from the local routing table via tracking of an ip sla that pings the firewall interface.<br /><br />Unfortunately, I don&#39;t know what the delay is likely to be between when the route disappears from the routing table and BGP decides to stop advertising it, and so far I haven&#39;t been able to find that out.  In our case, killing the whole BGP session is just as good, so we&#39;ll try this approach.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="6349682722034351972">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">Christoph</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c6349682722034351972" href="#6349682722034351972">18 September 2011 18:25</a>
              </span>
            </div>
            <div class="comment-content">Thanks for explanation!</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="1010378880755636844">
          <!--
          <div class="avatar-image-container">
            <img src="https://4.bp.blogspot.com/_TQ4ef9PAWdM/SlZT3KFjcSI/AAAAAAAAD6A/rPWohEC7q-0/S220-s32/_Stockholm1+009.jpg">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/04710527449213542736" rel="nofollow">pmg</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c1010378880755636844" href="#1010378880755636844">12 August 2014 09:52</a>
              </span>
            </div>
            <div class="comment-content">Hi Ivan,<br /><br />First, thanks for the great recipe!<br /><br />Is there are any limitation for this to work flawlessly? Or maybe I&#39;m doing something wrong? When I&#39;ve tried to implement it locally, I was tracking Loopback interface which shutdowns using EEM script based on HSRP event - everything worked fine (including few manual tests) for a few days before huge traffic flow brought my ISR2901 to the knees and HSRP event occurred, effectively shutting Loopback interface down. However, we haven&#39;t lost route to the BGP peer (somehow static route haven&#39;t been removed by Loopback tracking event). Am I missing something?</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="6800440805478693494">
          <!--
          <div class="avatar-image-container">
            <img src="https://lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/02845379530431046584" rel="nofollow">JohnnyLove</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c6800440805478693494" href="#6800440805478693494">26 September 2014 16:48</a>
              </span>
            </div>
            <div class="comment-content">Will the peer get re-established using the connected route or a less specific route?<br /></div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="3580451676620679489">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c3580451676620679489" href="#3580451676620679489">16 June 2015 10:57</a>
              </span>
            </div>
            <div class="comment-content">It works fine when I want to take down BGP session. But&quot;delay&quot; option on tracking object has no effect on BGP session re-establishment:<br />*Mar  1 01:28:16.075: %BGP-5-ADJCHANGE: neighbor 10.10.10.1 Up<br />R3#<br />R3#<br />*Mar  1 01:30:38.979: %TRACKING-5-STATE: 1 rtr 1 state Down-&gt;Up<br />R3#</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="8810924484452320915">
          <!--
          <div class="avatar-image-container">
            <img src="https://lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/16206916690214327160" rel="nofollow">Unknown</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c8810924484452320915" href="#8810924484452320915">17 June 2015 07:30</a>
              </span>
            </div>
            <div class="comment-content">Found this solution which works fine ( tracking line-protocol to make it easier, if in-direct failure needs to be fixed then IP SLA is required too):<br /><br />ip route  255.255.255.255 Null0 track 1<br />!<br />track 1 list boolean and<br />object 10 not<br />!<br />track 10 interface  line-protocol<br />delay up 180</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="4175479605164453928">
          <!--
          <div class="avatar-image-container">
            <img src="https://lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/16206916690214327160" rel="nofollow">Unknown</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c4175479605164453928" href="#4175479605164453928">17 June 2015 07:56</a>
              </span>
            </div>
            <div class="comment-content">ip route (PER IP ADDRESS) 255.255.255.255 Null0 track 1<br />!<br />track 1 list boolean and<br />object 10 not<br />!<br />track 10 interface (WAN INTERFACE) line-protocol<br />delay up 180</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="3727067721044475524">
          <!--
          <div class="avatar-image-container">
            <img src="https://lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/02026618959471538240" rel="nofollow">Unknown</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c3727067721044475524" href="#3727067721044475524">05 October 2017 09:05</a>
              </span>
            </div>
            <div class="comment-content">Could you please explain for me the main purpose when you put this command in? and How can it effect to BGP neighbor forming process?<br />ip route 10.0.7.10 255.255.255.255 Serial1/0 10.0.7.10 track 10<br />Thanks Ivan</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="6313549852815441322">
          <!--
          <div class="avatar-image-container">
            <img src="https://lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c6313549852815441322" href="#6313549852815441322">05 October 2017 11:26</a>
              </span>
            </div>
            <div class="comment-content">I would suggest you explore how &quot;fast session failover&quot; with a route map works.</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="5015514137982990764">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c5015514137982990764" href="#5015514137982990764">14 November 2017 22:11</a>
              </span>
            </div>
            <div class="comment-content">I made the configuration, and it works. But, the BGP session will be up by itself after about 30 secs.</div>
          </div>
        </li>
      </div>
  </ol>

    </div>
  </div>
</div>
