<div class="comments post" id="comments">
  <h4>1 comments:</h4>
  <div class="comments-content">
    <div class="comment-thread">
        <ol>
      <div>
        <li class="comment" id="910">
          <!--
          <div class="avatar-image-container">
            <img src="">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c910" href="#910">06 December 2021 01:59</a>
              </span>
            </div>
            <div class="comment-content"><p>&quot;Spine switches are also BGP route reflectors&quot; &lt;&lt;&lt; There&#39;s only one spine switch in your example.</p>

<p>&quot;Ideal end result: three equal-cost paths toward the anycast prefix on L1 and S*<em>2</em>*.&quot; &lt;&lt;&lt; should be S1</p>

<p>In the output &quot;Routing table for the anycast prefix on the spine node (S1)&quot; I think the next-hop &quot;10.1.0.21&quot; is wrong as you haven&#39;t disabled next-hop-self on leaf switches at that stage. It should be &quot;10.0.0.3&quot;.</p>

<p>Maybe implicit next-hop-self and BGP Add-Path is an optimization mechanism because there&#39;s only one exit point (L2 in that example) anyway. Kinda like a summarization.</p>

<p>For the one minute/60 seconds delay after bootup maybe &quot;bgp update-delay&quot; will solve it. Found something from Petr: https://blog.ine.com/2010/11/22/understanding-bgp-convergence
Otherwise I suggest to debug BGP.</p>
</div>
          </div>
        </li>
      </div>
  </ol>

    </div>
  </div>
</div>
