<div class="comments post" id="comments">
  <h4>26 comments:</h4>
  <div class="comments-content">
    <div class="comment-thread">
        <ol>
      <div>
        <li class="comment" id="1478885057833095860">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c1478885057833095860" href="#1478885057833095860">19 December 2007 17:52</a>
              </span>
            </div>
            <div class="comment-content">I have seen this before in some dual-homed sites where the customer also wanted the MPLS to backup his LAN to LAN traffic from within that site. We saw rib failures as well as the needs to tweak bgp weight on the CE routers in order to get the proper routing and failover scenarios the ways the customer wanted. However, the addition of rib failues definitely helped pinpointed the issues visually. W/o that feature one might need to dig deeper to find out what was going on.<BR/><BR/>Thanks for the clarifications on this feature.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2299227613505428606">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2299227613505428606" href="#2299227613505428606">19 December 2007 20:20</a>
              </span>
            </div>
            <div class="comment-content">For the sake of completeness, Cisco IOS documentation lists two more cases when you might get a RIB failure:<BR/><BR/>* the router is so low on memory that the BGP route cannot be inserted into the IP routing table (I am not sure you'd be able to execute the show commands in this scenario anyway :)<BR/><BR/>* a VRF has exceeded the maximum-prefix limit and cannot accept additional imported VPNv4 routes.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="1446386199594417257">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Guest</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c1446386199594417257" href="#1446386199594417257">24 September 2009 03:07</a>
              </span>
            </div>
            <div class="comment-content">Gud Info guys!!!<br /><br />Thanx<br /><br />YasH</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="8961201826345135536">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Luca Gervasi</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c8961201826345135536" href="#8961201826345135536">19 October 2009 09:43</a>
              </span>
            </div>
            <div class="comment-content">I got this in one CCNP book lab. <br />the failure happend as i used to install some additional floating routes to the redundant paths between two router (in a dual homed full mesh scenario). <br />The routes were still reachable (using the statics) and the bgp routes were not installed, as you wrote in the post.<br /><br />Thanks for answering my question before i actually had it :D<br /><br />Luca</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="619397129382501248">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Paul</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c619397129382501248" href="#619397129382501248">18 November 2009 16:37</a>
              </span>
            </div>
            <div class="comment-content">Thanks, cleared up that little query I had  :-D</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="1014740570616758443">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">SG</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c1014740570616758443" href="#1014740570616758443">19 November 2009 07:36</a>
              </span>
            </div>
            <div class="comment-content">Thanks for the heads up. Wondering why RIB failure was showing up on a static redistribute into BGP.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="6261524383304415168">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">the most wanted</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c6261524383304415168" href="#6261524383304415168">17 February 2010 11:28</a>
              </span>
            </div>
            <div class="comment-content">thanks a lot<br />even in the cisco online documentation this feature is not as smoothly explained</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2765768666885744939">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">zol192000</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2765768666885744939" href="#2765768666885744939">09 July 2010 21:21</a>
              </span>
            </div>
            <div class="comment-content">i have this problem and i increased the metric of static route and problem is removed.....</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="7137929012622762645">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c7137929012622762645" href="#7137929012622762645">09 July 2010 21:29</a>
              </span>
            </div>
            <div class="comment-content">More precisely, you probably increased the administrative distance of the static route; you canâ€™t change their metric.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="6699833870924528261">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Vandana</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c6699833870924528261" href="#6699833870924528261">09 August 2010 14:21</a>
              </span>
            </div>
            <div class="comment-content">William <br /><br />              I work for sprint and got a scenerio where customer was running only BGP and static routing . had 2 default routes ..one he was getting from BGP [ which was running on serail interface ,connection to sprint mpls ] and other was static which was pointing towards his lan [ fa0/0]...In the RT the static default route was getting installed becoz of better AD and the default route in BGP table was showing with RIB failure. ..I was checking the BGP configs and found while configuring neighborship with sprint mpls weight was also defined [ 2 ] with the neighbor statement ..My question is why there was weight statement in BGP configs when there was only 1 BGP neighbor in that router ...IS there any significance for this ?????? O:-)</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2424886064655940954">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2424886064655940954" href="#2424886064655940954">09 August 2010 22:16</a>
              </span>
            </div>
            <div class="comment-content">hi all<br /><br />I am from sprint .was working with vandana on the issue stated..i could see that the loopack was advertised to pe router via bgp ..but i logged into the connected  pe router where i could see that the update was not advertised to any peer...does that mean that the update was not  advertised further into the mpls clous to our managemnt servers..</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="8057655708854671601">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c8057655708854671601" href="#8057655708854671601">10 August 2010 14:01</a>
              </span>
            </div>
            <div class="comment-content">Weight with a single BGP neighbor makes no sense. It might have been a leftover from previous config, cut-and-paste job or some weird belief.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2905741683273688182">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Vandana</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2905741683273688182" href="#2905741683273688182">12 August 2010 12:08</a>
              </span>
            </div>
            <div class="comment-content">Thanks a lot Ivan for clearing my doubt :)</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="3696754193792650398">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">pakerwe</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c3696754193792650398" href="#3696754193792650398">18 September 2010 06:17</a>
              </span>
            </div>
            <div class="comment-content">Hi Ivan,<br /><br />I&#39;ve strange behavior on RIB-Failure, BGP update is sent ONLY to EBGP peer. Is it correct behavior or just another IOS bugs?</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="6803234082325363043">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c6803234082325363043" href="#6803234082325363043">19 September 2010 08:35</a>
              </span>
            </div>
            <div class="comment-content">Could be:<br /><br />(A) New default behavior (which IOS are you using?)<br />(B) Yet another bug<br />(C) unrelated IBGP issue (you sure it&#39;s not an IBGP route that would have to be reflected?)</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2530904592734756090">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2530904592734756090" href="#2530904592734756090">23 September 2010 17:01</a>
              </span>
            </div>
            <div class="comment-content">Hi Ivan. Which behavior is compliant with the recent BGP related RFC(s): advertising or suppressing those routes what are not installed to the local RIB? Thanks.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="675598102313968337">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">MMudit</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c675598102313968337" href="#675598102313968337">21 December 2010 08:26</a>
              </span>
            </div>
            <div class="comment-content">has any one  used sami module in cisco 7609 to implement vpn services</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="5218286646382322874">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Yap Chin Hoong</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c5218286646382322874" href="#5218286646382322874">28 February 2011 07:39</a>
              </span>
            </div>
            <div class="comment-content">Brad lead me to here (http://bradhedlund.com/notes/bgp/) regarding the &quot;bgp suppress-inactive&quot; command. It is not as straight forward as documented in the Cisco DocCD. I have done some POC regarding it document it into a blog post. Thanks. 8-)<br />http://www.itcertnotes.com/2011/02/suppressing-inactive-bgp-route.html</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="8228270957241838819">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/09122681494233959222" rel="nofollow">renos stoikos</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c8228270957241838819" href="#8228270957241838819">12 May 2012 21:58</a>
              </span>
            </div>
            <div class="comment-content">Good evening Mr Ivan, i am having the exact same issue in a simple topology that i configured BGP. After i redistribute OSPF into BGP then the eBGP peer has a rib-failure about the connected interface , and the iBGP peers have rib-failures about the networks they allready knew through OSPF. This is normal because the routing table for both iBGP anf eBGP has allready these routes with better AD. Pings are doing fine and everything looks correct. My question is the fact that the routes are marked as rib-failure is a problem ? should or should not try to eliminate this entry from the bgp table? thank you</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="2865421194816158990">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2865421194816158990" href="#2865421194816158990">13 May 2012 07:40</a>
              </span>
            </div>
            <div class="comment-content">If you need to propagate the iBGP routes (that are also in OSPF) to eBGP peers, then they have to be in the BGP table; RIB failure is normal under those assumptions.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="6332014346876176015">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/09122681494233959222" rel="nofollow">renos stoikos</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c6332014346876176015" href="#6332014346876176015">13 May 2012 16:16</a>
              </span>
            </div>
            <div class="comment-content">Thank you very much sir for your answer. Best regards.</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="4811179331816960301">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Andre Grove</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c4811179331816960301" href="#4811179331816960301">03 September 2012 19:22</a>
              </span>
            </div>
            <div class="comment-content">i was messing around with GNS3 and could NOT get my routes suppressed with &quot;bgp suppress-inactive&quot;. i tried it on some 4948s too, but got the same result.<br />what have i done wrong?</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="8184083564771862766">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Andre Grove</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c8184083564771862766" href="#8184083564771862766">04 September 2012 18:57</a>
              </span>
            </div>
            <div class="comment-content">I discovered the errors of my ways. just setting &quot;bgp suppress-inactive&quot; is not the answer - the next-hop needs to be different too. and no you can&#39;t trick it with recursive routing.</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="382415433144160548">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c382415433144160548" href="#382415433144160548">04 September 2012 19:02</a>
              </span>
            </div>
            <div class="comment-content">&quot;the next hop needs to be different&quot; ... with a perfect hindsight (thank you!) it makes perfect sense. Without this check, BGP routes redistributed into OSPF would kick out those same BGP routes.</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="8525503246599987246">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c8525503246599987246" href="#8525503246599987246">27 August 2013 18:23</a>
              </span>
            </div>
            <div class="comment-content">Hi Ivan, I came across a scenario in which the next hop entries for BGP and IGP (EIGRP) were different. Still, the RIB failed routes got advertised to Service Provider PE, even after introducing the command &quot;bgp suppress-inactive&quot;. IOS version would be 15.2(3). This created a loop for our spoke site subnets behind CE routers.<br /><br />Does it mean that the cmd is not working as per expectation?</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="2388193898844470389">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2388193898844470389" href="#2388193898844470389">28 August 2013 10:23</a>
              </span>
            </div>
            <div class="comment-content">Did you clear the BGP session? BGP updates are triggered by change in route info, and sometimes the programmers forget to trigger them after a configuration change.</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
  </ol>

    </div>
  </div>
</div>
