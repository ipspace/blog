<div class="comments post" id="comments">
  <h4>15 comments:</h4>
  <div class="comments-content">
    <div class="comment-thread">
        <ol>
      <div>
        <li class="comment" id="6613442684591517644">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c6613442684591517644" href="#6613442684591517644">24 July 2008 16:25</a>
              </span>
            </div>
            <div class="comment-content">Good explanation.  How does the gratuitious arp work then in the "show ip dhcp conflict"?<BR/><BR/>Any inside?</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="3746192084709188861">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c3746192084709188861" href="#3746192084709188861">09 August 2008 17:03</a>
              </span>
            </div>
            <div class="comment-content">Will check &amp; post.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="5798342334719339790">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Jan</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c5798342334719339790" href="#5798342334719339790">01 September 2010 10:02</a>
              </span>
            </div>
            <div class="comment-content">Just ran into this issue, i imagined how it worked. Great explanation, will disable the conflicts logging, even if is interesting to know that there was a problem.<br /><br />There is no timer that could automagically clear the list of bindings (simmilar to errdisable recovery cause ...) ?</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="4150454183311152808">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">stevecrye</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c4150454183311152808" href="#4150454183311152808">09 April 2011 16:56</a>
              </span>
            </div>
            <div class="comment-content">Ivan, I&#39;ve reading your blog for years, this is my first question. I manage a largish network with 100 sites and about 4000 Cisco devices. For the last 10 years we used a single, centralized ISC DHCP server. Recently for various reasons too involved to explain here, it has become retarded. IN desperation I have enabled dhcp on all our 100 or so 6500s. We are not logging dchp conflicts, and so far all seems OK. However, I miss the extensive logging we used to obtain with ISC. I was thinking of enabling a DHCP db agent and turning on conflict logging, but your blog post above gives me pause. I&#39;ve been googling madly and can&#39;t find much info on the use of an external dhcp db server, or how to configure it.<br /><br />Is there a way to obtain more info about the dhcp bindings and clients without having either a single point of failure (the external db server) or worrying about the problems with conflicts you describe above?<br /><br />TIA,<br /><br />Steve</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="8061297383289445424">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c8061297383289445424" href="#8061297383289445424">10 May 2011 08:19</a>
              </span>
            </div>
            <div class="comment-content">:-P :-P :-P :-P</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="5466430761859485598">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c5466430761859485598" href="#5466430761859485598">15 February 2012 09:59</a>
              </span>
            </div>
            <div class="comment-content">This saved me today, thanks!</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="8882874879511645701">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c8882874879511645701" href="#8882874879511645701">02 August 2012 06:57</a>
              </span>
            </div>
            <div class="comment-content">Hi Ivan,<br /><br />I&#39;m glad I found your post as it explains a problem I had to deal with this morning.  Unfortunately our department is going to be dealing with this A LOT more in the coming months so I&#39;m hoping you can provide more info.<br /><br />Our department is going to be installing and supporting WiFi for hotels around the country.  One of our installs this morning had a massive failure.  The site has ~50 WAPs in a /26 DHCP pool with 62 usable addresses.  When the router running the DHCP server reloaded it saw those 50 WAPs using the IPs they&#39;d been assigned and marked those IPs as conflcts.  That meant when it came time for the WAPs to release/renew their leases there were only ~10 IPs available in the pool.  We got a call from the site saying the whole site was down.<br /><br />What I don&#39;t understand is if this is how DHCP works, how does DHCP work at all?  I&#39;ve never heard of this happening before anywhere I&#39;ve worked and I can&#39;t believe it&#39;s because DHCP servers have never reloaded.  There has to be some workaround or something... can you please provide some info on this part of it?<br /><br />Thanks!<br />~Steve</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="3392137933315675743">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c3392137933315675743" href="#3392137933315675743">02 August 2012 11:34</a>
              </span>
            </div>
            <div class="comment-content">Conflict logging works well only if you use persistent bindings (dhcp database) to preserve DHCP server state across reloads, otherwise turn it off.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="4349159824771324500">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c4349159824771324500" href="#4349159824771324500">29 May 2013 10:32</a>
              </span>
            </div>
            <div class="comment-content">I think his answer is this....apparently when the WAPs were already active with an IP and the dhcp server was rebooted, the current WAPS IPs were placed into the exclusive list (address conflict) as the DHCP server attempted to distribute and address to a WAP requesting an IP. Once in that list I beleive the dhcp server will not give out that address even to the device that may be requesting to renew it&#39;s address with its same address. Hence the dhcp pool is reduced to the point that there are not even addresses to allocate. I think the DHCP server should recognize that a device requesting to renew its ip address should be regiven that same address along with deleting the address from the excluded list. I do not remember the dhcp packet commands in detail but I thought a renewing dhcp client shared the current IP address assigned to it with the server.   Too lazy to look it all up..sorry</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2741785768893607421">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2741785768893607421" href="#2741785768893607421">29 August 2012 22:32</a>
              </span>
            </div>
            <div class="comment-content">well, nothing prevents you from adding conflict resolution interval to tell dhcp server check and clear conflicts once a day and not try to do this every time bumps into conflict over and over again:<br /><br />ip dhcp conflict resolution interval 1440<br /><br /></div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="7575641206147395787">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c7575641206147395787" href="#7575641206147395787">30 August 2012 18:27</a>
              </span>
            </div>
            <div class="comment-content">Great feature, but it seems to be available only in 12.2SRE. Let&#39;s hope it will eventually appear in mainstream IOS releases.<br /><br />Thank you!</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="5885629152759443251">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/10357076188769322020" rel="nofollow">Mariya</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c5885629152759443251" href="#5885629152759443251">24 January 2014 11:49</a>
              </span>
            </div>
            <div class="comment-content">big thank you )))</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2012352126332603705">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2012352126332603705" href="#2012352126332603705">21 October 2014 06:02</a>
              </span>
            </div>
            <div class="comment-content">Easy peesy - thanks Ivan!</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="1715902876219399940">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c1715902876219399940" href="#1715902876219399940">01 June 2015 18:25</a>
              </span>
            </div>
            <div class="comment-content">GREAT!! We&#39;ve just fixed an issue here at the company with your tips. Thanks</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="8803859704696728490">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c8803859704696728490" href="#8803859704696728490">13 October 2015 15:48</a>
              </span>
            </div>
            <div class="comment-content">I just encountered this issue in a VoIP implementation.  Address pool exhaustion after a router reload due to conflict logging.  What I don&#39;t understand is this.  Let&#39;s suppose conflict logging is disabled and the router is reloaded.  What happens when a DHCP client tries to renew an address?  Does the router grant the request and record that as a valid lease?</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="9216519400752312700">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/02955332649862163847" rel="nofollow">Unknown</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c9216519400752312700" href="#9216519400752312700">26 October 2016 22:36</a>
              </span>
            </div>
            <div class="comment-content">Is there a default timer for an IP to be on the conflict zone of DHCP?</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="7586651564356659659">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c7586651564356659659" href="#7586651564356659659">07 November 2016 08:53</a>
              </span>
            </div>
            <div class="comment-content">clear ip dhcp conflict address helped as we could not figure out what was exhausting the dhcp pool.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2062">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow"> Karn</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2062" href="#2062">01 January 2024 06:22</a>
              </span>
            </div>
            <div class="comment-content"><p>Hi Thanks for the clarification.
I have one doubt.</p>

<p>Client uses GARP &amp; DAD to detect those conflicts. Client side detection is assumed better i think as it reduces load on dhcp server.
Will disabling the dhcp conflict on dhcp server be useful if conflict is detected by a client ?</p>
</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="2063">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2063" href="#2063">01 January 2024 09:00</a>
              </span>
            </div>
            <div class="comment-content"><p>If you can safely assume that all clients do DAD detection, that DAD detection works well enough for your needs (false negatives can be fun to troubleshoot), and that you don&#39;t care about the longer setup time repeated DAD might cause, you&#39;re absolutely right.</p>

<p>Unfortunately, I don&#39;t have enough insight into what large-scale production environments are doing these days.</p>
</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
  </ol>

    </div>
  </div>
</div>
