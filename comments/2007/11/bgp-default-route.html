<div class="comments post" id="comments">
  <h4>24 comments:</h4>
  <div class="comments-content">
    <div class="comment-thread">
        <ol>
      <div>
        <li class="comment" id="5630910224971306987">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c5630910224971306987" href="#5630910224971306987">15 November 2007 14:58</a>
              </span>
            </div>
            <div class="comment-content">Depending on just how much memory the router has, this is also a very good solution: http://www.cisco.com/en/US/tech/tk365/technologies_tech_note09186a0080094a83.shtml</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="28151304114684034">
          <!--
          <div class="avatar-image-container">
            <img src="https://lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c28151304114684034" href="#28151304114684034">16 November 2007 08:27</a>
              </span>
            </div>
            <div class="comment-content">The solution on CCO is great to ensure more optimal routing, but it looks like they forgot about the default routing of everything else.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="3255833984950250925">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c3255833984950250925" href="#3255833984950250925">16 November 2007 22:37</a>
              </span>
            </div>
            <div class="comment-content">"ip default-network"  would perhaps be a simpler solution.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="8310997428653698614">
          <!--
          <div class="avatar-image-container">
            <img src="https://lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c8310997428653698614" href="#8310997428653698614">18 November 2007 12:08</a>
              </span>
            </div>
            <div class="comment-content">@anonymous(2): You need another network in the IP routing table for the <I>ip default-network</I> to work. So you have to receive at least a few routes via BGP (to have them pointed toward the ISPs) and then you can use the default-network on a few of them.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2190082270835885356">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2190082270835885356" href="#2190082270835885356">28 November 2007 20:12</a>
              </span>
            </div>
            <div class="comment-content">Instead of typing the destination ip in the route specify the interface as done below.<BR/><BR/>ip route 0.0.0.0 0.0.0.0 serial1/0<BR/>ip route 0.0.0.0 0.0.0.0 serial1/1 250<BR/><BR/>This will ensure that if the interface goes down it will be removed from the routing table, thus no black hole</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="6520916383308166539">
          <!--
          <div class="avatar-image-container">
            <img src="https://lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c6520916383308166539" href="#6520916383308166539">28 November 2007 20:42</a>
              </span>
            </div>
            <div class="comment-content">@anonymous(3): If only life would be so simple ... if you lose the interface, you lose the next-hop as well, so both solutions work. The problem is if you lose the BGP peer, but not the physical interface (as I've written in the post).</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="3618953339757624728">
          <!--
          <div class="avatar-image-container">
            <img src="https://lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/16255579169263597582" rel="nofollow">test_acct</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c3618953339757624728" href="#3618953339757624728">19 October 2008 01:15</a>
              </span>
            </div>
            <div class="comment-content">I know someone in similar situation.  However they use a route server which gives them bgp routes with "next hops" that could change so the hard coding of upstream neighbors may change without notice.  They are not given any default routes.  Is there some way to do the same thing if there are potentially varying peers on the WAN ethernet side. ??</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="3226513793704592489">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">EclecticITGuy</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c3226513793704592489" href="#3226513793704592489">05 September 2009 11:28</a>
              </span>
            </div>
            <div class="comment-content">I had a question similar to this, but it involved 2 routers that were multi-homed to both ISP&#39;s in a full-mesh.  I know this is probably a bit overkill, but I was trying to setup the most fault-redundant configuration possible that would survive both a router problem, as well as a service problem.  In this setup, ISP1 is successfully sending a default-route to R1, but I&#39;m noticing that R1 is redistributing that static route back into BGP and sending it to ISP2, which now has a default static route pointing to R1.  I know I could filter this out, but my question is would there be a better way of doing this?</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="7678048946797450840">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c7678048946797450840" href="#7678048946797450840">11 September 2009 19:58</a>
              </span>
            </div>
            <div class="comment-content">I hope your observation is from a test lab. There are two serious mistakes in your setup:<br /><br />#1 - As a multihomed customer DO NOT EVER propagate transit routes between upstream ISPs.<br />#2 - As an ISP, DO NOT EVER accept routes not originating in the customer&#39;s AS from the customer.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="1191816387988360646">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c1191816387988360646" href="#1191816387988360646">10 December 2009 12:34</a>
              </span>
            </div>
            <div class="comment-content">#1 is true but #2 what if that customer also offers transit for his customers :)</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2629895006871815100">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2629895006871815100" href="#2629895006871815100">10 December 2009 13:23</a>
              </span>
            </div>
            <div class="comment-content">Then he&#39;s not a regular customer, but an ISP buying transit (or a reseller of your services or whatever) and you should treat him differently. At least I hoped that would be somewhat obvious.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="1906834562800685905">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">Olivier Cahagne</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c1906834562800685905" href="#1906834562800685905">19 April 2010 09:52</a>
              </span>
            </div>
            <div class="comment-content">Ivan, when you say &quot;12.2SRC announce BGP default route like any other network&quot;, do you know which DDTS track this ? I&#39;ve tested behaviour with 7600/SRA, SRD3, SXF17a and behaviour is the same: BGP default route is announced.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="1937585368271996193">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c1937585368271996193" href="#1937585368271996193">19 April 2010 10:13</a>
              </span>
            </div>
            <div class="comment-content">No idea, it was probably fixed quite a while ago.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="329132310661128606">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">Mark Paquette</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c329132310661128606" href="#329132310661128606">13 July 2010 18:44</a>
              </span>
            </div>
            <div class="comment-content">Interesting point - in this scenario, it would pay to BGP peer to the internet-facing interface (so, ebgp-multihop 3 or somecrap) ... so if the internet-facing interface goes down, so does the eBGP peer.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="1278819500250339163">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c1278819500250339163" href="#1278819500250339163">13 July 2010 18:47</a>
              </span>
            </div>
            <div class="comment-content">If you have direct EBGP connection and the interface goes down, the EBGP session is immediately reset due to fast failover (by default; adjustable). My IP Corner article on BGP convergence has more details:<br /><br />http://www.nil.si/ipcorner/DesigningBGPNetworks/</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="1513947658365538938">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c1513947658365538938" href="#1513947658365538938">20 August 2011 21:05</a>
              </span>
            </div>
            <div class="comment-content">Good article! Thanks! But I have a question: customer receive two default routes from ISP1 ans ISP2, How can I (customer) create less priority for default route from ISP2?</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="3879360255808668885">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c3879360255808668885" href="#3879360255808668885">21 August 2011 06:56</a>
              </span>
            </div>
            <div class="comment-content">Using BGP weights or local preference. This video might help:<br /><br />http://www.youtube.com/watch?v=zFliAojRi2E</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="6402436111007787959">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">Marko</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c6402436111007787959" href="#6402436111007787959">06 December 2011 20:37</a>
              </span>
            </div>
            <div class="comment-content">Hi Ivan,<br /><br />Suppose ISP 1 lose connectivity to upstream provider,using default originate command SP1 will continue to advertise default route to customer, and if customer prefers ISP1, it will lose connectivity to internet even if customer has  less preffered default route from ISP2. Am I right?</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="3435241846484069813">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c3435241846484069813" href="#3435241846484069813">07 December 2011 08:05</a>
              </span>
            </div>
            <div class="comment-content">The ISPs should use &quot;responsible default route generation&quot;:<br /><br />http://blog.ioshints.info/2011/09/responsible-generation-of-bgp-default.html</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="6297798133199276763">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">Warren Sullivan</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c6297798133199276763" href="#6297798133199276763">21 December 2011 06:24</a>
              </span>
            </div>
            <div class="comment-content">Excellent article, thanks, cleared up a few doubts!</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="3343183113097565180">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c3343183113097565180" href="#3343183113097565180">27 July 2012 18:02</a>
              </span>
            </div>
            <div class="comment-content">Hello Ivan,<br /><br />I have the same issue like discussed above. My core router see the internet over 2 ISPs but when I removed the default route I lost the connection to a lot of websites. A part of the internet is reachable. From router I can ping everything but not from networks behind it. Do you have any idea?<br /><br />Regards<br />Stellar</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="3237467618458181228">
          <!--
          <div class="avatar-image-container">
            <img src="https://lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c3237467618458181228" href="#3237467618458181228">27 July 2012 18:13</a>
              </span>
            </div>
            <div class="comment-content">The usual root cause of &quot;I can ping from the router, but not from the hosts&quot; problem is that the subnet the hosts reside in is not visible from the rest of the network. <br /><br />In your case, that would mean you&#39;re not advertising your IPv4 prefix to the rest of the Internet. Does this make sense?</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="3743684099086820294">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c3743684099086820294" href="#3743684099086820294">27 July 2012 18:53</a>
              </span>
            </div>
            <div class="comment-content">I am advertising all my prefix and can see them from more a one looking glas. now everything running good but when I remove the default gateway I got the issue. When I add the default gateway back the issue remains until I reboot the router :(</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="1940676239929472792">
          <!--
          <div class="avatar-image-container">
            <img src="https://lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/17011903072886263727" rel="nofollow">Unknown</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c1940676239929472792" href="#1940676239929472792">01 December 2013 14:53</a>
              </span>
            </div>
            <div class="comment-content">What about use SLA for those two default routes Ivan?</div>
          </div>
        </li>
      </div>
  </ol>

    </div>
  </div>
</div>
