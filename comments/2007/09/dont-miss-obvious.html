<div class="comments post" id="comments">
  <h4>13 comments:</h4>
  <div class="comments-content">
    <div class="comment-thread">
        <ol>
      <div>
        <li class="comment" id="8883508441277676023">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c8883508441277676023" href="#8883508441277676023">03 September 2007 02:32</a>
              </span>
            </div>
            <div class="comment-content">Always a good idea to start troubleshooting from the lowest layer. Check spanning tree, duplex, speed, interface counters, run TDR before moving onto a higher layer.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2615808260203527197">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/06157582400357366170" rel="nofollow">Richard</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2615808260203527197" href="#2615808260203527197">05 September 2007 01:28</a>
              </span>
            </div>
            <div class="comment-content">Don't forget to enable Spanning-Tree BPDU Guard on these ports as well.  It *will* save you from some future headaches.<BR/><BR/><A HREF="http://ciscocert.wordpress.com/2006/04/14/configuring-portfast-and-bpdu-guard/" REL="nofollow">Linky</A></div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2893580181984680127">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2893580181984680127" href="#2893580181984680127">06 September 2007 23:28</a>
              </span>
            </div>
            <div class="comment-content">Better yet would be the global config command "spanning-tree portfast default", which will turn on portfast on all switched ports and keep the interface configurations a little bit cleaner.  You can verify portfast default command is in there by using the "show spanning-tree summary" command.<BR/><BR/>- Bill</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2451867049015995190">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2451867049015995190" href="#2451867049015995190">07 September 2007 08:22</a>
              </span>
            </div>
            <div class="comment-content">The <B>spanning-tree portfast default</B> command is unfortunately not available on all platforms (my 1812 router with 12.4(15)T doesn't have it).</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="1185545987683372525">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/02461729347287710031" rel="nofollow">Aaron</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c1185545987683372525" href="#1185545987683372525">25 September 2007 17:15</a>
              </span>
            </div>
            <div class="comment-content">I don't know what IOS versions use it, but the "switchport host" command has saved me us a lot of negotiation time.  Any port that's not a trunk gets this command, which actually sets the "spanning-tree portfast" command, turns off etherchanneling, and sets the mode to "access".</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="8703455863404552807">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c8703455863404552807" href="#8703455863404552807">28 September 2007 17:52</a>
              </span>
            </div>
            <div class="comment-content">@Aaron: your command must be in one of the Catalyst IOS images. It doesn't work for me on a 1800 router running 12.4(15)T.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="3350912217390264797">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c3350912217390264797" href="#3350912217390264797">04 November 2007 00:55</a>
              </span>
            </div>
            <div class="comment-content">I get the dhcp failures on wakeup on an 1801w (wlan and switch ports).<BR/><BR/>I have<BR/><BR/>interface Dot11Radio0<BR/> description Wireless<BR/> no ip address<BR/> no ip redirects<BR/> ip accounting access-violations<BR/> !<BR/> encryption mode ciphers aes-ccm<BR/> !<BR/> ssid Wireless<BR/> !<BR/> speed basic-1.0 basic-2.0 basic-5.5<BR/> 54.0<BR/> station-role root<BR/> world-mode dot11d country GB indoor<BR/> bridge-group 1<BR/> bridge-group 1 subscriber-loop-contr<BR/> bridge-group 1 spanning-disabled<BR/> bridge-group 1 block-unknown-source<BR/> no bridge-group 1 source-learning<BR/> no bridge-group 1 unicast-flooding<BR/><BR/>and<BR/><BR/>spanning-tree portfast bpduguard<BR/><BR/>and the fa ports are set up by SDM as part of the BVI<BR/><BR/>but my hosts often fail to get a connection on waking.<BR/><BR/>What next?!</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="4023494991386101430">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c4023494991386101430" href="#4023494991386101430">04 November 2007 16:42</a>
              </span>
            </div>
            <div class="comment-content">The <B>bridge-group spanning-disabled</B> disables spanning tree only on the WLAN. The <B>spanning-tree portfast bpduguard</B> disables a port if someone is sending BPDUs on that port, but there's nothing in your config (as far as you've included it) that would disable spanning tree (and associated startup delay) on FastEthernet ports. You need <B>spanning-tree portfast</B> on each FastEthernet interface.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="4508943721767009523">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c4508943721767009523" href="#4508943721767009523">05 November 2007 12:46</a>
              </span>
            </div>
            <div class="comment-content">Thanks.  The <B>spanning tree</B> command is not available on the fa1+ ports of this 1801w.  Perhaps the answer is to attach it to the Vlan interface?<BR/><BR/>What I find perplexing is that the DHCP seems ropey both on the Wireless interfaces (although that could be to do with security settings, etc, I suppose) and the LAN interface with a Mac OS X Tiger.  Wired Windows machines seem less prone to DHCP failures.<BR/><BR/>A more complete listing of my setup, before I had added the bpduguard command, is at http://www.dslreports.com/forum/remark,18550344<BR/><BR/>Suggestions for a debugging strategy would be most welcome.<BR/><BR/>PS: DHCP is provided not by the router, but by a server attached to fa1.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="4934290533270379709">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c4934290533270379709" href="#4934290533270379709">05 November 2007 23:38</a>
              </span>
            </div>
            <div class="comment-content">Sorry. My bad.  The spannig-tree portfast is indeed available.<BR/><BR/>I'll see what difference it makes; I occasionally forget to switch off the wireless on a pc when I plug it into the net.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="3579035194374250042">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c3579035194374250042" href="#3579035194374250042">06 November 2007 00:20</a>
              </span>
            </div>
            <div class="comment-content">Do I also need to do a <B>switchport mode access</B> to get portfast to take?</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="5402810758103719991">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c5402810758103719991" href="#5402810758103719991">07 November 2007 12:23</a>
              </span>
            </div>
            <div class="comment-content"><I>Do I also need to do a <B>switchport mode access</B> to get portfast to take?</I><BR/><BR/>That helps :) And since you won't use trunking on any of those ports, it also prevents configuration errors.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="6343778094102572961">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c6343778094102572961" href="#6343778094102572961">08 November 2007 13:17</a>
              </span>
            </div>
            <div class="comment-content">All this may be a good subject for a further article.<BR/><BR/>I note that <B>switchport mode access</B> does not show up in the config, which presumably means that it is the default.<BR/><BR/>There are, however, potential elephant traps, especially for someone like me who is hazy on this stuff.  For example:<BR/><BR/>i) if I access my router via both ethernet and wireless, what should happen if I use only access mode?<BR/><BR/>ii) if I use different VLANs to distingish different SSIDs / classes of user, do i need to use trunking, or not?</div>
          </div>
        </li>
      </div>
  </ol>

    </div>
  </div>
</div>
