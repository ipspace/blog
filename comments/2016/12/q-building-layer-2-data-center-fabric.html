<div class="comments post" id="comments">
  <h4>18 comments:</h4>
  <div class="comments-content">
    <div class="comment-thread">
        <ol>
      <div>
        <li class="comment" id="3762837035398554554">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Andrea</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c3762837035398554554" href="#3762837035398554554">07 December 2016 11:12</a>
              </span>
            </div>
            <div class="comment-content">Just for completeness, if one is keen to a little more additional complexity (but not that much if compared with VXLAN/EVPN) you can use VPLS/VPWS over MPLS.<br />This is a fair standard and should be available on most platform, almost on any vendor.<br /></div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="8960008061100785246">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c8960008061100785246" href="#8960008061100785246">07 December 2016 14:01</a>
              </span>
            </div>
            <div class="comment-content">The only major data center switching vendor with decent MPLS support on reasonably-priced switches is Juniper. Arista has no real MPLS control plane, Cisco has MPLS on Nexus 7000...</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="4313189299303893292">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Andrea</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c4313189299303893292" href="#4313189299303893292">07 December 2016 15:48</a>
              </span>
            </div>
            <div class="comment-content">Actually also HPE 5900 supports it, and seems to be very cheap.<br /><br />Also they have no license requirement for any feature that is supported on the box.<br /><br />Disclaimer: I&#39;ve used many of them, but never configured MPLS/VPLS. From the docs, it works and is supported.</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="5841848252049146222">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/04524005885569437211" rel="nofollow">Ammiraglio Tofonoto</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c5841848252049146222" href="#5841848252049146222">07 December 2016 12:40</a>
              </span>
            </div>
            <div class="comment-content">&quot;Our systems integrator partner expressed a view that VXLAN is still very new&quot; - my personal advice, change immediately your system integrator. VXLAN has been around for 4-5 years, it is not &quot;very new&quot;. Ivan wrote the first post on VXLAN in August 2011 ! But I have a more philosophical question, why would you need an L2 transport ? Isn&#39;t much better to build an L3-only Data Center, using well known and well proven standards, and getting rid of all terrible L2 stuff ? OpenContrail operating in L3-only mode is my dream, but it needs a better support, unfortunately with current support it is not realistic to run it in production networks !!!</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="1984915150871635748">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c1984915150871635748" href="#1984915150871635748">07 December 2016 14:02</a>
              </span>
            </div>
            <div class="comment-content">OMG, we&#39;re getting old... Haven&#39;t realized it&#39;s been THAT long.<br /><br />As for L2 transport, as long as virtual switches keep pretending the earth is flat (I&#39;m looking at VMware ;), we&#39;ll be asked to provide it.</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="5793139904021683769">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/04524005885569437211" rel="nofollow">Ammiraglio Tofonoto</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c5793139904021683769" href="#5793139904021683769">07 December 2016 15:02</a>
              </span>
            </div>
            <div class="comment-content">More than right Ivan, but just think about how much the world without MAC addresses and L2 switches would be easier (no ARP, no broadcast storms, no STP, and so forth) !!! Networks would be much simpler to design and operate (but probably our friends in Juniper and Cisco would not be so happy ...).</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="5216018885977205688">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c5216018885977205688" href="#5216018885977205688">07 December 2016 15:22</a>
              </span>
            </div>
            <div class="comment-content">HPE 5940 now too supports VXLAN/EVPN ;)</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="4827780952325648349">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://comeroutewithme.com" rel="nofollow">Carl</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c4827780952325648349" href="#4827780952325648349">07 December 2016 17:00</a>
              </span>
            </div>
            <div class="comment-content">My $0.02 on ACI:<br /><br />The learning curve is no different than anything else - if you haven&#39;t done EVPN, then you&#39;d have to learn that too, just in ACI it can be admittedly frustrating since you&#39;re trying to figure out a GUI that should be &quot;simple&quot; instead of a new &quot;complex&quot; technology. (FWIW I think its a decent - not great - GUI, but I&#39;m used to it at this point)<br /><br />I also think ACI is just like anything else -- there are no rails put up to keep you from doing stupid shit! You can do lots of dumb things with  PBR and VACLs and stupid things like that and ACI is no different. On the whole though I think (especially from 1.2+) its a very solid platform that if nothing else handles firmware management and fault reporting quite nicely (I think its great for lots more than that, but at a minimum I think those are two nice aspects).</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="2698056489373334957">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/10562240567667879482" rel="nofollow">lcw</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2698056489373334957" href="#2698056489373334957">09 December 2016 21:44</a>
              </span>
            </div>
            <div class="comment-content">I tell people that Cisco VXLAN/EVPN and ACI fabrics cost and perform virtually the same. It&#39;s the same HW after all.<br /><br />VXLAN/EVPN gives you a thousand manual config points, each of which can crash your network in wondrous and unpredictable ways. You&#39;ll get really good at troubleshooting VXLAN/EVPN, and will master things like &quot;symmetric IRB&quot; and &quot;bud nodes&quot; and BGP type-2 advertisements. And, you will learn the hard way how not to engineer and secure the underlay, how to not do code upgrades, what not to do with VPC, etc. (Cisco highly recommends you buy Nexus Fabric Manager software to help smooth over some of that complexity)<br /><br />In contrast, ACI is the &quot;easy button.&quot; An optimized L2/L3 fabric for dozens or hundreds of leaf switches, all centrally managed, usable as fast as you can rack and cable the leaves. For L2 VLANs and L3 SVI&#39;s, ACI is goofproof. vCenter integration is easy, free, and immediately useful. It&#39;s only when you get into service graphs and contracts that ACI gives you enough rope to hang yourself.<br /><br />ACI has a learning curve, but it&#39;s at a high level, it encourages consistency, and it yields immediate value in terms of DC-wide visibility.   VXLAN/EVPN&#39;s learning curve is all about the nuts-and-bolts of the forwarding technology -- MAC, ARP, VNIs-to-VLAN mapping, uplink versus downlink ports, BGP RR&#39;s, etc. With VXLAN/EVPN, it&#39;s easy for the undisciplined engineer to get lost, lose site of the high level, and build an unsupportable monster.</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="4785000346078343366">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/06314916176190119200" rel="nofollow">A Network Artist</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c4785000346078343366" href="#4785000346078343366">08 December 2016 16:09</a>
              </span>
            </div>
            <div class="comment-content">Well as a Network Engineer or Architect I believe the right question should be How L2 vs L3 fabric differs and what are Pros and Cons of each approach. <br /><br />People have been running Layer 2 only DCs for ages, some implementations were broken and others were done little cleaner.<br /><br />We should also remember that sometimes even the most clean solution on paper or technically also fails at some point, so there are always known unknowns and unknown unknowns :)<br /><br />Last week encountered a OTV bug causing Data Centre meltdown.<br /><br />Another important question would be how you migrate your current fat DC to New DC fabric with minimal or no disruption.<br /><br />Here is my take around some of considerations when it comes to DC fabrics and don&#39;t think mentioned VxLAN or L2 vs L3 fabric any where :)<br /><br />http://deepakarora1984.blogspot.in/2016/12/data-centre-fabric-design-considerations.html<br /><br />HTH...<br />Evil CCIE</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="838749833604917996">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c838749833604917996" href="#838749833604917996">09 December 2016 09:07</a>
              </span>
            </div>
            <div class="comment-content">While I totally agree with your take on the subject, unfortunately many engineers don&#39;t have the luxury of starting the discussion at that point, and once you&#39;re faced with &quot;build us a L2 fabric&quot; decision made without even involving the networking team in the process, you have to find a solution that will do the least damage ;)</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="8761806827747828363">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Dennis</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c8761806827747828363" href="#8761806827747828363">11 December 2016 13:16</a>
              </span>
            </div>
            <div class="comment-content">As Ivan wrote MLAG seems dated, however what is the opinion for a very small deployment?<br />I&#39;m talking about 4 meshed core switches (10g/40g), 2 per DC with private redundant fiber between DCs.<br />ESX hosts will be directly connected and there will be a few L2 only switches for physical hosts. Those connections should be redundant towards both of the core switches per DC.<br /><br />As this is based on Juniper gear what would be the advantage of using VXLAN + EVPN vs. MC-LAG? I think for using BGP there is an extra license required and it seems a little more complicated to setup and operate than going with MC-LAG between the two core switches in each DC. Also note there is no NSX license available so an overlay would have to be terminated on the core switches.</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="4333631650582611750">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c4333631650582611750" href="#4333631650582611750">11 December 2016 16:46</a>
              </span>
            </div>
            <div class="comment-content">I did a design almost exactly like this with a customer a few months ago. In the end we decided to go for VXLAN between data centers.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="4012327572744076116">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Dennis</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c4012327572744076116" href="#4012327572744076116">11 December 2016 19:22</a>
              </span>
            </div>
            <div class="comment-content">Thanks for the quick response Ivan! What is the advantage of using VXLAN vs LACP between DCs in that scenario?</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2925104782945772435">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2925104782945772435" href="#2925104782945772435">11 December 2016 20:15</a>
              </span>
            </div>
            <div class="comment-content">You don&#39;t pretend two boxes are a single device (and thus are less likely to hit &quot;interesting&quot; bugs).</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="1455377292938335838">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="http://personales.unican.es/vallejoe/" rel="nofollow">Enrique Vallejo</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c1455377292938335838" href="#1455377292938335838">14 December 2016 11:53</a>
              </span>
            </div>
            <div class="comment-content">As part of a research project we studied the use of Ethernet in large HPC systems. In addition to the typical VM mobility, we found a couple of requirements for large L2 domains in such environments: transport protocols that don&#39;t run on top of IP (such as RoCEv1 or Open-MX) and service announcement mechanisms using L2 broadcast (again, such as Open-MX). I guess you would label them as &quot;wrongly designed stacks&quot;, but the thing is that they are used.<br /><br />In our system we considered low-diameter topologies to reduce power consumption, requiring per-packet non-minimal adaptive routing. This is not supported by any of the four &quot;commodity&quot; alternatives that you detail, so we proposed an extension to OpenFlow switches to be able to react in micro-second time (as you argue in other post, apart from being dead, OpenFlow does not react quickly). If you have any interest, we have a more detailed discussion <a href="http://personales.unican.es/vallejoe/Publications/Benito%20-%20HiPC&#39;15%20-%20On%20the%20Use%20of%20Commodity%20Ethernet%20Technology%20in%20Exascale%20HPC%20Systems.pdf" rel="nofollow">in the paper</a>. <br /></div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="1647918213488473415">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c1647918213488473415" href="#1647918213488473415">14 December 2016 15:43</a>
              </span>
            </div>
            <div class="comment-content">Hi Enrique,<br /><br />Thanks for the comment. I&#39;m positive there are tons of niche environments with special requirements (yours is obviously one of them); I&#39;m just continuously upset that we get &quot;need large L2 domains&quot; by default because someone didn&#39;t even consider the impact of what they want to have.<br /><br />What you&#39;re proposing definitely makes sense in your particular environment, but I don&#39;t expect it to be implemented anytime soon (not sure whether you could do it yourself using Switch Light OS as the baseline). It might be better to work with a more traditional Linux-based switch and control the forwarding rules (MAC / TCAM tables) from your own userspace agent.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="7312455514624719667">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="http://personales.unican.es/vallejoe/" rel="nofollow">Enrique Vallejo</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c7312455514624719667" href="#7312455514624719667">14 December 2016 18:01</a>
              </span>
            </div>
            <div class="comment-content">That&#39;s a nice idea, depending on its response time it could be feasible. We will explore it, thanks!</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
  </ol>

    </div>
  </div>
</div>
