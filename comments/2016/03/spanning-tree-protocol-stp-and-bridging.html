<div class="comments post" id="comments">
  <h4>9 comments:</h4>
  <div class="comments-content">
    <div class="comment-thread">
        <ol>
      <div>
        <li class="comment" id="4741560440372431235">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Christoph</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c4741560440372431235" href="#4741560440372431235">01 March 2016 13:16</a>
              </span>
            </div>
            <div class="comment-content">&gt;&gt;&quot;or if a switch loses its control plane (for example, due to a memory leak)&quot;<br /><br />Perfect example for this:<br />Any Cisco router with EtherSwitch-based (HWIC-...ESW, EHWIC-...ESG and associated ISR routers) switchports. All ports on a module are one single broadcast domain &amp; are up/up at power on not matter what was configured - until IOS is running has parsed the configuration.<br /></div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2352971840170695842">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="http://blog.reissromoli.com" rel="nofollow">Tiziano</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2352971840170695842" href="#2352971840170695842">01 March 2016 23:51</a>
              </span>
            </div>
            <div class="comment-content">Ivan, I think it&#39;s time you write one more post on STP. I humbly suggest this title &quot;The Death of Spanning Tree Protocol&quot;...</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="566898534362966727">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c566898534362966727" href="#566898534362966727">03 March 2016 08:31</a>
              </span>
            </div>
            <div class="comment-content">Sadly, until everyone stops the bad practices of allowing bridging across multiple interfaces (including Windows and Linux hosts), or implements a proper signaling protocol (which even the data center fabric vendors can&#39;t really agree on), we still need STP to detect forwarding loops.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2490279503026508893">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2490279503026508893" href="#2490279503026508893">03 March 2016 09:57</a>
              </span>
            </div>
            <div class="comment-content">&quot;It doesn’t matter if you’re doing routing on layer-2 (TRILL, SPB) or on layer-3 (IP) – you need a proper routing protocol to use alternate paths.&quot;<br /><br />I thought that load balancing at Layer 2 as implemented in TRILL has nothing to do with Layer 3 load balancing. Having Layer 2 load balancing is about having greater capacity i.e. using redundant links for traffic.<br />Layer 3 load balancing about using several L3 gateways - we do not care how layer 2 traffic is distributed at the physical layer (balanced or not). It&#39;s different topic how the routing protocols cope with multiply same L3-cost paths<br /><br />If you could comment on your original statements to clarify what you are had in mind.<br />Bogdan Golab</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2762578152904009063">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2762578152904009063" href="#2762578152904009063">03 March 2016 11:57</a>
              </span>
            </div>
            <div class="comment-content">Apart from the flooding behavior (and summarization implications) layer-2 and layer-3 forwarding are today just two sides of the same coin.<br /><br />Also, you have to start thinking in layers and not agglutinate multiple problems into a bigger mess (see also RFC 1925 section 2.5). </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="1421393948071905341">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c1421393948071905341" href="#1421393948071905341">05 March 2016 12:02</a>
              </span>
            </div>
            <div class="comment-content">Probably I am not smart enough to understand it;)<br />Bogdan Golab</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="8769026229678414993">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/00439180073297788221" rel="nofollow">Kerry Thompson</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c8769026229678414993" href="#8769026229678414993">01 March 2016 23:57</a>
              </span>
            </div>
            <div class="comment-content">The biggest problem with STP that I&#39;ve seen is when people who aren&#39;t exactly experts configure new switches and then disable spanning tree - because they heard from the experts that it&#39;s bad.<br />I try to tell them that spanning tree is like smoke detectors - yes, they can be annoying and sometimes need maintenance, but don&#39;t just turn them off.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="7506372020907291075">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Mario</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c7506372020907291075" href="#7506372020907291075">02 March 2016 04:00</a>
              </span>
            </div>
            <div class="comment-content">I think STP (and it&#39;s various kludges) are here to stay, and will not be going anywhere anytime soon. Yes, a pure layer 3 solution would be a nice goal for many (after you weigh the pros and cons - ie: VM mobility, cost of L3 ToR switch, staff experience, etc). Until then, as Ivan had mentioned, there are always alternatives which may require a forklift upgrade in hardware (TRILL, Fabricpath, SPB).. or wait for the good &#39;ol SDN market/products to mature and prove themselves out (hopefully not in the same track record as IPv6). I for one will always try to minimize any L2 STP or bridge domains as far away from the core as possible, down to a pair of ToR switches, or if possible at the virtual switch edge. If it&#39;s one thing I&#39;ve learned throughout these very informative blog posts, it&#39;s that you should never extend that L2 domain across the DC, STP will bite you sooner than later.. it&#39;s just not worth the risk. Use OTV (point solution), or better yet have L3 between DC&#39;s in place and take advantage of some form of scripting/automation for VM mobility. </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="1947289460426927261">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/07985346761439657130" rel="nofollow">Bela</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c1947289460426927261" href="#1947289460426927261">02 March 2016 07:33</a>
              </span>
            </div>
            <div class="comment-content">Even that STP has some challenges, never ever turn it off. You might not know who creates a loop accidentally. Let it be a misconnected cable or a booting device with strange port interconnects temporarily. STP is there as a last resort safety tool.<br />I have seen big meltdowns when someone turned off STP. Once it was not even in the Ethernet switches (since they were oversized and could cope with the increased traffic), but in the connected firewalls. Whoever it has stopped the air travel for a half a day in a whole country. So be careful!<br /><br />The good practice is to keep the STP domain as small as possible. And remember: STP was designed originally for maximum 7 hops and few switches and some dozens of host devices in mind. It is definitely not designed for connecting big data centers into a single bridge domain. <br /><br />Do not use something for a use case it was not design for and not fully tested and analyzed...<br /><br />And do not forget, if you create large bridge domains you also created large error domains. Cut-through switching is a tool for distributing and amplifying errors...<br /></div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="1931589443157448166">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/14615081241229714383" rel="nofollow">Antonio Ojea</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c1931589443157448166" href="#1931589443157448166">02 March 2016 07:44</a>
              </span>
            </div>
            <div class="comment-content">I&#39;d like to add unidirectional links to the list of STP problems, this can happen because a bad transceiver or a fiber is broken or bad manipulated, and only vendor kludges can solve you, adding an intervendor compatibility problem </div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="435894075991917835">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c435894075991917835" href="#435894075991917835">03 March 2016 08:31</a>
              </span>
            </div>
            <div class="comment-content">Thank you. Added</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="556930115677446174">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="http://l33.fr" rel="nofollow">Blake</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c556930115677446174" href="#556930115677446174">08 March 2016 11:08</a>
              </span>
            </div>
            <div class="comment-content">802.1aq shortest path bridging was a great idea, implemented about 10 years too late...</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="7670204373921686576">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c7670204373921686576" href="#7670204373921686576">08 March 2016 11:11</a>
              </span>
            </div>
            <div class="comment-content">Disagree. Bridging was never a good (let alone great) idea. However, among all possible options, 802.1aq or TRILL are the least horrible.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2424746577624069642">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Marian Ďurkovič</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2424746577624069642" href="#2424746577624069642">06 April 2016 19:48</a>
              </span>
            </div>
            <div class="comment-content">802.1aq does not solve lot of the serious problems and still runs MSTP through the network. Its loadbalancing over parallel links is at best weird and overall usefulness of 802.1aq is very questionable. On the other hand, TRILL effectively removes all typical L2 problems, since it in fact transparently converts L2 network into L3 routed domain - ingress switch packs incoming L2 packet into TRILL container, TRILL network routes the container using usual L3 routing principles, protocols (IS-IS) and safety belts (TTL, RPF check) and the egress switch discards the container and sends L2 packet to its final destination.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="5758753081209775541">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c5758753081209775541" href="#5758753081209775541">06 April 2016 20:10</a>
              </span>
            </div>
            <div class="comment-content">Marian, I would suggest that before comparing two technologies you get your facts right. While your description of TRILL data plane is correct, the rest of your claims aren&#39;t.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="1149550752551694940">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Marian Ďurkovič</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c1149550752551694940" href="#1149550752551694940">08 April 2016 09:50</a>
              </span>
            </div>
            <div class="comment-content">Ivan, I have hands-on experience with both. OK I should have formulated it more precisely - so I better copy the whole paragraph from RIPE TRILL tutorial: <br /><br />Spanning Tree:<br />TRILL RBridges block spanning tree and provide a new level above bridging but below Layer 3 routing. <br />SPB bridges run at the bridging level. They continue to maintain a spanning tree (or multiple spanning trees) hooking together any attached bridging to produce one huge spanning tree. Frames are forwarded by spanning tree or by shortest path depending on VLAN.<br /><br />And regarding load-balancing over parallel paths - TRILL uses standard L3 per-hop routing decisions including usual ECMP support, while 802.1aq computes multiple trees by XORing SYSIDs with different bitmasks which produces suboptimal results and doesn&#39;t consider per-hop specifics.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2089488772875501469">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2089488772875501469" href="#2089488772875501469">08 April 2016 14:25</a>
              </span>
            </div>
            <div class="comment-content">Do keep in mind that the RIPE TRILL tutorial was delivered by a TRILL evangelist, so you can&#39;t possibly hope for an unbiased view.<br /><br />As I said, your understanding of the data planes is correct, but I disagree with the control plane summary. In most cases the fabric switches would run STP with the access layer for numerous reasons, and you could either integrate the fabric with STP or make the fabric switches root bridges in the access layer.<br /><br />Also, while the ECMP argument is valid, I don&#39;t think there&#39;s any significant difference between the two mechanisms in leaf-and-spine fabrics.<br /><br />Obviously, if you have real-life experience please share it.<br /><br />Finally, I did cover both in the last session of the leaf-and-spine fabric designs webinar 2 days ago, so I&#39;m a bit fluent on the differences ;)</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="8126850030525468119">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Marian Ďurkovič</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c8126850030525468119" href="#8126850030525468119">08 April 2016 20:44</a>
              </span>
            </div>
            <div class="comment-content">Well, large STP domains are major problem in L2 which SPB doesn&#39;t solve. TRILL&#39;s approach of removing STP from the core and limiting it to smallest possible islands is IMHO much safer.<br /><br />Yes, in leaf&amp;spine fabrics, SPB&#39;s weird load-balancing approach gives similar results - as long as all links are up. But try to disconnect one of the links... And the real fun starts with more complex / arbitrary topologies ;-)<br /></div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="9014053307736805223">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Robert Thomson</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c9014053307736805223" href="#9014053307736805223">09 March 2016 04:01</a>
              </span>
            </div>
            <div class="comment-content">I don&#39;t have strong feelings either way on spanning tree but I did have an expectation that it would be on by default for any switch I purchased.  Cisco Ethernet Switch modules for the ISR4K have spanning tree turned off by default. Let the buyer beware. http://www.cisco.com/c/en/us/products/collateral/routers/3900-series-integrated-services-routers-isr/data_sheet_c78-612808.html</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="1129">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow"> Katoomba</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c1129" href="#1129">01 April 2022 11:18</a>
              </span>
            </div>
            <div class="comment-content"><p>&quot;unidirectional links&quot; cause STP problems? Well they do if you don&#39;t configure UDLD on your STP links. So that is a configuration problem. It isn&#39;t STP&#39;s fault.</p>
</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="1132">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c1132" href="#1132">02 April 2022 04:03</a>
              </span>
            </div>
            <div class="comment-content"><p>STP has no concept of adjacencies, and treats lack of incoming BPDUs as a permission to use the link for forwarding, so I would say we&#39;re talking about a suboptimal protocol design.</p>

<p>UDLD is just a vendor-specific kludge solving a problem that shouldn&#39;t have existed in the first place.</p>

<p>Obviously you could claim that &quot;if you haven&#39;t configured UDLD, it&#39;s your fault that STP brought down your network&quot;, but the root cause for the need to have two protocols configured when one should do is still STP.</p>
</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
  </ol>

    </div>
  </div>
</div>
