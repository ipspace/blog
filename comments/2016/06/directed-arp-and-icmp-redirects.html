<div class="comments post" id="comments">
  <h4>11 comments:</h4>
  <div class="comments-content">
    <div class="comment-thread">
        <ol>
      <div>
        <li class="comment" id="3877614326738701635">
          <!--
          <div class="avatar-image-container">
            <img src="https://lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/17010235609440782735" rel="nofollow">Josh Galvez</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c3877614326738701635" href="#3877614326738701635">15 June 2016 16:23</a>
              </span>
            </div>
            <div class="comment-content">ICMP Redirects are something that cause packets to be punted to CPU on the Brocade MLXe platform, and in almost every situation should be globally disabled.  Brocade has interpreted the RFC to indicate that if a packets arrives and leaves the same physical interface a redirect should be sent, ignoring if they are different vlans, ve&#39;s, logical interfaces, etc.  It&#39;s not something needed or wanted in modern networks. (http://puck.nether.net/pipermail/foundry-nsp/2006-December/000784.html)</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="949540889651972371">
          <!--
          <div class="avatar-image-container">
            <img src="https://lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c949540889651972371" href="#949540889651972371">16 June 2016 09:11</a>
              </span>
            </div>
            <div class="comment-content">&quot;ICMP redirects cause packets to be punted to CPU&quot; &lt;&lt; That&#39;s true for every platform I know. It&#39;s really expensive to build hardware that would be able to send ICMP redirect replies.</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="957529103441488990">
          <!--
          <div class="avatar-image-container">
            <img src="https://lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/01604817518401015592" rel="nofollow">Unknown</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c957529103441488990" href="#957529103441488990">16 June 2016 00:17</a>
              </span>
            </div>
            <div class="comment-content">About the ip route command on Linux, the default behaviour is to show the main routing table.<br />you can view other table with ip route show table xxxx (example : xxxx = default) or ip route show cache ...</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="583723269999167348">
          <!--
          <div class="avatar-image-container">
            <img src="https://lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/01604817518401015592" rel="nofollow">Unknown</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c583723269999167348" href="#583723269999167348">16 June 2016 00:18</a>
              </span>
            </div>
            <div class="comment-content">More here: http://linux-ip.net/html/tools-ip-route.html</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="8346090247631870704">
          <!--
          <div class="avatar-image-container">
            <img src="https://lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c8346090247631870704" href="#8346090247631870704">16 June 2016 09:12</a>
              </span>
            </div>
            <div class="comment-content">Thank you... and this is how I&#39;ll slowly build my Linux skills ;))</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="8573604575768821173">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c8573604575768821173" href="#8573604575768821173">16 June 2016 08:37</a>
              </span>
            </div>
            <div class="comment-content">Sure looks like there is a bug in iputils/ping in ubuntu trusty:<br /><br />http://bazaar.launchpad.net/~ubuntu-branches/ubuntu/trusty/iputils/trusty-updates/view/head:/ping.c#L1237<br /><br />Seems to me like, once pr_addr is called, it always returns the same buffer contents, so if it&#39;s called to render the source address of the ICMP packet, then when it&#39;s called to render the icp-&gt;un.gateway address, you get back the source address of the ICMP packet again<br /><br />--buck</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="250208978241051068">
          <!--
          <div class="avatar-image-container">
            <img src="https://lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c250208978241051068" href="#250208978241051068">16 June 2016 09:12</a>
              </span>
            </div>
            <div class="comment-content">Thank you! Any ideas what the &quot;now you listen to redirects, now you don&#39;t&quot; behavior might be caused by?</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="7833884050300850868">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c7833884050300850868" href="#7833884050300850868">17 June 2016 10:09</a>
              </span>
            </div>
            <div class="comment-content">There&#39;s mention of the behavior in<br /><br />http://www.cymru.com/gillsr/documents/icmp-redirects-are-bad.pdf<br /><br />which references Stevens, TCP/IP Illustrated Volume 2, which explains the behavior in 22.11 in the subsection &quot;Redirects and Raw Sockets&quot;, but that&#39;s in reference to a BSD stack. Given that was the working standard, however, Linux probably exhibits compatible behavior</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="8069173005334586741">
          <!--
          <div class="avatar-image-container">
            <img src="https://lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/07267516785767923381" rel="nofollow">jsicuran</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c8069173005334586741" href="#8069173005334586741">16 June 2016 16:59</a>
              </span>
            </div>
            <div class="comment-content">Great post. <br /><br />I recall using this in the late 90s as the poor mans HSRP. <br />Two routers on on same user subnet(can run rip etc).<br /><br />Setting your PCS def GW IP to itself(arps on everything) <br /><br />PCs will arp and get a response from the routers and use that one to forward traffic off subnet. If the router the PC is using has it off subnet destinations links down the router send icmp redirect pc to go to  other router for the off subnet destination.   <br /><br />I remember early day clients with 2 routers on same subnet and their primary off subnet destination would be on one and another off subnet service on the other router and in the traces you would see all the redirect traffic for each respective session redirected between routers, extra traffic and usually fixed with FHRP or destination parity on both routers.  but this is a good case of icmp protocol doing its job.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="7049774252964917204">
          <!--
          <div class="avatar-image-container">
            <img src="https://lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/06646973209424821070" rel="nofollow">chris marget</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c7049774252964917204" href="#7049774252964917204">20 June 2016 19:57</a>
              </span>
            </div>
            <div class="comment-content">&quot;Cisco IOS will send ICMP redirects only when the source and destination IP addresses are in the same subnet.&quot;<br /><br />I think that&#39;s the correct behavior, isn&#39;t it?<br /><br />RFC1009(A.2):<br /><br />            A gateway will generate an ICMP Redirect if and only if the<br />            destination IP address is reachable from the gateway (as<br />            determined by the routing algorithm) and the next-hop gateway is<br />            on the same (sub-)network as the source host.<br /><br />RFC1122 (3.2.2.2):<br /><br />            A Redirect message SHOULD be silently discarded if the new<br />            gateway address it specifies is not on the same connected<br />            (sub-) net through which the Redirect arrived<br /><br />This is an interesting corner. RFC1122 also requires hosts to discard redirects sourced from something other than the default router. In this case (interface with secondary addresses configured), how is the router able to determine which IP address should be stamped on the redirect source IP field? HSRP/VRRP handle this by keeping track of which MAC address the objectionalbe (mis-routed) frame was destined for. How does it work in this case?<br /><br />Some digging I once did in this area: http://www.fragmentationneeded.net/2011/06/to-redirect-or-not-to-redirect-that-is.html</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="612893482301086181">
          <!--
          <div class="avatar-image-container">
            <img src="https://lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/06646973209424821070" rel="nofollow">chris marget</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c612893482301086181" href="#612893482301086181">20 June 2016 20:03</a>
              </span>
            </div>
            <div class="comment-content">&quot;How does it work in this case?&quot;<br /><br />Oops. I commented before I finished reading. I&#39;m guessing it *didn&#39;t* work, and that&#39;s why S2 on the &#39;secondary&#39; subnet refused to cache the redirect: It was sourced from something other than the default gateway.</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
  </ol>

    </div>
  </div>
</div>
