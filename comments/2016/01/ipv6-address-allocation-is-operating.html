<div class="comments post" id="comments">
  <h4>16 comments:</h4>
  <div class="comments-content">
    <div class="comment-thread">
        <ol>
      <div>
        <li class="comment" id="2626166913293612420">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.insinuator.net/tag/ipv6/" rel="nofollow">Enno Rey</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2626166913293612420" href="#2626166913293612420">21 January 2016 09:42</a>
              </span>
            </div>
            <div class="comment-content">Hi Ivan,<br /><br />thank you, very good overview and &quot;problem statement&quot;. I&#39;ve a couple of comments though. Unfortunately (namely from the perspective from environments with heterogenuous clients = all large enterprise) it is yet more complex, including:<br />- starting from Win8 Windows even sends DHCPv6 Solicits when the m-Flag is *not* set (which in turn means, amongst others, that you can only prevent DHCPv6 from being used by stopping the local service!).<br />- the behavior of Linux actually varies heavily between distros (see also sources below); I&#39;ve seen/configured Linux systems using DHCPv6 address in addition to SLAAC provisioned ones.<br />- as you stated, the interaction with source address selection is a complete mess. At some point even rule 5.5 from RFC6724 might come into play and similar nasty stuff.<br /><br />There&#39;s an IETF draft on some of this (disclaimer: I&#39;m involved):<br />https://tools.ietf.org/id/draft-ietf-v6ops-dhcpv6-slaac-problem-05.txt<br />also:<br />https://www.ernw.de/download/ERNW_Whitepaper_IPv6_RAs_RDNSS_DHCPv6_Conflicting_Parameters.pdf<br />https://ripe70.ripe.net/wp-content/uploads/presentations/132-ERNW_RIPE70_IPv6_Behavior_Conflicting_Environments_v0_92_short.pdf<br /><br />thanks for bringing attention to this space ;-)<br /><br />Enno</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="4422573715257704548">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/16576726865924052243" rel="nofollow">Dmitri Kalintsev</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c4422573715257704548" href="#4422573715257704548">21 January 2016 09:56</a>
              </span>
            </div>
            <div class="comment-content">and then people wonder why IPv6 adoption is slow.</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="4240737381825498429">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c4240737381825498429" href="#4240737381825498429">21 January 2016 14:54</a>
              </span>
            </div>
            <div class="comment-content">Well, I expected this comment from another Australian ;))</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="8941312724313608857">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/16576726865924052243" rel="nofollow">Dmitri Kalintsev</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c8941312724313608857" href="#8941312724313608857">21 January 2016 20:47</a>
              </span>
            </div>
            <div class="comment-content">It must be the sun or the food, or something.. :) </div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="5168682170329805792">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/15818883829738651247" rel="nofollow">shah</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c5168682170329805792" href="#5168682170329805792">21 January 2016 14:34</a>
              </span>
            </div>
            <div class="comment-content">It looks like windows always sends DHCPv6 request as last resort regardless of RA message. Enno Rey has published his observations of effects of RA messages with different operating systems in &quot;IPv6 Router Advertisement Flags, RDNSS and DHCPv6 Conflicting Configurations&quot; paper.<br />I found it very interesting. <br /> https://www.ernw.de/download/ERNW_Whitepaper_IPv6_RAs_RDNSS_DHCPv6_Conflicting_Parameters.pdf</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="7482936022366197911">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/11890997522662363216" rel="nofollow">Unknown</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c7482936022366197911" href="#7482936022366197911">21 January 2016 14:44</a>
              </span>
            </div>
            <div class="comment-content">And this is why I always disable RAs on server nets.</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="2445731696789266212">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/15752462696912045829" rel="nofollow">JeffTP</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2445731696789266212" href="#2445731696789266212">21 January 2016 15:06</a>
              </span>
            </div>
            <div class="comment-content">Are you using DHCPv6 for server IPv6 assignments? Aren&#39;t server networks the one area you would prefer RAs over DHCP?<br /><br />I&#39;ve built server networks that relied upon DHCP before, primarily using Infoblox redundant appliances with DHCP reserverations, but I&#39;ve always thought of RAs as being freedom from an risky outside dependency.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="7637905625511541385">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/11890997522662363216" rel="nofollow">Unknown</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c7637905625511541385" href="#7637905625511541385">21 January 2016 16:23</a>
              </span>
            </div>
            <div class="comment-content">We use static assignments for all servers, so no SLAAC or DHCP. DHCPv6 is easy to avoid by simply not doing any DHCP server/relay on the server nets, but to keep servers from generating SLAAC addresses I have to disable RAs. Thank you Windows.<br /><br />(With SLAAC addresses creating firewall rules would be... difficult)</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="1109386953384766579">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c1109386953384766579" href="#1109386953384766579">21 January 2016 15:40</a>
              </span>
            </div>
            <div class="comment-content">Guys, maybe i&#39;m totally wrong but this problem is adressed in RFC 6724 (that replaced RFC 3484) concerning default address selection algorithm (DAS) and Happy Eyeballs (RFC 6555), don&#39;t you think ?<br /><br />Maybe i&#39;m living in an utopian world but i always been under the impression that source/destination address selection has nothing to do with the method that the OS used to get one (SLAAC, static, DHCPv6), even if each OS has different way to react to flag bit inside RAs...<br /><br />Am i totally wrong ?<br /><br />Regards,<br /><br />Martin</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="5992839695047003786">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c5992839695047003786" href="#5992839695047003786">21 January 2016 16:44</a>
              </span>
            </div>
            <div class="comment-content">In theory that actually shouldn&#39;t be the case. However, reality is different - you just cannot rely on RFC 6724 today. For example, Windows uses an additional process called NCSI in order to figure out what address to use (at least for IPv4/IPv6) - see Ed Horleys Book on IPv6 Administration on Windows.<br /><br />BR,<br />Michael</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="4849955680599993099">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c4849955680599993099" href="#4849955680599993099">21 January 2016 21:17</a>
              </span>
            </div>
            <div class="comment-content">Thanks for your reply Michael. <br /><br />I was under the impression that NCSI is more a replacement/modification of RFC 6724 for selecting IPv6 or IPv4 but was not related to the selection of a specific IPv6 source address (static ip address preferred over SLAAC address for example).<br /><br />I think that i need to make some reading.<br /><br />Regards,<br /><br />Martin</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="8141466910876065761">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c8141466910876065761" href="#8141466910876065761">21 January 2016 21:20</a>
              </span>
            </div>
            <div class="comment-content">Sorry, you should read : replacement/modification of RFC 6555 (Happy Eyeballs) instead of RFC 6724.  Sorry.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="4891881179406334021">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c4891881179406334021" href="#4891881179406334021">22 January 2016 09:43</a>
              </span>
            </div>
            <div class="comment-content">Hi Martin,<br /><br />your impression is correct. I just wanted to say that there is not only RFC6724 but each OS seems to use it&#39;s own additional functions to determine what address to use. <br /><br />BR<br />Michael</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="789324001771403598">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/11418671261451939355" rel="nofollow">R.-Adrian F.</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c789324001771403598" href="#789324001771403598">21 January 2016 22:33</a>
              </span>
            </div>
            <div class="comment-content">... and all this circus instead of having a way of statically configuring interface ID and getting the prefix from RA. <br /><br />Let me explain : <br /> - server guys like static IP assignments (pretty much the same way we like static IPs on loopbacks).<br /> - in 99% of cases you can address a whole organisation&#39;s infrastructure in 64 bits (because you could do it in less than 32).<br /> - then how about seeing IPv6 for what it really became : 64 bit (max) routing prefix + 64 bit &quot;something ID&quot; (call it interface ID, host ID or whatever)<br /><br />There can always be an argument of how this is not good or how this can be accomplished otherwise (??? DHCP ??? - please NO), but change-wise IPv6 is sometimes already going too far (doesn&#39;t matter if it&#39;s in the good direction) to scare the hell out of most IT people. Isn&#39;t it concievable to give them little breaks on some issues ? Especially if we want deployment...</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="4931505708859948882">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://dnssecandipv6.se" rel="nofollow">Tobbe</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c4931505708859948882" href="#4931505708859948882">27 January 2016 18:54</a>
              </span>
            </div>
            <div class="comment-content">I always say - do as you would do with IPv4 =&gt; DHCPv6 with onlink flag set.<br />For datacenters same thing expect vlan where static address is needed =&gt; No RA<br />You don&#39;t have to explain so much and it&#39;s much easier to deploy it for those who is beginner in IPv6.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="7031434886398108017">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/03395587678662145289" rel="nofollow">Mauricio Andres Bustamante Viveros</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c7031434886398108017" href="#7031434886398108017">20 July 2017 06:05</a>
              </span>
            </div>
            <div class="comment-content">I only want to write that IPv6 is a standart, Â¿how ..... the RFC does not force an addressing standart?</div>
          </div>
        </li>
      </div>
  </ol>

    </div>
  </div>
</div>
