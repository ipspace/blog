<div class="comments post" id="comments">
  <h4>16 comments:</h4>
  <div class="comments-content">
    <div class="comment-thread">
        <ol>
      <div>
        <li class="comment" id="917360706055006518">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c917360706055006518" href="#917360706055006518">11 November 2008 11:10</a>
              </span>
            </div>
            <div class="comment-content">Nice scrip!<BR/><BR/>I've configured this on a 878 12.4-22T. The result has been a really big crashdump ending in a force reload (it's not a good think to happen with something that executes at each reload...).<BR/><BR/>Maybe some of the commands are incompatible with the lowest of the ISRs?</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2999151380604927540">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2999151380604927540" href="#2999151380604927540">11 November 2008 13:45</a>
              </span>
            </div>
            <div class="comment-content">Nothing in the script should be platform-dependent. They did introduce some new EEM functionality in IOS release 12.4(20)T and it might cause the crash dump you're experiencing (but that's a bug; in principle, the script should work anywhere). <BR/><BR/>I was probably testing this particular script on 12.4(15)Tx. I usually use the latest maintenance build of 12.4(15)T unless I'm testing newer features.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="8778434484143641456">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/05493206796242679777" rel="nofollow">Unknown</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c8778434484143641456" href="#8778434484143641456">09 December 2008 00:26</a>
              </span>
            </div>
            <div class="comment-content">Thanks for your response. I've tested with a 1751 I'm using for telephony with IOS 12.4-15T8.<BR/><BR/>Changing 1.0 to 1.2 in the last line of the script works like a charm! <BR/><BR/>In the test with the 1700 I've seen that the last sentence (1.0 syslog) erase the first sentence (1.0 info type routername). This makes the router stop the script telling there is an error (non configured variable $_info_routername). Maybe the 878 is unable to give that information and simply hangs (new error reporting system in 22T doesn't work?). I'll give a next try with the modified script and the 878 reporting results.<BR/><BR/>It's always good to know when the remote routers are reloaded, it would be good to have another variable for adding inside the mail the reason of the reload (sci-fi?)</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2454505580558164050">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/05493206796242679777" rel="nofollow">Unknown</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2454505580558164050" href="#2454505580558164050">09 December 2008 02:08</a>
              </span>
            </div>
            <div class="comment-content">I couldn't wait to test and report (it's 2AM here in Spain) but I've finished testing with the 878. It works like a charm!!!<BR/><BR/>I've had to upper the countdown timer for the applet to 110 seconds due to a PPP DSL delay with high load on start with the 870 loading IPSs. (Maybe IOS stop binding PPP dialing till all the IPS are loaded? The interface dialer is binding and unbinding till all IPSs are loaded, high load? IOS protecting on start?). I've tried all, generate traffic, but only worked uppering the delay...<BR/><BR/>In the next days I'll begin a deploy in all the (870-2800) remote routers...<BR/><BR/>Thanks for the info!</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="6778741392392159476">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c6778741392392159476" href="#6778741392392159476">09 December 2008 08:00</a>
              </span>
            </div>
            <div class="comment-content">@Pau: thanks for the fix. Stupid typo ...</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="1340113801180329936">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c1340113801180329936" href="#1340113801180329936">05 May 2009 10:58</a>
              </span>
            </div>
            <div class="comment-content">How can i specify username and password for SMTP authentication as well as a different port for SMTP. Does EEM also support SSL-SMTP?<br /><br />Thanks.<br /><br />Peter</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2344605130601917104">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2344605130601917104" href="#2344605130601917104">06 May 2009 20:02</a>
              </span>
            </div>
            <div class="comment-content">I haven't found anything that would allow you to do that with the "action mail" command (unless there's something new in EEM 3.0, I haven't checked that one yet).<br /><br />You can always write a Tcl policy that handles the SMTP protocol (but of course that's much more complex than a simple EEM applet).</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="440938780966986925">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c440938780966986925" href="#440938780966986925">09 May 2009 19:29</a>
              </span>
            </div>
            <div class="comment-content">Update for Mr. Anonymous: I've just checked the latest-and-greatest IOS release (12.4(24)T) which includes EEM 3.0 and the only option they've added to the 'action mail' command is the ability to specify source interface (or IP address).<br /><br />If you really need this functionality and have a big enough network, you could try asking for the feature through your Cisco SE/AM.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="8132772865569910490">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Glenn</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c8132772865569910490" href="#8132772865569910490">30 July 2009 21:19</a>
              </span>
            </div>
            <div class="comment-content">Considering most SMTP implementations require some sort of authentication I&#39;d say this is am much needed item.  However not exactly sure how involved it would be to get something like this programmed into EEM.  Would love to see it though.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="1683166159108953444">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c1683166159108953444" href="#1683166159108953444">14 August 2009 22:47</a>
              </span>
            </div>
            <div class="comment-content">Server-to-server SMTP (at least inter-domain ones) is never authenticated. Only the workstation-to-server sessions are (trying to minimize the spam).</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="6889424073277866199">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Josh</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c6889424073277866199" href="#6889424073277866199">19 November 2009 22:56</a>
              </span>
            </div>
            <div class="comment-content">Hi There,<br /><br />I was just browsing some of the EEM articles here and came across this one (sorry for ressurecting an old thread).<br /><br />I&#39;m new to the whole EEM scene, but from the documentation I&#39;ve been reading from Cisco, you can set the _email_server environment variable to use a username:password@host format.  Does that accomplish the authentication you&#39;re looking for?</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="3923133016873171805">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c3923133016873171805" href="#3923133016873171805">20 November 2009 17:33</a>
              </span>
            </div>
            <div class="comment-content">Interesting observation ... will try how it works. And, BTW, as long as there&#39;s Cisco IOS it&#39;s never too late to resurrect and old thread ;)</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="3670916201284264561">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">mtimmsj</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c3670916201284264561" href="#3670916201284264561">15 July 2010 09:33</a>
              </span>
            </div>
            <div class="comment-content">SMTP AUTH was added in EEM version 2.4 and later by CSCsf13878.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="3358554226742924164">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/08708760985676892466" rel="nofollow">Unknown</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c3358554226742924164" href="#3358554226742924164">12 September 2013 05:28</a>
              </span>
            </div>
            <div class="comment-content">Hello Ivan,<br />Thanks for the information it was very beneficial, however when I tried to do it on my 2620XM but there&#39;s an error as shown below:<br /><br />Toot_Router#show run | s event manager<br />event manager applet TEST <br /> event syslog pattern &quot;down&quot;<br /> action 1 cli command &quot;enable&quot;<br /> action 2 cli command &quot;configure terminal&quot;<br /> action 3 cli command &quot;interface Loopback0&quot;<br /> action 4 cli command &quot;no shutdown&quot;<br /> action 5 mail server &quot;mail.gmail.com&quot; to &quot;ahmedemadeldin.89@gmail.com&quot; from &quot;ahmedemadeldin.89@gmail.com&quot; subject &quot;TEST&quot; body &quot;Hello&quot;<br /><br />.Sep 12 03:23:14: %HA_EM-3-FMPD_SMTP: Error occured when sending mail to SMTP server: ahmedemadeldin.89@gmail.com : error in connecting to SMTP server<br /><br />Can you help with that? Thanks in advance.</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="7582713620773239568">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c7582713620773239568" href="#7582713620773239568">12 September 2013 07:09</a>
              </span>
            </div>
            <div class="comment-content">Did you configure a DNS server that your router could use to resolve gmail.com? Also, gmail does not use SMTP, read their specs.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="777005752250104584">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/08708760985676892466" rel="nofollow">Unknown</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c777005752250104584" href="#777005752250104584">12 September 2013 15:17</a>
              </span>
            </div>
            <div class="comment-content">Thanks for your reply, yes my DNS resolves gmail.com, do you have a real example of this so I can check my syntax? Thanks in advance.</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
  </ol>

    </div>
  </div>
</div>
