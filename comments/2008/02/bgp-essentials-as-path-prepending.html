<div class="comments post" id="comments">
  <h4>31 comments:</h4>
  <div class="comments-content">
    <div class="comment-thread">
        <ol>
      <div>
        <li class="comment" id="4750900562998202783">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Guest</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c4750900562998202783" href="#4750900562998202783">24 August 2009 20:31</a>
              </span>
            </div>
            <div class="comment-content">very nice! This is what I was looking for</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="4782651455777465223">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">AL IPBB</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c4782651455777465223" href="#4782651455777465223">20 October 2009 03:19</a>
              </span>
            </div>
            <div class="comment-content">G&#39;day,<br /><br />May I know what is the signinficance of the &quot;10&quot; in route-map prepend permit 10? Thanks!<br /><br />Cheers!</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="914003511858552649">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">VzW Data Engineer</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c914003511858552649" href="#914003511858552649">10 November 2009 03:11</a>
              </span>
            </div>
            <div class="comment-content">Perfectly what I was looking for!</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="7410033091004176407">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">roshko</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c7410033091004176407" href="#7410033091004176407">17 November 2009 16:29</a>
              </span>
            </div>
            <div class="comment-content">AL IPBB:<br /> This is the sequence for the route map rules.<br /> You can have multiple route map entries with a single name.<br /> route-map blah permit 10<br />   match whatever<br />   set anything<br />route-map blah permit 20<br />  match otherthings<br />  set otherstuff<br /><br />and so on..<br />The lookup stops when a matching rule is found. <br /><br />cheers</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="406466810824796496">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c406466810824796496" href="#406466810824796496">16 March 2010 16:44</a>
              </span>
            </div>
            <div class="comment-content">Brilliant and striaght to the point!</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="6928829437836149595">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Khan</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c6928829437836149595" href="#6928829437836149595">25 May 2010 15:30</a>
              </span>
            </div>
            <div class="comment-content">@Ivan, the config u have shown is to be applied on customers router or ISP router??? and i didnot completely understand about using local preference.. can u pls explain?</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2169889814709752350">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2169889814709752350" href="#2169889814709752350">25 May 2010 20:05</a>
              </span>
            </div>
            <div class="comment-content">The config would be applied on the customer router.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2712464349194637050">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">UBADIRE</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2712464349194637050" href="#2712464349194637050">26 August 2010 13:14</a>
              </span>
            </div>
            <div class="comment-content">Please who knows what prepending on internet is all about? Please i need help on this.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="3001009229061961409">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">jekader</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c3001009229061961409" href="#3001009229061961409">25 November 2010 10:01</a>
              </span>
            </div>
            <div class="comment-content">Thanks, really useful howto! <br /><br />PS - you should also include the part about prioritising upload using bgp neighbour weight</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="3918188756174976837">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c3918188756174976837" href="#3918188756174976837">30 November 2010 12:21</a>
              </span>
            </div>
            <div class="comment-content">This might help you: http://www.youtube.com/watch?v=zFliAojRi2E</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="1011516798574475461">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Mike</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c1011516798574475461" href="#1011516798574475461">28 December 2010 16:59</a>
              </span>
            </div>
            <div class="comment-content">Doesn&#39;t this only influence inbound connections (towards the customer)? The route-map out is telling the remote peer that the particular will take longer.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="8391694936141277938">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c8391694936141277938" href="#8391694936141277938">29 December 2010 09:01</a>
              </span>
            </div>
            <div class="comment-content">You&#39;re right: AS path prepending influences only the inbound traffic flow (not connections). Influencing outbound traffic flow is usually very easy (use local preference or weight for pure primary/backup scenario).</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="74534879171042577">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">jignesh</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c74534879171042577" href="#74534879171042577">04 March 2011 00:57</a>
              </span>
            </div>
            <div class="comment-content">Hi <br /><br />If we have two subnet &amp; we want one subnet to take primary ISP &amp; second to secondary ISP for incoming traffic. How to configure? <br /><br />will set as-path will affect both the subnet incoming path?</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="4988887456592687565">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c4988887456592687565" href="#4988887456592687565">04 March 2011 18:53</a>
              </span>
            </div>
            <div class="comment-content">Advertise to ISP-P: S1 with short path, S2 with long path<br />Advertise to ISP-B: S1 with long path, S2 with short path</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="6776660206543728197">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">neeraj</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c6776660206543728197" href="#6776660206543728197">04 May 2011 19:32</a>
              </span>
            </div>
            <div class="comment-content">why we use AS 65501 three times in &quot;set as-path prepend 65001 65001 65001&quot;</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="8218029900913958385">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">neeraj</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c8218029900913958385" href="#8218029900913958385">04 May 2011 19:38</a>
              </span>
            </div>
            <div class="comment-content">how to check if i set primary/secodary isp path at customer router.is any command to show on router? :)</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="4906084763208133166">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Keane</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c4906084763208133166" href="#4906084763208133166">13 September 2011 08:21</a>
              </span>
            </div>
            <div class="comment-content">Ivan always have good articles.<br /><br /><br />Why there is no &quot;match local preference&quot; for route-map used in BGP?<br /><br />% &quot;SET-LOCAL-PREFERENCE-103&quot; used as BGP inbound route-map, local preference match not supported</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="7021768209750150416">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c7021768209750150416" href="#7021768209750150416">13 September 2011 18:15</a>
              </span>
            </div>
            <div class="comment-content">Local preference is an intra-AS attribute, so it makes no sense to match on it on EBGP sessions (where it would never be used anyway).</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="4078971147254938174">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c4078971147254938174" href="#4078971147254938174">03 June 2012 02:43</a>
              </span>
            </div>
            <div class="comment-content">Ivan,  prepending does not work for iBGP.  How can I accomplish the same thing with iBGP(without prepending)?  I want to be able to prefer the backup path in some cases. Thanks, Steve Thomas</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="7247621089573450939">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c7247621089573450939" href="#7247621089573450939">03 June 2012 09:13</a>
              </span>
            </div>
            <div class="comment-content">Use local preference, set it with an outbound route map on IBGP session.</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="451628686311557901">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c451628686311557901" href="#451628686311557901">28 June 2012 11:21</a>
              </span>
            </div>
            <div class="comment-content">But Local preference influences the outgoing traffic and is always applied on incoming routing updats. Can we set LP in an outbound route-map?</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="3773662473964035528">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c3773662473964035528" href="#3773662473964035528">29 June 2012 07:45</a>
              </span>
            </div>
            <div class="comment-content">Yes you can, but since LP works only within an autonomous system, that would work only on an IBGP session. <br /><br />Anyhow, I wouldn&#39;t recommend it, I would strongly suggest that all routers in an autonomous system should have the same local preference for the same prefix (otherwise you might get interesting problems that would be hard to troubleshoot).</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="9109930899772080970">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c9109930899772080970" href="#9109930899772080970">05 October 2012 04:16</a>
              </span>
            </div>
            <div class="comment-content">How do you prevent your router from being a transit for others since you have dual ISPs and you are part of the Internet ring.</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="3261901082570575382">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c3261901082570575382" href="#3261901082570575382">05 October 2012 09:31</a>
              </span>
            </div>
            <div class="comment-content">* Not announcing transit prefixes<br />* Inbound ACLs limiting destinations to your address space.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="3490645664220609945">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/12612857680528965620" rel="nofollow">Philipp Kern</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c3490645664220609945" href="#3490645664220609945">05 October 2012 17:19</a>
              </span>
            </div>
            <div class="comment-content">Normally your upstreams will filter your prefixes anyway, so this can&#39;t happen. Otherwise you&#39;d be part of the DFZ, usually have more than two ISPs as uplinks and be an ISP yourself. ;-)</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="4950226926086003144">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c4950226926086003144" href="#4950226926086003144">05 October 2012 17:36</a>
              </span>
            </div>
            <div class="comment-content">&quot;Normally your upstreams will filter your prefixes anyway&quot; ... apart from the one that allowed Pakistan to hose YouTube. Some upstreams are more normal than the others ;)</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="6517259181725206551">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/01785777179144360023" rel="nofollow">mparrad</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c6517259181725206551" href="#6517259181725206551">23 July 2013 16:33</a>
              </span>
            </div>
            <div class="comment-content">Hi Ivan,<br /><br />What about a case when you have dual CE, one providing a 50 Mbps connection and the other being a Wireless HSPA+ just for backup? <br /><br />Do you know a way to actually filter the traffic in the Wireless connection so that the pipe is not saturated when switching over?<br /><br />ACLs would do the job for outbound traffic, but for inbound we are screwed...<br /><br />Any ideas?<br /><br />Thanks in advance.</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="6027466976540012914">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c6027466976540012914" href="#6027466976540012914">24 July 2013 06:06</a>
              </span>
            </div>
            <div class="comment-content">Inbound ACL would drop TCP traffic, so those sessions would stall, but some UDP senders might not care. Depends on your traffic profile.</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2404716535334649896">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2404716535334649896" href="#2404716535334649896">25 July 2013 12:07</a>
              </span>
            </div>
            <div class="comment-content">why we use AS 65501 three times in &quot;set as-path prepend 65001 65001 65001&quot;</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="6813245963262555544">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c6813245963262555544" href="#6813245963262555544">12 August 2013 22:39</a>
              </span>
            </div>
            <div class="comment-content">Because we want to create longer as path, thus &quot;spoiling&quot; one link over other, so primary/better link is preferred, till it&#39;s down and BGP converges to backup/worse link.</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2084307411881774527">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/11260582090741677359" rel="nofollow">Unknown</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2084307411881774527" href="#2084307411881774527">06 June 2018 00:55</a>
              </span>
            </div>
            <div class="comment-content">if i set longer path( &quot;set as-path prepend 65001 65001 65001&quot;)  for both primary and secondary path which path <br />will be chosen from customer site. please explain i see traffic drop.</div>
          </div>
        </li>
      </div>
  </ol>

    </div>
  </div>
</div>
