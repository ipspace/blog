<div class="comments post" id="comments">
  <h4>12 comments:</h4>
  <div class="comments-content">
    <div class="comment-thread">
        <ol>
      <div>
        <li class="comment" id="1469904835494980266">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">PatG</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c1469904835494980266" href="#1469904835494980266">30 May 2012 14:00</a>
              </span>
            </div>
            <div class="comment-content">Microsoft should stick to what they do well. When someone works out what that is, please let them know :)</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="9095149998174108474">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c9095149998174108474" href="#9095149998174108474">30 May 2012 14:24</a>
              </span>
            </div>
            <div class="comment-content">aha - i wonder if old Nokia checkpoint did the same thing.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="5132939737820910029">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="http://blog.michaelfmcnamara.com" rel="nofollow">Michael McNamara</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c5132939737820910029" href="#5132939737820910029">30 May 2012 15:00</a>
              </span>
            </div>
            <div class="comment-content">Interesting post... I had always believed that VRRP utilized a Multicast MAC source but when I looked it up this morning that doesn&#39;t appear to be the case, 00-00-5E-00-01-XX. Where XX is the VRRP ID or instance.<br /><br />Why did I think it was a Multicast source?</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="407085542337575883">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="http://jedelman.com" rel="nofollow">Jason Edelman (@jedelman8)</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c407085542337575883" href="#407085542337575883">30 May 2012 18:50</a>
              </span>
            </div>
            <div class="comment-content">Ivan, I think I found something from you that has a date from 2006...there are many Ivan&#39;s, but I&#39;m guessing that was you all the way back then!  <br /><br />Source: http://www.velocityreviews.com/forums/t38552-checkpoint-ha-cluster-w-multicast.html<br /><br />&quot;Todd,<br /><br />you don&#39;t really need to enable multicast on routers at all. There is a multicast on L2 only and it is used just to reach all cluster members if they are connected to switch. If they are connected to hub, then you would not need multicast at all.<br /><br />The only thing you have to do is to make static arp entry which will &quot;connect&quot; your multicast L2 (MAC) address with your virtual IP address. Why? Because router can&#39;t accept a multicast MAC address as an valid ARP reply due to RFC1812 (Requirements for IP Version 4 Routers):<br /><br /><br />3.3.2 Address Resolution Protocol - ARP<br /><br />[snip]<br />A router MUST not believe any ARP reply that claims that the Link<br />Layer address of another host or router is a broadcast or multicast address.<br /><br /><br /><br /><br />HTH,<br /><br />--<br />-Ivan.&quot;<br /><br /><br />Another relevant article by Greg:<br />http://etherealmind.com/checkpoint-nokia-firewall-cluster-xl/</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="2650607034291881429">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2650607034291881429" href="#2650607034291881429">31 May 2012 09:03</a>
              </span>
            </div>
            <div class="comment-content">That was a different Ivan ;)</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="9744752406721793">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/06646973209424821070" rel="nofollow">chris marget</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c9744752406721793" href="#9744752406721793">02 June 2012 15:16</a>
              </span>
            </div>
            <div class="comment-content">Hey Ivan,<br /><br />At the risk of sounding pedantic...<br /><br />*Any* frame with a multicast source MAC address is illegal, not just those frames containing ARP replies. See 802.3 sections 2.3.1.2 and 2.3.2.2.<br /><br />Strictly speaking, what you&#39;re referring to here is the &quot;hardware address of sender&quot; in the ARP reply payload described by RFC 826, not the source hardware address.<br /><br />Usually these two addresses (the one in the ARP payload, and the one in the frame header) are the same, but I&#39;m not aware of any requirement that they match.</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="7400040046363171948">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c7400040046363171948" href="#7400040046363171948">02 June 2012 17:07</a>
              </span>
            </div>
            <div class="comment-content">You&#39;re absolutely correct. Post updated. Thank you!</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="5890565535553523889">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/06646973209424821070" rel="nofollow">chris marget</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c5890565535553523889" href="#5890565535553523889">03 June 2012 01:23</a>
              </span>
            </div>
            <div class="comment-content">Y&#39;know, come to think of it, I bet there truly isn&#39;t any requirement for the two hardware addresses (header and payload) to match.<br /><br />In the microsoft case, they&#39;d have to be sourcing the ARP replies from a unicast address, but we know they populate the reply with a multicast address.<br /><br />In the case of GLBP, we have one box (AVG) replying on behalf of another (AVF). If the AVG sourced the reply from the AVF&#39;s hardware address, that would screw up L2 filtering tables, so mismatched hardware addresses here too. Thankfully, it&#39;s all unicast this time around, so the mismatch is only interesting, and not bogus.<br /><br />Are there any other reasons why these two L2 addresses wouldn&#39;t match?</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="1221992312980585231">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="http://www.joera.in" rel="nofollow">J Thomas</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c1221992312980585231" href="#1221992312980585231">18 July 2012 09:31</a>
              </span>
            </div>
            <div class="comment-content">The Opcode field in the ARP Message specifies the nature of the ARP message. If it is 1, then the message is ARP request and if it is 2 then it is ARP reply.<br /><br />When the ARP request is sent (with opcode as 1, for sure ARP request is a broadcast as everyone in the local network should get it) the ARP header is filled with 3 important values along with other and they are <br /><br />1) Target IP Address<br />2) Source IP Address<br />3) Source MAC address<br /><br />Target MAC address should be empty, because that is what the source machine is trying to find out. Ideally source MAC address cannot be a <br />multicast MAC address and it is illegal.<br /><br />But, Microsoft NLB (Network Load Balancing) and Fail-over Server Clusters require special type of addressing configuration since clusters contain more than one computer.</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="1876114698871810202">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c1876114698871810202" href="#1876114698871810202">18 July 2012 09:37</a>
              </span>
            </div>
            <div class="comment-content">... and your point is?</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="6063246968799763006">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="http://www.joera.in" rel="nofollow">J Thomas</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c6063246968799763006" href="#6063246968799763006">21 July 2012 07:08</a>
              </span>
            </div>
            <div class="comment-content">Dear Ivan, <br /><br />I was just mentioning developers may sometime circumvent the ideal situation because they are looking to only to solve their problems and how make their software work. <br /><br />Thanks a lot for your wonderful tech posts...<br /><br />J Thomas</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="8040204273876288072">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c8040204273876288072" href="#8040204273876288072">21 July 2012 08:17</a>
              </span>
            </div>
            <div class="comment-content">... and this is exactly the totally wrong approach that got us into way too many difficulties (and started the whole DevOps movement). In this particular case it&#39;s not the question of having an ideal or somewhat less perfect situation - you shall not violate the standards (and expect other people to walk on the water to support your &quot;ingenuity&quot;) just to get your job done.<br /><br />Best,<br />Ivan</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
  </ol>

    </div>
  </div>
</div>
