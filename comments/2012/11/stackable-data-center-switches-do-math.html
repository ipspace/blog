<div class="comments post" id="comments">
  <h4>12 comments:</h4>
  <div class="comments-content">
    <div class="comment-thread">
        <ol>
      <div>
        <li class="comment" id="2868007894468124083">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">Julien G</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2868007894468124083" href="#2868007894468124083">29 November 2012 11:38</a>
              </span>
            </div>
            <div class="comment-content">Juniper&#39;s cables are actually 32Gb x two cables, add &quot;cisco math&quot; and there&#39;s the 128Gb.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="4254865332350305551">
          <!--
          <div class="avatar-image-container">
            <img src="https://lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/01482427175039971682" rel="nofollow">Unknown</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c4254865332350305551" href="#4254865332350305551">29 November 2012 11:49</a>
              </span>
            </div>
            <div class="comment-content">Hello,<br /><br />I am going to disagree since I believe there are scenarios when you will benefit from stacking on ToR in HP case.<br /><br />Suppose all your servers have 4x 10G port and you bundle them to LACP NIC team. You connect those ports to four 5900s in IRF. HP allows to change LAG hashing algorithm to „local first“ – that means if there is connection local to the switch that one is prefered and used. When one server talk to another one - server will use hash and let say it will use first 5900. This 5900 will prefer local connection to second server since there is direct link to it. With this stacking link is not going to be used for your inter-server traffic if all servers have active connections to all nodes of your ToR stack.<br /><br />In this case inside of your 5900s IRF pod you are always one switch away from one server to another. <br /><br />Uplinks to core in such case needs to be on every 5900 – agree on that.<br /><br />Tomas<br /></div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="2609740324352842322">
          <!--
          <div class="avatar-image-container">
            <img src="https://lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2609740324352842322" href="#2609740324352842322">29 November 2012 12:01</a>
              </span>
            </div>
            <div class="comment-content">We&#39;re actually in perfect agreement - as long as you have port channels spanning all switches in IRF/VC/VCS fabric, no traffic goes over stacking links (the setup is identical to Cisco&#39;s VSS/vPC, only with a higher number of switches).<br /><br />However, my scenario was a bit different - I have a running network (thus no server-side port channel) and stack the switches.<br /><br />Will write a follow-up blog post ;)<br />Ivan</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="8754558261262511817">
          <!--
          <div class="avatar-image-container">
            <img src="https://lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/02247110501516035280" rel="nofollow">Unknown</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c8754558261262511817" href="#8754558261262511817">29 November 2012 13:51</a>
              </span>
            </div>
            <div class="comment-content">&quot;the management overhead of your ToR switches&quot; <br /><br />When I recently heard a Juniper presentation, I couldn&#39;t help but think, is management overhead really that much of a concern? These are machines who do the management (the config archiving etc.) not humans, I&#39;d think there is little cost associated, once the management system has been bought, therefore little savings. <br />To me, Virtual Chassis seems like a solution looking for a problem.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="8943305862881555440">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">Will</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c8943305862881555440" href="#8943305862881555440">29 November 2012 13:59</a>
              </span>
            </div>
            <div class="comment-content">Very interesting post, thanks a lot.  Just my own comment which is meant to be more humorous than anything --- who the heck has 16 uplinks?</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2179849398051066671">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2179849398051066671" href="#2179849398051066671">29 November 2012 17:19</a>
              </span>
            </div>
            <div class="comment-content">HP&#39;s IRF merge not only management plan also control plan and HP market says it is &quot;superior&quot; design.  Another HP&#39;s market snafu is they claimed Cisco&#39;s Nexus 7K VDC decrease fabric performance and now they are rolling out their own &quot;VDC&quot; in 12500 line with 1GHZ control plan CPU.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="9149131230075328313">
          <!--
          <div class="avatar-image-container">
            <img src="https://lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/06646973209424821070" rel="nofollow">chris marget</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c9149131230075328313" href="#9149131230075328313">29 November 2012 19:35</a>
              </span>
            </div>
            <div class="comment-content">Hey, when did &#39;elephant&#39;  in reference to packet flows stop referring to high latency, high bandwidth operations (Long Fat Network -&gt; LFN -&gt; elephant -- see RFC 1072), and start being a reference to any big TCP flows as claimed by wikipedia?<br />http://en.wikipedia.org/wiki/Elephant_flow<br /><br />I think the wikipedia entry is bogus:<br /> - It is not clear who coined &quot;elephant flow&quot;,<br /> - but the term began occurring in published<br /> - Internet network research in 2001...<br /><br />RFC 1072 dates back to 1988</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="4820943304745878466">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c4820943304745878466" href="#4820943304745878466">29 November 2012 19:50</a>
              </span>
            </div>
            <div class="comment-content">With a leaf-spine 2-tier architecture, isn&#39;t multi path a no brainer -- spray packets randomly.  This is what switches do internally.  It avoids persistent congestion at intermediate hops and reduces packet reordering (so TCP won&#39;t kill itself).</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="6674216753729012335">
          <!--
          <div class="avatar-image-container">
            <img src="https://lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c6674216753729012335" href="#6674216753729012335">29 November 2012 19:59</a>
              </span>
            </div>
            <div class="comment-content">The packets cannot be sprayed randomly; you have to preserve the order of packets within a single flow.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2528697117521474434">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2528697117521474434" href="#2528697117521474434">30 November 2012 18:19</a>
              </span>
            </div>
            <div class="comment-content">Yes, wouldn&#39;t TCP preserve the order of packets within a single flow?   I was wondering if reordering packets at the edge just above TCP would actually lead to significant performance improvements over conventional ECMP.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="8888933550965371652">
          <!--
          <div class="avatar-image-container">
            <img src="https://lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c8888933550965371652" href="#8888933550965371652">30 November 2012 20:11</a>
              </span>
            </div>
            <div class="comment-content">TCP would deliver the data stream in proper order to the application, the question is whether out-of-order packets affect performance (not sure whether LRO can handle them). Never got a good answer to this question.<br /><br />Non-TCP applications, on the other hand, might break (or slow down significantly) when receiving out-of-order packets.</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="6913063961106306915">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">Ron de Vries</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c6913063961106306915" href="#6913063961106306915">15 January 2013 22:16</a>
              </span>
            </div>
            <div class="comment-content">About the EX4500 having the cables working @ 128 Gbps is not the case. From the data sheet:<br />• 128 Gbps Virtual Chassis module with 2 x 64 Gbps ports.<br /><br />And as far as I know, this is still marketing. When you display vc-port<br /><br />show virtual-chassis vc-port (EX4200 Virtual Chassis)<br /><br />user@switch&gt; show virtual-chassis vc-port<br />fpc0:<br />-------------------------------------------------------------------------–<br />Interface   Type              Trunk  Status       Speed        Neighbor<br />or                             ID                 (mbps)       ID  Interface<br />PIC / Port<br />vcp-0       Dedicated           1    Up           32000        1   vcp-1<br />vcp-1       Dedicated           2    Up           32000        0   vcp-0<br /><br />This means &quot;line speed&quot; is just 32 Gbps.<br /><br />So this is less than the 80 Gbps you get with an HP switch<br /><br />just a detail. In a real design I would never virtualize more than two switch in a TOR as one (IRF. VSS, VC, or whatever...)</div>
          </div>
        </li>
      </div>
  </ol>

    </div>
  </div>
</div>
