<div class="comments post" id="comments">
  <h4>3 comments:</h4>
  <div class="comments-content">
    <div class="comment-thread">
        <ol>
      <div>
        <li class="comment" id="224043881834389586">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">tonhe</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c224043881834389586" href="#224043881834389586">23 January 2012 19:15</a>
              </span>
            </div>
            <div class="comment-content">Hey Ivan, Curious here on your recommendation to ensure that your regex matches distinct ASNs vs ones that may have been prepended. IMHO it seems this defeats the purpose of honoring the metric. If someone has prepended these routes, it may be for good reason.<br /><br />Just my 2p -- Curious to hear your side of why you would do that.  :-D</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="7605269781095193140">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c7605269781095193140" href="#7605269781095193140">23 January 2012 21:26</a>
              </span>
            </div>
            <div class="comment-content">Let&#39;s say you slightly prefer ISP-A over ISP-B (less load on ISP-B, but not strictly a primary/backup setup). <br /><br />So (according to the three-AS-numbers) idea, you have a default route to ISP-A, and filter anything that&#39;s either (1) more than three AS numbers away or (2) has more than three AS numbers in the AS path.<br /><br />Assume your neighbor also uses ISP-A and ISP-B in the same setup. He advertises his prefix to ISP-A with AS-path X and to ISP-B with AS-path X X X X X. Now assume his link to ISP-A goes down.<br /><br />You&#39;ll still receive his prefix, but if you follow rule (2), you&#39;ll drop the prefix (because AS-path length is more than three) and send the traffic through ISP-A. If you follow rule (1), you&#39;ll accept his prefix from ISP-B (and potentially from ISP-A, but AS-path would be longer anyway) and use it.<br /><br />There is no &quot;right&quot; answer here - you have to understand what happens if you use rule (1) or (2) and decide what suits you better ... but people do have to understand that &quot;being 3 AS numbers away&quot; is NOT the same as &quot;having AS-path length = 3&quot;</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="2541763928009502043">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Alex</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2541763928009502043" href="#2541763928009502043">24 February 2015 16:29</a>
              </span>
            </div>
            <div class="comment-content">How would one implement this kind of filtering in ios?</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
  </ol>

    </div>
  </div>
</div>
