<div class="comments post" id="comments">
  <h4>9 comments:</h4>
  <div class="comments-content">
    <div class="comment-thread">
        <ol>
      <div>
        <li class="comment" id="384857455042907453">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="http://simonthibaudeau.org/networklayers" rel="nofollow">Simon</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c384857455042907453" href="#384857455042907453">12 September 2013 15:21</a>
              </span>
            </div>
            <div class="comment-content">As far as I am concerned, the QoS aspect should be fairly easy to solve, and not that hard to implement: Classify and mark in the overlay, copy or re-mark the same classification in the underlay packet, do what you have to do on the underlay (police, shape, queue.) <br /><br />The only issue with that solution (I used to work for the military where we had similar model of encrypted overlay) is tenants thinking that it is a security risk to have their marking showing to other people (I know, it&#39;s a stretch, but I have had that argument before)<br /></div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="4941329242761545723">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/15215351197556121612" rel="nofollow">Ciscoman</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c4941329242761545723" href="#4941329242761545723">12 September 2013 20:02</a>
              </span>
            </div>
            <div class="comment-content">My issue here is that so many people seem to think that QoS = More Bandwidth.  It seriously bewilders me how people get this in their head.  Smart people too!<br /><br />Ok, so if I have a 1Gbp WAN link, no matter what, it&#39;s only going to be a 1Gbp WAN link.  I don&#39;t care if you run compression, QoS, CoS, or even play with TDM frequencies.  It&#39;s still only going to be a 1Gbp WAN link.  Most of the time the only time QoS even comes into play is when there is congestion.  Trying to send more over the pipe, at the same time, than its capacity.  QoS basically only says, &quot;If the pipe is congested, here&#39;s what we send first, second, third, etc.&quot;  Generally the time sensitive and PIO (Packets In Order) data (like VoIP) are sent first, followed by whatever your company feels is important, and everything else is marked best effort.  So if for 5 minutes your web browsing is slow and your Pandora stream stutters, oh well!<br /><br />The problem here is that QoS starts out with good intentions.  [Remember how the path to Hell is paved!] But in the end winds up causing more problems than it really solves.  Over time data priority becomes political within a company and as soon as Marketing finds out that you&#39;ve de-prioritized their web traffic and they might have to wait 15 mins to download the latest YouTube video of some competitors commercial, the IT Director find himself with the CIO sitting with the CEO to have a little &quot;Chit-Chat&quot;. This happened because the Director of Marketing is the CEO&#39;s cousin and she just got done with the presentation on how the ability to watch competitors commercials in real-time and without delay saves the company $1.2 Million annually.  Instantly you just became the bad guy.<br /><br />Everybody wants their traffic to never be interrupted but somebody has to stop and wait if QoS is going to do your network any good at all.  Bottom line!</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2959382098557594130">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2959382098557594130" href="#2959382098557594130">12 September 2013 21:14</a>
              </span>
            </div>
            <div class="comment-content">I know where you are coming from but all those arguments are easily countered when it comes to politics. You present a case as to what has priority and why. When they say they want their youtubes, well you present what will have to suffer to allow youtubes to load properly. Ultimately it&#39;s not up to the network guys for which applications get priority. That&#39;s a business decision. You never have to be the bad guy, you leave a paper trail and you follow what your superiors tell you to do, even if you know it&#39;s to their disadvantage.<br /><br />Also I would suggest reading more on what QoS does. Either you super simplified it for the layman or you may not know. I&#39;m going to assume you simplified it, if so, please disregard this part of the comment. </div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="8117252336494342405">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Bhargav</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c8117252336494342405" href="#8117252336494342405">12 September 2013 16:27</a>
              </span>
            </div>
            <div class="comment-content">Thanks Ivan for listing this out. Another question i have is, do we need to honor QoS based on VM&#39;s packet or the honoring be based on per tenant basis ?.<br /><br />On similar lines, should we honor VM&#39;s TTL ?. If honored, applications with TTL=1 would break. If not, possibly of routing loops may arise due to synchronization issue between the controller and vswitch.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="5498075107577924565">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/04540820319538497395" rel="nofollow">Unknown</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c5498075107577924565" href="#5498075107577924565">12 September 2013 21:52</a>
              </span>
            </div>
            <div class="comment-content">It is true that you won’t be able to do per-TCP-port classification and marking of overlay virtual traffic in your ToR switch any time soon (but I’m positive there are at least a few vendors working on it).<br /><br />This on the road map for the Brocade VDX platform aswell as all kinds of fancy stuff like VXLAN to SPAN etc.</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="8599726637925182573">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c8599726637925182573" href="#8599726637925182573">12 September 2013 22:48</a>
              </span>
            </div>
            <div class="comment-content">VXLAN on Brocade VDX: when it actually ships, do let me know. I stopped believing in roadmaps.</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="7362058599725691217">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Jan Colpaert</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c7362058599725691217" href="#7362058599725691217">13 September 2013 13:18</a>
              </span>
            </div>
            <div class="comment-content">Thanks Ivan,<br />I am glad I am not the only one who believes that avoiding congestion by providing more bandwidth than the servers can consume can be the most cost-effective way of handling this.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="201143531719588472">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13274036954130992232" rel="nofollow">Unknown</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c201143531719588472" href="#201143531719588472">14 September 2013 08:54</a>
              </span>
            </div>
            <div class="comment-content">It is true that you won’t be able to do per-TCP-port classification and marking of overlay virtual traffic in your ToR switch any time soon (but I’m positive there are at least a few vendors working on it).<br /><br />Why do we need marking of overlay virtual traffic in TOR switch? maybe classification and load balancing on overlay virtual traffic in TOR switch is necessary. But I didn&#39;t see why we need marking inner packet? even if you want to remark, it should be on outer.<br /><br />Centec Networks is designing a high density 10G chip of data center. It DOES support classification and load balancing on inner packet, but no marking inner packet.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="299352716823678522">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Ilja Summala</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c299352716823678522" href="#299352716823678522">21 September 2013 12:45</a>
              </span>
            </div>
            <div class="comment-content">Good post. Cost of port and WAN bandwidth(?) is going down where as cost of a network plumber optimizing the heck out of too slow network is not. Not to mention the built-in cost of complex solutions (although this something the industry outside of this blog does not talk enough about).</div>
          </div>
        </li>
      </div>
  </ol>

    </div>
  </div>
</div>
