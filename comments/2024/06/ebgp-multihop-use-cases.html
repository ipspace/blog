<div class="comments post" id="comments">
  <h4>10 comments:</h4>
  <div class="comments-content">
    <div class="comment-thread">
        <ol>
      <div>
        <li class="comment" id="2296">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Francois F</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2296" href="#2296">26 June 2024 08:51</a>
              </span>
            </div>
            <div class="comment-content"><p>You would need it over unnumbered interfaces too</p>
</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="2297">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Francois F</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2297" href="#2297">26 June 2024 08:55</a>
              </span>
            </div>
            <div class="comment-content"><p>Although more a technicality than a use case...</p>
</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2298">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2298" href="#2298">26 June 2024 08:56</a>
              </span>
            </div>
            <div class="comment-content"><p>True, if you want to run a pure IPv4 setup, but then you&#39;d need a route for the EBGP endpoint, so it&#39;s either dynamic routing (and why would you use that with EBGP?) or static route.</p>

<p>Maybe I could make this somewhat reasonable with DHCP over unnumbered VLANs.</p>
</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2299">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Mehdi SFAR</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2299" href="#2299">26 June 2024 09:25</a>
              </span>
            </div>
            <div class="comment-content"><p>When a firewall is in the path and doesn&#39;t support BGP, or can&#39;t handle the full Internet routing table, multihop EBGP is useful. This also applies when firewall administrators prefer not to manage BGP routing technology.</p>
</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="2304">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Merrill Hammond</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2304" href="#2304">26 June 2024 03:33</a>
              </span>
            </div>
            <div class="comment-content"><p>This is the scenario I have used multihop for, when there was a fw or device that wasn&#39;t going to play well with bgp in the middle. </p>
</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2306">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2306" href="#2306">26 June 2024 04:21</a>
              </span>
            </div>
            <div class="comment-content"><p>Thank you. Peering across a firewall is a clear winner ;)</p>
</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2300">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Harley Bristow</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2300" href="#2300">26 June 2024 09:38</a>
              </span>
            </div>
            <div class="comment-content"><p>Inter-AS Option-C? Although this might align with your point #1</p>

<p>https://learningnetwork.cisco.com/s/question/0D53i00000Ksqy9CAB/interas-option-c</p>

<p>mh eBGP between RR inter-AS, carrying AFI/SAFIs typical of the service-layer, like VPNv4/6 or L2</p>
</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="2307">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2307" href="#2307">26 June 2024 04:23</a>
              </span>
            </div>
            <div class="comment-content"><p>Thank you. That would definitely be a use case, but way too complex for an intro-to-BGP lab exercise. Will add it as a challenge lab if I ever decide to create MPLS/VPN labs though.</p>
</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2301">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Bela Varkonyi</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2301" href="#2301">26 June 2024 09:57</a>
              </span>
            </div>
            <div class="comment-content"><p>You have to connect two administrative domains with a firewall (or even with double chained diverse firewalls) separation. You want to keep the firewalls BGP free, not impacted by the configuration of the two domains. You use only static routing between the border routers through the firewalls. So the interconnect is very robust and stable.
You are not allowed to use tunnels, since you want to see the traffic in the firewalls in their natural form for filtering and analysis. Multicast shall be also supported.
Use multi-hop eBGP to dynamically advertise routes from the two administrative domains.</p>

<p>Start with a single path and then go to the next level of complexity:
You have two geographically separated sites for the firewalls. Each site has a double redundancy in border routers and firewalls. So you have 4 possible paths between the two administrative domains. 
Now you have to configure a quick failover between those 4 paths using multi-hop BFD to detect path failures. 
All physical connections are 1 Gbps, so overhead is not an issue.</p>

<p>Next step:
Configure active-active usage of the 4 paths. Load balance the traffic so that a path failure would temporarily impact only a portion of the traffic (even that we have a quick failover).</p>

<p>This is a real life example. I have seen it in mission critical or safety critical networks or even in service provider networks.</p>
</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="2308">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2308" href="#2308">26 June 2024 04:24</a>
              </span>
            </div>
            <div class="comment-content"><p>Thanks a million. Peering across a firewall is a clear winner (simple, easy-to-explain use case), but I will definitely add at least the basic redundancy if not the full-blown multi-site setup as challenge labs.</p>
</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2302">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow"> Stephan Lochner</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2302" href="#2302">26 June 2024 12:26</a>
              </span>
            </div>
            <div class="comment-content"><p>Within Azure vWAN you need eBGP multihop, otherwise there is no connection to your neighbour within Azure. And to reach the neighbour, you will need to add a static route towards Microsofts default gateway since there is no other underlay.
Not sure if its the same contruct on other public clouds.</p>
</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="2309">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2309" href="#2309">26 June 2024 04:30</a>
              </span>
            </div>
            <div class="comment-content"><p>Thank you! I should remember the details (as I was doing Azure webinars not so long ago), but I guess I&#39;ll have to go over the slide deck again.</p>

<p>IIRC, it&#39;s effectively a riff on the &quot;low-end router in the middle,&quot; this time the Azure virtual router with no externally visible control plane.</p>

<p>Might add this as an advanced scenario (if I figure out how to emulate the Azure environment).</p>
</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2303">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow"> Alexander N.</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2303" href="#2303">26 June 2024 12:35</a>
              </span>
            </div>
            <div class="comment-content"><p>We use eBGP multi-hop in 2 main use-cases, but both are similar.
1. for lab environment.
We use a single switch that uplinks to the cores and has 2 connections towards a firewall (one inside in VRF A, one outside for LAB environment in VRF B). It keeps the firewall outside BGP, with only static routes and its easier for a local person with less experience to configure.</p>

<ol>
<li>For local internet egress.
As sites use sd-wan with no DIA, whenever we need one we use a similar use-case.
Switch uplinks to cores and 2 connections to firewall (one inside one outside in different VRFs), outside just advertises the default route towards the campus, while sd-wan advertises more specific routes + default route with worse metrics.</li>
</ol>
</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="2310">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2310" href="#2310">26 June 2024 04:32</a>
              </span>
            </div>
            <div class="comment-content"><p>Thank you! Effectively this is a firewall-on-a-fat-stick scenario with two VRFs on the same router.</p>

<p>Will add it as an advanced scenario as it requires twiddling router IDs as well.</p>
</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2305">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Steve Dodd</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2305" href="#2305">26 June 2024 04:02</a>
              </span>
            </div>
            <div class="comment-content"><p>Peering with RouteViews outside of IXs</p>
</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="2311">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2311" href="#2311">26 June 2024 04:35</a>
              </span>
            </div>
            <div class="comment-content"><p>Thank you. Added as &quot;Centralized route collection service&quot;</p>
</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2312">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Jaap de Vos</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2312" href="#2312">26 June 2024 04:58</a>
              </span>
            </div>
            <div class="comment-content"><p>Not what you asked, but if you&#39;re looking to add more BGP labs then something focused on RPKI might be cool to have. Routinator (by NLnet Labs) is the easiest way I&#39;ve found to lab RPKI. It can run containerized in containerlab. Stuffing it into a Vagrant box for easier netlab support shouldn&#39;t be difficult either.</p>
</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="2313">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2313" href="#2313">26 June 2024 05:31</a>
              </span>
            </div>
            <div class="comment-content"><p>&gt; but if you&#39;re looking to add more BGP labs</p>

<p>I hoped to wrap up this project after almost a year, but new ideas keep coming in. Not that I would mind ;)</p>

<p>&gt; something focused on RPKI might be cool to have</p>

<p>Thank you, will add to the list of ideas.</p>

<p>&gt; It can run containerized in containerlab.</p>

<p>That&#39;s great to know. Netlab can run a mix of VMs and containers (using containerlab), so the deployment seems to be a no-brainer. Can I contact you for details once I find time to work on this one?</p>
</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2320">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Jaap de Vos</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2320" href="#2320">28 June 2024 09:51</a>
              </span>
            </div>
            <div class="comment-content"><p>&gt; Can I contact you for details once I find time to work on this one?</p>

<p>Sure thing. I need to do some legwork anyway, maybe I can provide a draft? I&#39;m writing with a named account so you have my e-mail.</p>
</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2314">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow"> Josh Hoppes</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2314" href="#2314">26 June 2024 05:52</a>
              </span>
            </div>
            <div class="comment-content"><p>We use multihop eBGP sessions for sending remote trigger black hole routes with one of our transit providers. </p>
</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="2317">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2317" href="#2317">27 June 2024 06:24</a>
              </span>
            </div>
            <div class="comment-content"><p>Thank you. You gave me idea for yet another BGP lab ;)</p>
</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2316">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow"> Octavio</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2316" href="#2316">27 June 2024 05:25</a>
              </span>
            </div>
            <div class="comment-content"><p>Maybe a simple scenario might be that there is link with special requirements, say, high-bandwidth or an uncommon port type. A router (not a switch) is available to handle the link, and can forward traffic, but it can&#39;t do BGP. And the router that can do BGP can&#39;t handle the link.</p>
</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="2318">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2318" href="#2318">27 June 2024 06:25</a>
              </span>
            </div>
            <div class="comment-content"><p>That&#39;s exactly what I&#39;ve been doing in the 1990s, and the &quot;uncommon port type&quot; was an async link.</p>

<p>Functionally this is equivalent to peering over the firewall, so I&#39;ll probably keep that one.</p>

<p>Thank you!</p>
</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
  </ol>

    </div>
  </div>
</div>
