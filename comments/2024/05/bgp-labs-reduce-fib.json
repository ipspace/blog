{
   "comments": [
      {
         "comments": [
            {
               "date": "12 May 2024 06:56",
               "html": "<p>Wow. Cool trick! I never managed to get it to work on Cisco IOS.</p>\n",
               "id": "2247",
               "name": "Ivan Pepelnjak",
               "pub": "2024-05-12T18:56:27",
               "ref": "2245",
               "type": "comment"
            }
         ],
         "date": "12 May 2024 02:18",
         "html": "<p>I used this technique on a Sup720 on the Cat 6500 platform.  The FIB could only hold 239k prefixes.  After that it would process switch, which was death on that platform.</p>\n\n<p>We had a full Internet table in the BGP database.  The RAM was not the problem, it held the entire Internet.  But the FIB was the limit.</p>\n\n<p>With the table-map command we could selectively load only certain routes into the RIB, which would then load into the FIB.</p>\n\n<p>The syntax was non-intuitive.  Table-map was designed to adjust the prefixes before loading them into the RIB, not eliminate them entirely!  I tried to set the admin distance of the undesired routes to 255 (unreachable) but the CLI didn&#39;t take it.  I got it to work by setting the metric to 4294967295.  I only knew that was the largest number by using the &quot;?&quot; in the CLI.</p>\n\n<p>That did it!  Something with metric 4294967295 was unreachable, so it didn&#39;t load into the RIB/FIB.</p>\n",
         "id": "2245",
         "name": " Dan Massameno",
         "pub": "2024-05-12T14:18:37",
         "type": "comment"
      },
      {
         "comments": [
            {
               "date": "18 May 2024 07:56",
               "html": "<p>Sure, I have two scenarios in mind:</p>\n\n<ul>\n<li>Run EBGP with the PE router to get the local prefixes and multihop EBGP with a core router to get the transit prefixes.</li>\n<li>Pull the circuit to a core router (although I&#39;ll use VXLAN instead of VPLS).</li>\n</ul>\n\n<p>It will take me a while to get there though ;)</p>\n",
               "id": "2263",
               "name": "Ivan Pepelnjak",
               "pub": "2024-05-18T07:56:25",
               "ref": "2262",
               "type": "comment"
            },
            {
               "date": "19 May 2024 04:16",
               "html": "<p>&gt; Run EBGP with the PE router to get the local prefixes and multihop EBGP with a core router to get the transit prefixes.</p>\n\n<p>IMO:\nI personally dislike this model as both a customer of a transit provider (had terrible nightmares with a carrier that did this) and as the transit service provider myself (if I&#39;m the one who designed the network). It just leads to configuration pollution for no good reason (on both sides), other than laziness, to create (hopefully it&#39;s automated in the backend) a Pseudowire from PE to the real edge router for a clean hand-off.</p>\n\n<p>&gt; Pull the circuit to a core router (although I&#39;ll use VXLAN instead of VPLS).</p>\n\n<p>What&#39;s your reasoning behind VXLAN though? For an SP network? Curious :)</p>\n",
               "id": "2266",
               "name": "Daryll Swer",
               "pub": "2024-05-19T16:16:58",
               "ref": "2263",
               "type": "comment"
            }
         ],
         "date": "17 May 2024 05:40",
         "html": "<p>Would you be interested in labbing up my eBGP based SP design, Ivan? It particularly solves or rather prevents the need of flooding full tables into the network devices beyond the edge (border) routers, small, medium and big networks.</p>\n\n<p>For instance, if I had a DIA/Transit customer, they do not peer with my PE router, my PE router will transport that customer&#39;s L2 over a pseudowire back to my real edge, whereby there, they directly peer with my full table-capable router (and should they choose, which I recommend, get a full table export from my side to their side as well).</p>\n\n<p>P/PEs would only have a few entries of each other&#39;s loopbacks for LDP/BGP signalled VPLS etc. Not more than a few tens or hundreds routes tops.</p>\n",
         "id": "2262",
         "name": " Daryll Swer",
         "pub": "2024-05-17T17:40:28",
         "type": "comment"
      }
   ],
   "count": 2,
   "type": "post",
   "url": "2024/05/bgp-labs-reduce-fib.html"
}
