<div class="comments post" id="comments">
  <h4>3 comments:</h4>
  <div class="comments-content">
    <div class="comment-thread">
        <ol>
      <div>
        <li class="comment" id="2378">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">darshan</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2378" href="#2378">13 August 2024 03:25</a>
              </span>
            </div>
            <div class="comment-content"><p>how does this actually scale in larger environments or even existing environments where majority of the VLANs have already been consumed?</p>

<p>ps. don&#39;t deploy vxlan, however i&#39;d like to understand more</p>
</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="2379">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2379" href="#2379">13 August 2024 03:34</a>
              </span>
            </div>
            <div class="comment-content"><p>The only VLANs needed in this setup are the internal VLANs used for VXLAN-based transport (one per VRF). They are assigned dynamically (as needed) and don&#39;t have to match across the PE devices.</p>

<p>However, if you deployed all 409x VLANs on every access switch, you have a bigger problem ;)</p>
</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2380">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Martin Rusko</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2380" href="#2380">13 August 2024 05:07</a>
              </span>
            </div>
            <div class="comment-content"><p>Regarding &quot;the transit VNI does not have to match across the PE devices&quot; you are going to cover it in the future post, I speculate there could be a chipset limitations forcing the VNI to be the same or &quot;symmetric&quot;. This limitation is documented for Juniper&#39;s ACX7100, so is this the case for anything Jericho2 based?</p>
</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="2381">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2381" href="#2381">13 August 2024 05:26</a>
              </span>
            </div>
            <div class="comment-content"><p>The obvious answer is &quot;We don&#39;t know&quot; (thank you, Broadcom, we love your NDAs), but I suspect it might be more of a case of a vendor doing a less-than-optimal job (in the case of L3VPN, L2VPN is another story)</p>
</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2382">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow"> Stefano Sasso</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2382" href="#2382">13 August 2024 10:24</a>
              </span>
            </div>
            <div class="comment-content"><p>AFAIK, not all the vendors require to have <em>dynamic virtual VLANs</em> to map a L3VNI.</p>

<p>I.e., Aruba CX and Dell OS10 don&#39;t (and - despite I hope nobody&#39;s doing that - you can potentially use for your network all the VLAN IDs).</p>

<p>Additionally, they also allow to statically set the <em>router-mac</em> to use on the L3VNI and RT5 announces (i.e. https://www.arubanetworks.com/techdocs/AOS-CX/10.08/HTML/vxlan/Content/Chp_EVPN/EVPN_cmds/vir-mac.htm)</p>

<p>Also Linux (frr, vyos, ...) does not require dynamic vlans, but instead requires to allocate a <em>dedicated bridge interface</em> (with no bridge slaves, apart from the vxlan device which maps the vni id) to be used for r-macs.</p>
</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="2383">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2383" href="#2383">14 August 2024 08:33</a>
              </span>
            </div>
            <div class="comment-content"><p>&gt; AFAIK, not all the vendors require to have dynamic virtual VLANs to map a L3VNI.</p>

<p>Don&#39;t require or don&#39;t show them? Also, what they&#39;re doing in a VM might be different from what they&#39;re doing in ASIC.</p>

<p>&gt; Also Linux (frr, vyos, ...) does not require dynamic vlans, but instead requires to allocate a dedicated bridge interface</p>

<p>Correct, but how does that map into ASIC setup on Cumulus Linux (or any other switch using FRRouting)?</p>
</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
  </ol>

    </div>
  </div>
</div>
