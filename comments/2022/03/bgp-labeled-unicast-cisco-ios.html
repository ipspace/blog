<div class="comments post" id="comments">
  <h4>1 comments:</h4>
  <div class="comments-content">
    <div class="comment-thread">
        <ol>
      <div>
        <li class="comment" id="1104">
          <!--
          <div class="avatar-image-container">
            <img src="">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Dmytro Shypovalov</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c1104" href="#1104">23 March 2022 10:53</a>
              </span>
            </div>
            <div class="comment-content"><p>Having one RIB for labeled and unlabeled unicast on IOS has caused weird interop problem in the field. Especially since most other implementations (even Cisco IOS-XR) have different RIB and negotiate labeled and unlabeled SAFI separately.</p>

<p>Take for example 6PE - remote PE expects an update with :FFFF: nexthop + MPLS label. Unlabeled IPv6 SAFI is not used between PE so it will probably not be negotiated. IOS code has some checks which tell whether to attach label or not, depending on nexthop format, whether nexthop was changed etc. Sometimes it might decide to send an unlabeled update over a labeled unicast session.</p>

<p>It can get even worse if the peer is pre-RFC7606, so it might just drop the BGP session with all AF because of this.</p>
</div>
          </div>
        </li>
      </div>
  </ol>

    </div>
  </div>
</div>
