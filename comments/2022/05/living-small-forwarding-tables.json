{
   "comments": [
      {
         "comments": [
            {
               "date": "09 May 2022 04:14",
               "html": "<p>Yeah, Arista managed to use ARP or MAC table to do that on some merchant silicon ASIC. At the very least, that requires the ability of the lookup table to match a field at unusual offset.</p>\n\n<p>As for next hop rewrite, the result of that lookup could point to a dummy per-next-hop VRF with a default route pointing to the next hop.</p>\n",
               "id": "1220",
               "name": " Ivan Pepelnjak",
               "pub": "2022-05-09T16:14:53",
               "ref": "1219",
               "type": "comment"
            }
         ],
         "date": "09 May 2022 11:05",
         "html": "<p>Another mechanism used in some routers (&quot;switches&quot;) is to use CAM table space for one prefix length, e.g., /24, in addition to TCAM. The route lookup then uses both a longest prefix match via TCAM and a CAM lookup for the designated prefix length to determine the next hop.</p>\n\n<p>Of course this requires CAM in addition to TCAM in the ASIC. I would expect that the ASIC&#39;s forwarding pipeline needs support for this scheme, too (e.g., CAM lookup results usually do not include the next hop rewrite information required for IP forwarding). So this is probably not applicable to the ASIC in question.</p>\n",
         "id": "1219",
         "name": "Erik Auerswald",
         "pub": "2022-05-09T11:05:24",
         "type": "comment"
      }
   ],
   "count": 1,
   "type": "post",
   "url": "2022/05/living-small-forwarding-tables.html"
}
