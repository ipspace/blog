<div class="comments post" id="comments">
  <h4>2 comments:</h4>
  <div class="comments-content">
    <div class="comment-thread">
        <ol>
      <div>
        <li class="comment" id="2002">
          <!--
          <div class="avatar-image-container">
            <img src="">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Billy</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2002" href="#2002">27 November 2023 12:22</a>
              </span>
            </div>
            <div class="comment-content"><p>Hi,</p>

<p>If I understand correctly this is what&#39;s taken advantage of in conjunction with BGP selective download to carry full view in RIB while only programming default route in FIB on below use case.</p>

<p>https://www.cisco.com/c/dam/en/us/products/collateral/routers/asr-920-series-aggregation-services-router/asr920-full-internet-routing-capability.pdf</p>

<p>Best</p>
</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="2003">
          <!--
          <div class="avatar-image-container">
            <img src="">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2003" href="#2003">27 November 2023 12:55</a>
              </span>
            </div>
            <div class="comment-content"><p>Selective route download is more generic (or at least it could be): whenever a more-specific and a less-specific prefix have the same next hop, there&#39;s no need for the more-specific prefix. More details in https://blog.ipspace.net/2022/05/living-small-forwarding-tables.html and https://datatracker.ietf.org/doc/html/rfc6769</p>

<p>Obviously, there&#39;s a tradeoff: you can&#39;t use PIC or any other similar FIB reprogramming optimization tool. See https://blog.ipspace.net/2012/01/prefix-independent-convergence-pic.html and https://blog.ipspace.net/2020/11/fast-failover-implementation.html for details.</p>
</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2004">
          <!--
          <div class="avatar-image-container">
            <img src="">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow"> Michael Milaitis</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2004" href="#2004">27 November 2023 08:59</a>
              </span>
            </div>
            <div class="comment-content"><p>I faced this problem some years ago. I wanted the BGP route to get invalid when there is no available /32 route for the next-hop. In IOS you can do this with Selective BGP Next-Hop Route Filtering (https://www.cisco.com/c/en/us/td/docs/ios-xml/ios/iproute_bgp/configuration/xe-3s/irg-xe-3s-book/bgp-support-for-next-hop-address-tracking.html). The command is &ldquo;bgp next-hop route-map xxx&rdquo;. So the route-map could match only the prefix of your network&rsquo;s loopbacks.</p>

<p>You can achieve the same for fast neighbor deactivation when there is no specific route for the neighbors address. neighbor xxx fall-over route-map xxxx.</p>
</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="2005">
          <!--
          <div class="avatar-image-container">
            <img src="">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2005" href="#2005">28 November 2023 11:31</a>
              </span>
            </div>
            <div class="comment-content"><p>I got bitten a few weeks ago by Arista EOS having a DHCP-derived default route in the main routing table. It&#39;s not their fault; they&#39;re doing things the way they should be done -- I should have used the management VRF.</p>

<p>FWIW, I wrote about the fast neighbor deactivation in Cisco IOS a long while ago; it looks like I have to resurrect that article ;)</p>
</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
  </ol>

    </div>
  </div>
</div>
