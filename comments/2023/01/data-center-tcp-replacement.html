<div class="comments post" id="comments">
  <h4>3 comments:</h4>
  <div class="comments-content">
    <div class="comment-thread">
        <ol>
      <div>
        <li class="comment" id="1590">
          <!--
          <div class="avatar-image-container">
            <img src="">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">chris marget </a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c1590" href="#1590">10 January 2023 03:30</a>
              </span>
            </div>
            <div class="comment-content"><p>Hi Ivan,</p>

<p>Thank you for this article.</p>

<p>While &quot;expectation of in-order packet delivery&quot; was an eyebrow-raiser for me (it&#39;s literally the opposite!), the complaint that TCP has HoL blocking when unrelated messages are fired into a single socket was my signal to put this paper down and do something else.</p>

<p>I hope those fanning the hype on this topic can reorganize around reasonable criticisms and actual problems experienced by sensibly written applications.</p>

<p>Oh... And Golang absolutely needs more jabs for its ridiculous violation of both Postel&#39;s law and the Principle of Least Surprise with its insane TCP_NODELAY defaults. While it&#39;s probably too late to un-ring that bell, the situation sure smells like a similar bad call based on somebody&#39;s narrow view on what constitutes a widespread problem.</p>
</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="1591">
          <!--
          <div class="avatar-image-container">
            <img src="">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Bela Varkonyi</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c1591" href="#1591">10 January 2023 06:23</a>
              </span>
            </div>
            <div class="comment-content"><p>Thanks for this article! I have enjoyed reading it...</p>

<p>I have regularly get such academic ideas without seeing a proper experience in real-life networking. 
I am so tired of them... Since the early nineties... :-)</p>

<p>Most of those research guys have no ideas about realities. They should read your blog to capture some stuff... :-) Keep going! </p>
</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="1592">
          <!--
          <div class="avatar-image-container">
            <img src="">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow"> Minh</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c1592" href="#1592">12 January 2023 09:03</a>
              </span>
            </div>
            <div class="comment-content"><p>I don&#39;t have problem with people wanting to push protocols. My thinking on this is similar to that of Rodney Brooks: try thousands of things, a lot of them will fail, but we&#39;ll learn a lot and realize what&#39;s working to keep. But people should go beyond talking about protocols on papers; it rings hollow. Have the guts to implement them in the real world (or are they afraid of risking their own money?) If a protocol can prove itself, surely it&#39;ll catch on in time.</p>

<p>Having said that, there&#39;s no need to use the typical tactic of talking down another one to boost your own, and if you do so, stick to the right metrics. I agree with the majority of what you wrote in this blog. TCP has its own flaws, serious ones at that, but a lot of what John brought up was bogus. For ex:</p>

<p>&quot;In TCP, when a host&rsquo;s link is overloaded (either for incoming or outgoing traffic), TCP attempts to share the available bandwidth equally among the active connections. This approach is also referred to as &ldquo;fair scheduling.&rdquo;</p>

<p>BS, a transport protocol does none of that, neither should it. TCP doesn&#39;t do it either. Why should TCP or any transport protocol care about scheduling? Queuing/scheduling is a network function, be it done in the NIC or in the routers/switches. If I&#39;m wrong, pls point out.</p>

<p>TCP needs in-order delivery: utter nonsense. What are its segment number and retransmission mechanism for? </p>

<p>&quot;it assumes that out-of-order arrivals indicate packet drops.&quot; Don&#39;t think so. When a packet doesn&#39;t come within its expected time window, then TCP assumes it&#39;s lost in transit/dropped and attempts rectification. If it arrives out of order but doesn&#39;t get lost, TCP couldn&#39;t care less.</p>

<p>&quot;packet spraying cannot be used with TCP&quot;: per-packet LB has existed for so long. It&#39;s used within networks (not on Internet where flow-based LB is used) to promote better LB than flow-based and because within a network, it&#39;s easier to control QoS. </p>

<p>&quot;I hypothesize that flow-consistent routing is responsible for virtually all of the congestion that occurs in the core of data center networks&quot;: congestion often happens due to hotspots, which can be due to sudden overload (link failure, flapping), or incast, LRD/self-similar traffic...Whether you use flow-based or packet-based routing, you can&#39;t get over these inconveniences. That&#39;s why trivial traffic modeling can&#39;t speak for reality, and we need to put protocols in action instead of just testing them in some simplistic lab scenarios.</p>

<p>Homa has its merit, so John and his team should spend their effort pushing it in real networks and see how it fares in reality. That will be more productive and helpful, than writing paper talking down TCP on faults it&#39;s not responsible for. </p>
</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="1593">
          <!--
          <div class="avatar-image-container">
            <img src="">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow"> tmp</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c1593" href="#1593">12 January 2023 02:06</a>
              </span>
            </div>
            <div class="comment-content"><p>I think you are accusing technical incompetence where you should be critisising weak phrasing.</p>

<p>&quot;BS, a transport protocol does none of that, neither should it. TCP doesn&#39;t do it either. Why should TCP or any transport protocol care about scheduling? Queuing/scheduling is a network function, be it done in the NIC or in the routers/switches. If I&#39;m wrong, pls point out.&quot;</p>

<p>Fair scheduling probably is not the most precise term, but congestion control basically trickles down to trying to achieve something approaching fairness.</p>

<p>&quot;TCP needs in-order delivery: utter nonsense. What are its segment number and retransmission mechanism for?&quot;</p>

<p>Avoiding much out-of-order delivery is important still if you care about performance, which is what this paper is all about.</p>

<p>&quot;Don&#39;t think so. When a packet doesn&#39;t come within its expected time window, then TCP assumes it&#39;s lost in transit/dropped and attempts rectification. If it arrives out of order but doesn&#39;t get lost, TCP couldn&#39;t care less.&quot;</p>

<p>However, with many in-between packets as can occur in the decribed context (packet-granular link load balancing), fast retransmit may cause additional traffic and reduce the congestion window/sending rate. </p>

<p>&quot;per-packet LB has existed for so long. It&#39;s used within networks (not on Internet where flow-based LB is used) to promote better LB than flow-based and because within a network, it&#39;s easier to control QoS.&quot;
I do however agree with this. The prevalent notion that packet spraying causes heavy out-of-order delivery is usually wrong on paths with symmetric link capacities and similar delay.</p>

<p>&quot;congestion often happens due to hotspots, which can be due to sudden overload (link failure, flapping), or incast, LRD/self-similar traffic&quot;
again, the argument is not really that flow-consistent routing is actually the root cause, but that, if it were not for that, the available link capacity could be used more effectively.</p>

<p>All in all, while i do agree that with a title like that, he is just asking for angry responses, i also wonder whether the critics could be a bit more fair and maybe even more polite. The notion that this guy has just no idea what he is talking about because he is an academic is cheap and just plain wrong.</p>
</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
  </ol>

    </div>
  </div>
</div>
