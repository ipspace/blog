<div class="comments post" id="comments">
  <h4>20 comments:</h4>
  <div class="comments-content">
    <div class="comment-thread">
        <ol>
      <div>
        <li class="comment" id="5317248529825538382">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/10405076817751797674" rel="nofollow">Ids</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c5317248529825538382" href="#5317248529825538382">30 November 2015 10:17</a>
              </span>
            </div>
            <div class="comment-content">And of course we all know why (virtual) circuit switching has been replaced with packet switching technology :-) To me, flows seem synonymous with virtual circuits.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2863387231465052303">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/01955791609652619198" rel="nofollow">Joe</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2863387231465052303" href="#2863387231465052303">30 November 2015 13:01</a>
              </span>
            </div>
            <div class="comment-content">First I haven&#39;t heard the podcast but from reading your post:<br />It sounds a little to me like there&#39;s a confusion about the definition of a flow. Is your definition of a flow(sequence of similar packets from a to b) the same as your friend?<br /><br />Keep up the awesome work simplifying all these sometimes complicated topics. (should be posted in your Thank you-post)</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="1946511183672123778">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c1946511183672123778" href="#1946511183672123778">30 November 2015 13:06</a>
              </span>
            </div>
            <div class="comment-content">Hi Joe,<br /><br />Regardless of what definition one takes, flow-based forwarding is always packet-based. Writing a follow-up blog post as we speak...<br /><br />Best,<br />Ivan</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="983756171914921499">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/01395217775195260835" rel="nofollow">Wes Felter</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c983756171914921499" href="#983756171914921499">30 November 2015 22:27</a>
              </span>
            </div>
            <div class="comment-content">Yeah, usually when people say this, what they mean is &quot;generalized packet-based forwarding (using e.g. OpenFlow)&quot; is more powerful than &quot;IEEE/IETF standard destination-based packet forwarding&quot;. Although whether this is actually true is debatable.</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="571320994560175828">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/01522710741044091594" rel="nofollow">Ali Kafel</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c571320994560175828" href="#571320994560175828">30 November 2015 13:23</a>
              </span>
            </div>
            <div class="comment-content">Hi Ivan - I thought the main difference is that flow-based forwarding can use more than just the destination IP address to make forwarding decisions, based on attributes such as source ip, source port, etc?</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="3493199557282022868">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c3493199557282022868" href="#3493199557282022868">30 November 2015 13:55</a>
              </span>
            </div>
            <div class="comment-content">The old grunts call that capability PBR, and it&#39;s been available on most traditional boxes for years. In any case, we&#39;re always switching packets, regardless of which header fields we use to make the forwarding decision.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="8855910457310869895">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/11545281059392899809" rel="nofollow">Bogdan Golab</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c8855910457310869895" href="#8855910457310869895">30 November 2015 14:00</a>
              </span>
            </div>
            <div class="comment-content">What &quot;exceed the capabilities&quot; explained? Let&#39;s talk about details, not general ideas with no meaning. So it is interesting what does the &quot;exceed the capabilities&quot; statement mean.<br />I have not heard this podcast...</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="3948470154378036224">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c3948470154378036224" href="#3948470154378036224">30 November 2015 14:02</a>
              </span>
            </div>
            <div class="comment-content">Yeah, I would like to hear that explanation as well ;) Unfortunately, the whole thing was a lot of opinions and almost no data points.</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="8851857530136569367">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/06282805246388430473" rel="nofollow">Unknown</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c8851857530136569367" href="#8851857530136569367">30 November 2015 23:19</a>
              </span>
            </div>
            <div class="comment-content">Isn&#39;t a flow just an abstraction to think about or manipulate a series of related packets? Is OpenFlow a misleading name, isn&#39;t it a packet to flow mapper and configurator? I thought OF was a new standard method of configuring packet forwading rules instead of using mac learning or flooding or dynamic routing protocols.</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="8351208765387201795">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c8351208765387201795" href="#8351208765387201795">01 December 2015 07:22</a>
              </span>
            </div>
            <div class="comment-content">Yeah, OpenFlow is a totally misleading name, it&#39;s just a different way of downloading existing forwarding rules into forwarding hardware. There&#39;s nothing that could be called &quot;flow-based forwarding&quot; in OpenFlow, apart from the capability to match on fields other than destination L2/L3 addresses (aka PBR :D).</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="8673845538392281989">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/03315325422507197897" rel="nofollow">Ian</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c8673845538392281989" href="#8673845538392281989">01 December 2015 01:53</a>
              </span>
            </div>
            <div class="comment-content">I submit that the real difference between packet and flows on the forwarding plane is that flows require the forwarder to be consistent amidst changes to the lookup table, whereas packets don&#39;t.  <br /><br />A router is flow agnostic and doesn&#39;t need to respect the flow when deciding which next-hop to assign to a packet to adjust to, for example, changes in the lookup table that happen between packets, whereas a load-balancer does need to arrive at the same next-hop decision over and over again for each packet in the flow or it risks breaking the flow.<br /><br />And this is more than PBR because it creates a unique entry for each flow, all of which are a match for the same PBR rule, allowing flow A to go to next-hop 1 and flow B to go to next-hop 2.  <br /><br />This is all still packet switching, but it is much more granular matches, which allows for much more granular actions and those actions can, because of the awareness of the flow context, do things that require the maintenance of state, particularly the state between a request and a response.  When you do that at L4 you have a stateful firewall.  When you do that at L7 or with the payload of L7, you have a load-balancer.  When you do it because you really wish your packet switched network was a voice circuit or a virtual wire or a video channel you have a problem.<br /><br />That doesn&#39;t absolve the original quote of it&#39;s shame, and in fact, this kind of network state is both very complicated to manage well and applicable to a shrinking number of must-use scenarios if sane technological decisions about things like ipv6 and network identity are made; we shouldn&#39;t be artificially increasing them, because they should be naturally decreasing over time.  <br /><br />(Of course, that quotes like that are not the consequence of sane technological decisions.) </div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="218753392601095705">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c218753392601095705" href="#218753392601095705">01 December 2015 07:32</a>
              </span>
            </div>
            <div class="comment-content">You got the gist of my upcoming blog post ;)) <br /><br />However, there&#39;s an additional detail: while a flow-based forwarder treats all packets of the same flow in the same way (which might include always sending them toward the next hop), it still has to respond to changes in the forwarding table (for example, when the next hop becomes unreachable or is no longer a valid next-hop for the destination).</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="6212262492889829226">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/11545281059392899809" rel="nofollow">Bogdan Golab</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c6212262492889829226" href="#6212262492889829226">01 December 2015 07:54</a>
              </span>
            </div>
            <div class="comment-content">For example flowlet load balancing takes into account not only PBR rules (flow &#39;definition&#39;) bit also time to reach the &#39;merging&#39; point before switching to another path. Today the devices are so complicated so the naming can be misleading and sparks only the academic discussion;).<br /><br />Details matter.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="3687812703442066450">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c3687812703442066450" href="#3687812703442066450">01 December 2015 07:58</a>
              </span>
            </div>
            <div class="comment-content">Flowlet implementations I&#39;ve seen so far are way more simplistic and look at nothing more than whether a certain output bucket is empty, the only exception being Brocade VDX (which doesn&#39;t do flowlet load balancing but very smart per-packet load balancing). <br /><br />Pointer to a more complex implementation is highly appreciated.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="441354540468154294">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/10562240567667879482" rel="nofollow">lcw</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c441354540468154294" href="#441354540468154294">01 December 2015 16:43</a>
              </span>
            </div>
            <div class="comment-content">Many flow-informed devices forgo next-hops/gateways entirely and instead set the outbound interface and destination MAC address based on incoming traffic. This is common practice for firewalls, load-balancers (F5 &quot;Auto-LastHop&quot;), and NAS (NetApp &quot;FastPath&quot; and EMC &quot;IP Packet Reflect&quot;). This ARP-be-damned forwarding can lead to very desirable steady-state forwarding behavior, but it&#39;s a liability to planned &amp; unplanned changes since each device has its own idea of how to deal with topology changes. It can also affect capacity planning since link utilization doesn&#39;t follow what one would expect from RFC-compliant devices.<br /><br />Regardless, these fancy-pants devices are still shuffling packets to output queues.<br /><br />And to Ian&#39;s point that routers/switches are flow-agnostic: try turning on per-packet ECMP, or send fragmented traffic over a L4-hashed LAG, and see how that agnosticism plays out ... :)</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="3935410465353875002">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/01335898315678692950" rel="nofollow">Unknown</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c3935410465353875002" href="#3935410465353875002">01 December 2015 19:22</a>
              </span>
            </div>
            <div class="comment-content">Ivan pointed out that flow-based decision/forwarding is PBR to old-school network folks. I skim over some of the stuff from Open forums regarding Openflow-based controls. It seems to me that the main difference is where you update the forwarding tables from. With PBR, a network guy configures a layer-3 device to make layer-4-7 decisions, whereas with OF, someone makes a selection at the app layer (whether by a portal or by programming within an app) which propagates to the layer-3 device. If you read the cheerleader fluff of openflow proponents, the supposed advantage is that you can initiate a flow from one place and it will propagate across many L3 devices as long as they are all compliant. If you do this from the network side, obviously it would require touching many devices, and frequently. Again, I just skimmed and may not have it all straight. Regarding Ivan&#39;s original point, I don&#39;t see how flows could exceed packet-based forwarding unless they are referring to the outcome... I.E. a SD-WAN decision to switch traffic to alternate paths based on performance whereas packet-based forwarding would never do this?</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="971414974856077068">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c971414974856077068" href="#971414974856077068">01 December 2015 19:31</a>
              </span>
            </div>
            <div class="comment-content">@Autarch01: what SD-WAN does is just smarter load balancing based on link characteristics instead of routing protocol costs. No special sauce behind the curtain ;) See also http://blog.ipspace.net/2015/06/software-defined-wanwell-orchestrated.html</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="5142384689155674786">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/02819548309072561770" rel="nofollow">Unknown</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c5142384689155674786" href="#5142384689155674786">01 December 2015 02:11</a>
              </span>
            </div>
            <div class="comment-content">Thank you Ivan! You are just the right person to make that correction. That entire segment of 5 mins or so in the aforementioned was an exercise of pain. And it&#39;s sad because in the end this hurts more than benefit the dissemination of sdn/openflow, which is exactly the opposite of what their goal seem to be. But yeah, you know, BGP has bugs.... :-)</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="349409661182628440">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/11303994285469306441" rel="nofollow">Jeroen van Bemmel</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c349409661182628440" href="#349409661182628440">07 December 2015 21:58</a>
              </span>
            </div>
            <div class="comment-content">How about we call it &quot;flow-based packet forwarding&quot; and be done with it?</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="4653057173419265098">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Usman</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c4653057173419265098" href="#4653057173419265098">12 January 2016 18:09</a>
              </span>
            </div>
            <div class="comment-content">Hi Ivan, <br />I am just a technical hands-on guy who doesnt undertand marketing so I would like to raise few basic points regarding openflow/sdn topic, which at this moment I dont have clarity on. Would you be able to comment on them:<br /><br />Forwarding-table size:<br />At the moment, local CP (RIB) gets downloaded to FIB and we get packet forwarding on a router. If we start evaluating too many fields (PBR) and (assume) are able to push these policies to the FIB - what would become of the FIB table size ?? Wouldnt an open-flow based switch go through the same scaling issue on its forwarding level if each flow was to be treated differently on the device ??<br /><br />Out-of-band channel:<br />If every device talking to a centralized control plane uses an out-of-band channel to talk to the openflow controller, isnt this a scaling concern?<br />And if devices dont use out-of-band channel to talk to the openflow controller, what will happen if a core link goes down affecting device &lt;&gt; controller communication? is it expected that the FIB of the device would already have a pre-programmed &quot;alternate&quot; or &quot;backup&quot; path computed and downloaded into it to be able to reroute packets? <br />Are we then talking about IP-FRR (which has topology restrictions) or LFA/RLFA ?.. <br />what do OF/SDN standards propose to mitigate this issue<br />Also, the response time from centralized controller for network events would not be the same as a local CP on the device</div>
          </div>
        </li>
      </div>
  </ol>

    </div>
  </div>
</div>
