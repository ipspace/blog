<div class="comments post" id="comments">
  <h4>10 comments:</h4>
  <div class="comments-content">
    <div class="comment-thread">
        <ol>
      <div>
        <li class="comment" id="1050276072646895657">
          <!--
          <div class="avatar-image-container">
            <img src="https://bp0.blogger.com/_vVy0M2C9-y4/R5-iUj9RngI/AAAAAAAAErA/dAfNsLjpKjA/S220-s31/HondaTahoe.jpg">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/17329533323640575989" rel="nofollow">DivSu</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c1050276072646895657" href="#1050276072646895657">25 March 2014 11:52</a>
              </span>
            </div>
            <div class="comment-content">Hi Ivan - a tangential question - I was wondering if there is a clear, and simple depiction of what happens behind the scenes from the time someone types let&#39;s say a youtube.com in a browser, back to when the video is loaded and played. Any pointers? Or maybe can you sketch something up? :P</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="1248891121304738776">
          <!--
          <div class="avatar-image-container">
            <img src="https://lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c1248891121304738776" href="#1248891121304738776">25 March 2014 12:22</a>
              </span>
            </div>
            <div class="comment-content">Obviously we don&#39;t know (and never will) what exactly is happening on the application layer, for some network-related details do check out my TCP/HTTP/SPDY course.<br /><br />http://demo.ipspace.net/get/SPDY#Videos</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="3466667658866494987">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">Ben</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c3466667658866494987" href="#3466667658866494987">25 March 2014 18:02</a>
              </span>
            </div>
            <div class="comment-content">DivSu: Not exactly what you are looking for, but Youtube published a lot of infos about their stack two years ago: <br /><br />http://highscalability.com/blog/2012/3/26/7-years-of-youtube-scalability-lessons-in-30-minutes.html<br /></div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="9043212420217099596">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c9043212420217099596" href="#9043212420217099596">26 March 2014 21:56</a>
              </span>
            </div>
            <div class="comment-content">Hello, very good document on Facebook.  I was wondering: How it can be possible that &quot;Traffic goes only over links where ND happened before BGP&quot;.  This is a comment on page 13 of the document.  How the hell BGP could goes up BEFORE ND ?<br /><br />- Martin B.<br /><br />Regards,</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="433909007310306593">
          <!--
          <div class="avatar-image-container">
            <img src="https://lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c433909007310306593" href="#433909007310306593">27 March 2014 06:52</a>
              </span>
            </div>
            <div class="comment-content">No idea. I&#39;m guessing BGP gets stuck if it tries to establish the session before ND happened. Nasty bug if that&#39;s true (hopefully fixed in GA code by now).</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="6795915137704022903">
          <!--
          <div class="avatar-image-container">
            <img src="https://lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/02630738310270581150" rel="nofollow">Unknown</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c6795915137704022903" href="#6795915137704022903">27 March 2014 15:10</a>
              </span>
            </div>
            <div class="comment-content">We have to run the IPv6 BGP sessions over IPv4.  It was covered in a slide.  This is due to limitations in the aggregation switches which cannot support the 2x the BGP sessions when you are doing both IPv4 and IPv6.</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="3302606640721304691">
          <!--
          <div class="avatar-image-container">
            <img src="https://lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13864243778869690341" rel="nofollow">Unknown</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c3302606640721304691" href="#3302606640721304691">27 March 2014 06:48</a>
              </span>
            </div>
            <div class="comment-content">&quot;They ran out of RFC 1918 address space..&quot;  Wait.... Whaaaat?<br />How?<br />Good step forward for the Internet as a whole though</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="7918528464773950401">
          <!--
          <div class="avatar-image-container">
            <img src="https://lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c7918528464773950401" href="#7918528464773950401">27 March 2014 06:53</a>
              </span>
            </div>
            <div class="comment-content">You&#39;d need a few million servers for that (they used /24 for each rack).</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="4673184925090723202">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c4673184925090723202" href="#4673184925090723202">30 March 2014 23:34</a>
              </span>
            </div>
            <div class="comment-content">Even if you had few a million servers you have to have some fairly lax ip address allocation policies to run out of IPv4 addresses in your private network.<br /><br />Sounds like poor design to me.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="6346780659214237098">
          <!--
          <div class="avatar-image-container">
            <img src="https://lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/07377919426705058481" rel="nofollow">Jason Heiss</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c6346780659214237098" href="#6346780659214237098">02 April 2014 02:03</a>
              </span>
            </div>
            <div class="comment-content">/24 per rack in the 10/8 space is 65k racks.  Presume they have some allocation inefficiencies (they probably have the IP space assigned in blocks to individual datacenters) and they&#39;re out of IPs at 10k racks.  Presume you have 40 servers in a rack that&#39;s 400k servers, which doesn&#39;t seem unreasonable for Facebook.  The main inefficiency here would seem to be using a /24 per rack.  A big Internet company I used to work for used a /25 per rack, which seems a little more reasonable.  A /26 is probably cutting it a bit close.  But even a /25 doesn&#39;t move the needle very far, it is still quite reasonable for them to be running out of RFC 1918 space.</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
  </ol>

    </div>
  </div>
</div>
