<div class="comments post" id="comments">
  <h4>6 comments:</h4>
  <div class="comments-content">
    <div class="comment-thread">
        <ol>
      <div>
        <li class="comment" id="5508257089501858283">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/15278026886554337341" rel="nofollow">Nischal</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c5508257089501858283" href="#5508257089501858283">13 August 2014 09:23</a>
              </span>
            </div>
            <div class="comment-content">Some implementations allow the use of a Control Word (RFC 4385) to disable ECMP for L2 payloads. The format of the Control Word guarantees that the first nibble is not 0x4 or 0x6.<br /><br />The L2 ECMP solution you&#39;ve described is FAT PW, wherein an &quot;entropy&quot; label gets<br />pushed at the bottom of the label stack.  Entropy Labels is a similar solution with broader scope i.e. it can be used for any payload. An ingress LER pushes an Entropy<br />Label and an Entropy Label Indicator (ELI) right before it pushes the Transport Label.<br /><br />FAT PW: http://tools.ietf.org/html/rfc6391<br />Entropy Labels: http://tools.ietf.org/html/rfc6790<br /><br />Broad adoption of the above RFCs should remove the need for arcane, platform dependent knobs to control MPLS transit load sharing behavior.<br /><br /></div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="1512273736390459447">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://twitter.com/fcuiller" rel="nofollow">fcuiller</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c1512273736390459447" href="#1512273736390459447">13 August 2014 10:12</a>
              </span>
            </div>
            <div class="comment-content">If you want more vendor specific MPLS loadbalancing details (and not only), here is a link for the Cisco ASR 9000 loadbalancing architecture: <br /><br />https://supportforums.cisco.com/document/111291/asr9000xr-loadbalancing-architecture-and-characteristics </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="1738256035360756161">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="http://www.mellowd.co.uk/ccie" rel="nofollow">Darren</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c1738256035360756161" href="#1738256035360756161">13 August 2014 11:35</a>
              </span>
            </div>
            <div class="comment-content">RFC6790 discusses the entropy label - http://tools.ietf.org/html/rfc6790<br />There is also a draft for segment routing using a smilar label, although where that label is placed can be in a number of different places - http://tools.ietf.org/html/draft-kini-mpls-entropy-label-src-stacked-tunnels-01</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="4317725072795847613">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">J Hand</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c4317725072795847613" href="#4317725072795847613">13 August 2014 14:35</a>
              </span>
            </div>
            <div class="comment-content">Many thanks for this clarification.  I thought I was missing something obvious in the previous post.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="4129581296979294956">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Tiziano</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c4129581296979294956" href="#4129581296979294956">14 August 2014 08:09</a>
              </span>
            </div>
            <div class="comment-content">To be more precise, you say that &quot;if the value in the first byte was 0x04, and likewise treated the payload as IPv6 packet if the value in the first byte was 0x06 ... &quot;. I think this is a typo, I&#39;m sure you mean &quot;if the value of the first nibble was ...&quot; .</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="199251697919556519">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.linkedin.com/pub/mohamed-kamal/76/91b/845" rel="nofollow">Mohamed Kamal</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c199251697919556519" href="#199251697919556519">18 August 2014 20:08</a>
              </span>
            </div>
            <div class="comment-content">In Cisco realm, Ingress PE will load balance traffic of L2VPN across equal cost links based upon the destination MAC address only, and it can be changed to source and destination MAC addresses.<br /><br />The problem is, if it&#39;s a L2VPN between HQ and a branch, the src-dst-mac pair will always be the same, and no load sharing would happen!<br /><br />Starting from IOS-XE 3.11 (As I remember), you can configure the L2VPN using the interface psudowire context, and you can configure ECMP based upon src-dst-ip address.<br /><br />Regards<br />mk</div>
          </div>
        </li>
      </div>
  </ol>

    </div>
  </div>
</div>
