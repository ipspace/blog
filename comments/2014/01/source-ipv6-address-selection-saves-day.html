<div class="comments post" id="comments">
  <h4>9 comments:</h4>
  <div class="comments-content">
    <div class="comment-thread">
        <ol>
      <div>
        <li class="comment" id="3839106864922266935">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="http://www.insinuator.net" rel="nofollow">Enno Rey</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c3839106864922266935" href="#3839106864922266935">14 January 2014 18:32</a>
              </span>
            </div>
            <div class="comment-content">Hi Ivan,<br /><br />I strongly disagree. In real-life we regularly see problems with source address selection (granted: usually in cases where, for whatever reasons, several GUAs exist in parallel on $INTERFACE). I&#39;ve had several cases where going through RFC 6724 rule-by-rule did not explain why $CLIENT acted the way it actually did and I&#39;ve even seen cases where this changed &quot;by minute&quot;. <br />Personally I don&#39;t expect source address selection to be fully solved in the near future, which is one of the reasons why we strongly recommend to keep the number of addresses on a given interface as small as possible. &quot;if there&#39;s a decision problem, reduce the number of choices&quot; [can help in other parts of life, too ;-)]<br /><br />For interest: can anybody confirm source address selection as of RFC 6724 (3484) to properly work in a sufficiently heterogeneous/complex network? I&#39;d be very interested...<br /><br />best<br /><br />Enno</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="8600514708623870581">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c8600514708623870581" href="#8600514708623870581">15 January 2014 07:27</a>
              </span>
            </div>
            <div class="comment-content">I would never recommend having multiple GUAs (from different prefixes) per interface - that&#39;s asking for trouble (I wouldn&#39;t expect host stack vendors to test that scenario). <br /><br />If you ever find a host stack where ULA+GUA combination doesn&#39;t work as expected, shout about it - they deserve to get the heat ;)</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="3361175699876538973">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c3361175699876538973" href="#3361175699876538973">10 November 2014 12:34</a>
              </span>
            </div>
            <div class="comment-content">There actually are cases of multiple GUAs, such as with full dual stack DSL connections. One GUA prefix is recent, while a second GUA prefix is being phased out over the course of the next 4 hours or so. However, at least the RFCs are designed to properly handle this and so far I didn&#39;t see any issues in a heterogenious environment with Linux Kubuntu, various Androids, Win7 and Win8.</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="6135471818892670105">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/15818883829738651247" rel="nofollow">shah</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c6135471818892670105" href="#6135471818892670105">17 January 2014 16:28</a>
              </span>
            </div>
            <div class="comment-content">What happens with address selection when client joins a multicast address. Which one is used ULA or GUA? </div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="1499216763465917890">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c1499216763465917890" href="#1499216763465917890">18 January 2014 10:29</a>
              </span>
            </div>
            <div class="comment-content">... and here&#39;s another reason I avoid multicasts as much as I can ;=)<br /><br />No idea - you might find the answer in the IPv6 Source Address Selection RFC (there&#39;s also a pretty good document describing Windows behavior), and then I&#39;d strongly recommend you verify the actual OS behavior with a few tests.</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="4978892461878639181">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/05043254055298826345" rel="nofollow">matjazsi</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c4978892461878639181" href="#4978892461878639181">19 January 2014 22:39</a>
              </span>
            </div>
            <div class="comment-content">Hi Ivan!<br />I strongly support your recommendation, specially in the environment where IPv6 addressing relies on external and centralised DHCPv6. Usage of ULA can solve many problems in case of DHCP-server isolation, at least it reduces the impact to internal services during the outage.<br />And yes, in principle a packet with ULA source should reach a global destination within the administrative scope and vice versa. I&#39;ve tried to explain this issues here http://njetwork.wordpress.com/2014/01/19/ipv6-scopes-and-zones/.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="1977990427943671974">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="http://www.netfarmers.net" rel="nofollow">Edgar</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c1977990427943671974" href="#1977990427943671974">18 June 2014 00:58</a>
              </span>
            </div>
            <div class="comment-content">A basic discussion I am missing is about how to assign ULA and GUA to a client. DHCPv6 cannot do the job. Therefore, you need - that´s my oppinion - a combination of SLAAC (e. g. Router advertising ULA Prefix and M-Flag =1) and DHCPv6 (responsible for the GUA prefix) ... or SLAAC is doing tha job alone (because it can advertise ULA and GUA prefix). Nevertheless, SLAAC is is like a red rag to a bull for administrators of big networks like NAT is for IPv6 purists ;-)<br /><br />Any best practices here. Technically the combination of DHCPv6 with SLAAC will work (even if M-Flag is 1 the client will learn the prefix from a router advertisement as well). But isn´t this one more step to make IPv6 again a liitle bit more complicated (not complex)?<br /></div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="9057002865761966882">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="http://metzlertech.wordpress.com/about/" rel="nofollow">Dan Metzler</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c9057002865761966882" href="#9057002865761966882">13 July 2014 17:00</a>
              </span>
            </div>
            <div class="comment-content">By itself, the notion of having ULA and GUA, on the same system, makes little sense.  Clearly it can be done, even just with slaac and multipIe advertised prefixes.  <br /><br />I think one thing you might be reaching for is privacy extensions with SLAAC RFC 4941?  But, I&#39;m not really sure what problem you&#39;re trying to solve.  Why would you want to have two addresses where one address routes over all of the same networks and more, but the other only routes over a subset of those?  The only reasons I can think of would be based on an application requirement.<br /><br />I suspect the other concept you&#39;re trying to reach for is a firewall to allow only the traffic you want through the GUA address that you ultimately use.<br /><br />Again, what does it gain you?</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="9127179022504621280">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c9127179022504621280" href="#9127179022504621280">14 July 2014 07:14</a>
              </span>
            </div>
            <div class="comment-content">Have you read the blog post I linked to in the intro paragraph?</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
  </ol>

    </div>
  </div>
</div>
