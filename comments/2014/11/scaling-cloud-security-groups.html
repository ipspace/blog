<div class="comments post" id="comments">
  <h4>4 comments:</h4>
  <div class="comments-content">
    <div class="comment-thread">
        <ol>
      <div>
        <li class="comment" id="636192179447730435">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/01335898315678692950" rel="nofollow">Unknown</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c636192179447730435" href="#636192179447730435">12 November 2014 19:06</a>
              </span>
            </div>
            <div class="comment-content">We are using this on our vBlock infrastructure today. We provisioned a few, large VLANs and then within the VMWare suite of tools, we built a number of security groups. Some are for protected tiers (PII, PCI, Database), some are for self-contained apps with few outside dependencies. The network (within the distributed virtual switch network) is relatively simple now, and controls are done at the security group layer. It greatly simplifies provisioning.<br /><br />For tenants, we still provision a separate VLAN with an edge gateway, and let the tenant provision their own security groups.<br /><br />There have been some challenges. If the VLAN is flat, and IP addresses are allocated first-come, first-served, you wind up with databases and middleware in non-contiguous IP space. That is fine, but for firewalls &quot;outside&quot; of the PAAS stack, they have no way to create an &quot;all databases&quot; rule based on a subnet... they now have to put the individual host IPs into the rule. A minor challenge. They are looking into IP Pooling and other options to allow certain server categories to pull from a range within the /20, but these methods are not quite there yet.<br /><br />Overall, it has worked well for us.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2786181850632177068">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/01395217775195260835" rel="nofollow">Wes Felter</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2786181850632177068" href="#2786181850632177068">12 November 2014 19:32</a>
              </span>
            </div>
            <div class="comment-content">Or you could use the VID/VNID as the group ID... :-)</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="5558306479032323523">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Anonymous</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c5558306479032323523" href="#5558306479032323523">17 November 2014 20:43</a>
              </span>
            </div>
            <div class="comment-content">Apache CloudStack uses iptables in conjunction with ipsets to achieve this scalability. ipset is a fantastic package. We have real-life uses with tens of thousands of ips in these sets and the lookup speed is still good enough</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="6350448181112719689">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c6350448181112719689" href="#6350448181112719689">18 November 2014 08:05</a>
              </span>
            </div>
            <div class="comment-content">Thank you! I learn something new every time you chime in.<br /><br />In the iptables case you were fortunate enough to be able to change the matching algorithm keeping the complexity down to O(n.log(m)). Sometimes you&#39;re bound by the hardware limitations (no way to implement ipset in TCAM) or information transfer protocol (no reasonably simple support for ipset-like construct in OpenFlow).</div>
          </div>
        </li>
      </div>
  </ol>

    </div>
  </div>
</div>
