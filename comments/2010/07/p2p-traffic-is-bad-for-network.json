{
  "comments": [
    {
      "date": "26 July 2010 08:15",
      "html": "Hi Ivan,<br /><br />Have a look at the following (apologies if you&#39;ve known all that, but to me it didn&#39;t appear to have come through in your post):<br /><br />1) http://www.zdnet.com/blog/storage/p4p-faster-smarter-p2p/303<br /><br />2) http://en.wikipedia.org/wiki/P2P_caching<br /><br />3) http://blog.bittorrent.com/2009/10/05/changing-the-game-with-%CE%BCtp/",
      "id": "2861515478482097409",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "Dmitri Kalintsev",
      "profile": null,
      "pub": "2010-07-26T08:15:19.000+02:00",
      "ref": "6788026380526027879",
      "type": "comment"
    },
    {
      "date": "26 July 2010 08:16",
      "html": "Forgot to subscribe to the replies :)",
      "id": "5653475343045738477",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "Dmitri Kalintsev",
      "profile": null,
      "pub": "2010-07-26T08:16:17.000+02:00",
      "ref": "6788026380526027879",
      "type": "comment"
    },
    {
      "date": "26 July 2010 08:44",
      "html": "Shill for the Internet monopolies.",
      "id": "5493340528674669120",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "Anonymous",
      "profile": null,
      "pub": "2010-07-26T08:44:06.230+02:00",
      "ref": "6788026380526027879",
      "type": "comment"
    },
    {
      "date": "26 July 2010 10:06",
      "html": "To be honest, much of the hoopla about P2P sounds like a bunch of Enterprise Network engineers failing to grasp that the model ISPs have built up is simply not sustainable using existing methods (and technologies)... and nobody in telecom has any vision about how to let paying customers do what they are trying to do.",
      "id": "5617021608538046635",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "James Cape",
      "profile": null,
      "pub": "2010-07-26T10:06:13.000+02:00",
      "ref": "6788026380526027879",
      "type": "comment"
    },
    {
      "date": "26 July 2010 12:24",
      "html": "While I agree about torrents being bad in corporate environment (people.supposed to work there) SPs should deal with any amount of bandwidth they sell, even.if user tends to occupy it 100% 24/7.",
      "id": "2955362269249607763",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "Misha",
      "profile": null,
      "pub": "2010-07-26T12:24:32.000+02:00",
      "ref": "6788026380526027879",
      "type": "comment"
    },
    {
      "date": "26 July 2010 13:34",
      "html": "It&#39;s not &quot;a bunch of Enterprise Network engineers&quot;, it&#39;s a (quite large &amp; vocal) bunch of users who want to do whatever they wish and who believe nobody should touch their traffic.<br /><br />As for the telecom industry: they are in a vise into which they put themselves.",
      "id": "7683810460097161775",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "Ivan Pepelnjak",
      "profile": null,
      "pub": "2010-07-26T13:34:31.000+02:00",
      "ref": "6788026380526027879",
      "type": "comment"
    },
    {
      "date": "26 July 2010 13:35",
      "html": "Absolutely in agreement. However, as I pointed out, P2P traffic is bad from the perspective that it cannot be coped with using existing QoS mechanisms.",
      "id": "8502242999738389631",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "Ivan Pepelnjak",
      "profile": null,
      "pub": "2010-07-26T13:35:16.000+02:00",
      "ref": "6788026380526027879",
      "type": "comment"
    },
    {
      "date": "26 July 2010 13:39",
      "html": "Thanks for the links. Very interesting (as always).<br /><br />P4P solves the long-haul congestion and might improve the situation for hub-and-spoke access networks. Supposedly it makes the situation worse on cable (shared media) networks, because it&#39;s easier to saturate the cable with locally-sourced traffic.<br /><br />P2P caching is an interesting idea. It would be interesting to see how big a cache you need to have reasonable improvements.<br /><br />uTP - need to study the details (assuming they are published anywhere). As long as it runs on TCP, it&#39;s only a marginal improvement. TCP should back off automatically when experiencing delays; the problem is the large discrepancy between the number of TCP sessions created by a P2P user versus the number of sessions a regular web/e-mail user has opened (and their duration).",
      "id": "4964061813490127694",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "Ivan Pepelnjak",
      "profile": null,
      "pub": "2010-07-26T13:39:22.000+02:00",
      "ref": "6788026380526027879",
      "type": "comment"
    },
    {
      "date": "26 July 2010 16:23",
      "html": "There is no such a thing as &quot;bad&quot; or &quot;good&quot; traffic. When you call any traffic &quot;bad&quot;, you actually stops being an engineer and starts you existence as a marketing guy selling your seminars. Traffic can be either &quot;in contract&quot; or &quot;out-of-contract&quot;. And there is a simple rule - don&#39;t sell a contract which you cannot fulfil. But human&#39;s greediness is pushing people here and there to violate this simple rule. They are inevitably punished, whether the punishment comes in a form of P2P application (for telecoms) or in a form of George Soros (for the Bank of England).",
      "id": "1290276111067478619",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "Anonymous",
      "profile": null,
      "pub": "2010-07-26T16:23:46.000+02:00",
      "ref": "6788026380526027879",
      "type": "comment"
    },
    {
      "date": "26 July 2010 16:52",
      "html": "What if p2p users will be smart enough to protect traffic with ipsec? Mark ALL ipsec traffic (including business VPN) as &quot;bad&quot;? Prohibit ipsec entirely? Require to subscribe &quot;enterprise/premium&quot; plans? (AT&amp;T do it)",
      "id": "9083327248091676032",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "Anonymous",
      "profile": null,
      "pub": "2010-07-26T16:52:37.000+02:00",
      "ref": "6788026380526027879",
      "type": "comment"
    },
    {
      "date": "26 July 2010 17:26",
      "html": "I&#39;m pretty sure the engineers at Facebook and Twitter would disagree with your thesis.<br /><br />http://torrentfreak.com/facebook-uses-bittorrent-and-they-love-it-100625/",
      "id": "222153823207017850",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "stretch",
      "profile": null,
      "pub": "2010-07-26T17:26:52.000+02:00",
      "ref": "6788026380526027879",
      "type": "comment"
    },
    {
      "date": "26 July 2010 18:15",
      "html": "OK, let&#39;s get into hair-splitting mode: I never used the &quot;bad traffic&quot; term. Please don&#39;t make it my problem if you&#39;re upset by people claiming P2P is bad ;) I just explained the effects current P2P implementations might have an average ISP network ... and the effects are bad, pure and simple.<br /><br />Next, the whole reason Internet works as well as it does is the presumed cooperative behavior of its users that allowed designers to bypass numerous checks-and-balances that burdened the traditional telco technologies. If we can no longer rely on cooperative behavior, the costs of the Internet infrastructure will go up, as those checks will have to be implemented.<br /><br />As I wrote (I hope you did consider my technical arguments), the solution is per-IP-address queuing, which is not commonly implemented.<br /><br />Last but not least, the root cause of all the problems we&#39;re discussing is that THERE IS NO CONTRACT. The only parameter promised by an ISP is the access speed to the first router (and in a cable network, not even that). Everything else is implicitly assumed by one or the other party.",
      "id": "2758862828050158785",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "Ivan Pepelnjak",
      "profile": null,
      "pub": "2010-07-26T18:15:24.000+02:00",
      "ref": "6788026380526027879",
      "type": "comment"
    },
    {
      "date": "26 July 2010 18:17",
      "html": "First of all, I&#39;m not saying ISP should block P2P traffic. On the contrary, I&#39;m against it. I&#39;m just pointing out that with the current QoS mechanisms P2P clients are allowed to grab disproportionate amounts of shared goods (bandwidth) and that in my opinion per-IP-address queuing is the only solution.<br /><br />As soon as we have per-user or per-IP-address queuing or bandwidth allocation, P2P would stop being a problem and IPSec would not help you a bit.",
      "id": "6459777298939724182",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "Ivan Pepelnjak",
      "profile": null,
      "pub": "2010-07-26T18:17:32.000+02:00",
      "ref": "6788026380526027879",
      "type": "comment"
    },
    {
      "date": "26 July 2010 18:24",
      "html": "Thanks for an excellent link. Using BT to distribute large amount of files to a large number of distributed servers is a marvelous use of the technology.<br /><br />I&#39;m also positive (and I am sure you&#39;d agree with me) that Facebook or Twitter would not allow their BitTorrent traffic to run rampant squeezing out all other traffic from their network.<br /><br />They have at least two options to control BT bandwidth utilization: It&#39;s quite easy to tightly control BT clients. You can specify # of TCP sessions (per-torrent or globally), per-torrent bandwidth, total bandwidth ... and you can mark desired BT traffic in a private network and queue it accordingly.<br /><br />However, while I absolutely enjoy the information you&#39;ve shared, I fail to see how it&#39;s relevant to our discussion. It&#39;s like saying viruses are good because some retroviruses are used as DNA carriers in genetic engineering.",
      "id": "1813071856935848453",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "Ivan Pepelnjak",
      "profile": null,
      "pub": "2010-07-26T18:24:35.000+02:00",
      "ref": "6788026380526027879",
      "type": "comment"
    },
    {
      "date": "26 July 2010 18:40",
      "html": "Just pointing out that you may want to qualify your thesis. Peer-to-peer protocols are not inherently &quot;bad for the network.&quot;",
      "id": "2115323474777613300",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "stretch",
      "profile": null,
      "pub": "2010-07-26T18:40:34.000+02:00",
      "ref": "6788026380526027879",
      "type": "comment"
    },
    {
      "date": "26 July 2010 18:44",
      "html": "Hair-splitting mode ON.<br /><br />I was not speaking about the protocols, but about the uncontrolled use of these protocols in an environment that was designed for a cooperative use.",
      "id": "2623702675850036499",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "Ivan Pepelnjak",
      "profile": null,
      "pub": "2010-07-26T18:44:08.000+02:00",
      "ref": "6788026380526027879",
      "type": "comment"
    },
    {
      "date": "26 July 2010 19:06",
      "html": "Exactly. ISPs complaining about users using the traffic that they pay for. Few years ago there was a proposal from Anja Feldmann in Berlin about a monster called &quot;Oracle&quot; to deal with this stuff.<br /><br />http://www.net.t-labs.tu-berlin.de/research/isp-p2p/<br /><br />Killed instantly from the audience, not to mention.",
      "id": "4702810892707299756",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "Jan Zorz",
      "profile": null,
      "pub": "2010-07-26T19:06:08.000+02:00",
      "ref": "6788026380526027879",
      "type": "comment"
    },
    {
      "date": "26 July 2010 19:07",
      "html": "Yes, &quot;bad&quot; traffic should set the evil bit on :)<br /><br />http://www.faqs.org/rfcs/rfc3514.html",
      "id": "7603206299792879966",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "Jan Zorz",
      "profile": null,
      "pub": "2010-07-26T19:07:53.000+02:00",
      "ref": "6788026380526027879",
      "type": "comment"
    },
    {
      "date": "26 July 2010 19:09",
      "html": "this have a spike and a long tail, specially if we know, that p2p traffic is slowly moving to IPv6 protocol. Latest windows hosts have teredo on by default, so cache/catch that :)",
      "id": "4781773921025815936",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "Jan Zorz",
      "profile": null,
      "pub": "2010-07-26T19:09:56.000+02:00",
      "ref": "6788026380526027879",
      "type": "comment"
    },
    {
      "date": "26 July 2010 19:12",
      "html": "subscribing to the stream :)",
      "id": "3895225209337887858",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "Jan Zorz",
      "profile": null,
      "pub": "2010-07-26T19:12:49.000+02:00",
      "ref": "6788026380526027879",
      "type": "comment"
    },
    {
      "date": "26 July 2010 19:18",
      "html": "Use QuantumFlow processors on ASR to set it: <br /><br />http://blog.ioshints.info/2008/04/rfc-3514-implemented-by-asr-series-of.html",
      "id": "669604668425803421",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "Ivan Pepelnjak",
      "profile": null,
      "pub": "2010-07-26T19:18:43.000+02:00",
      "ref": "6788026380526027879",
      "type": "comment"
    },
    {
      "date": "26 July 2010 19:20",
      "html": "No change. If you do per-session QoS, you&#39;re fried, if you manage to do per-address QoS, it&#39;s the same as with IPv4.<br /><br />Now, here&#39;s a good question: does SCE support IPv6 ... not sure  :-P, need to ask our gurus.",
      "id": "5503487824643057086",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "Ivan Pepelnjak",
      "profile": null,
      "pub": "2010-07-26T19:20:55.000+02:00",
      "ref": "6788026380526027879",
      "type": "comment"
    },
    {
      "date": "26 July 2010 19:38",
      "html": "Exactly :) I wanted to ask that question, but I was sure you&#39;ll come to that :)<br /><br />Salute from IEF78 @Maastricht.",
      "id": "3019552691174077671",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "Jan Zorz",
      "profile": null,
      "pub": "2010-07-26T19:38:15.000+02:00",
      "ref": "6788026380526027879",
      "type": "comment"
    },
    {
      "date": "26 July 2010 20:00",
      "html": "The root cause of P2P QoS problem is the flow-fairness and congestion-adaption model that has been in the Internet since the very first days. However, if you try to think of a more suitable fairness model you&#39;ll quickly run in the problems found by the game theory and the theory of public welness. <br /><br />How would you define fairness (e.g. egalitarian/utilitarian approaches) among ISP customers? What scale do you define fairness at (link, aggregation point, ISP, multiple-ISPs, Internet)?  Is it possible to implement fairness at all, when ISP oversubscribe their networks and offer &quot;unlimited&quot; contracts to customers, based on statistical assumptions which are never satisfied asymptotically?<br /><br />The above questions are fundamental to any statistical multiplexing network that uses oversubscription to realize better value. The intuitive fairness is broken at the very beginning! :) All proposed solutions (e.g. changing flow mask) may only help to alleviate, but not solve the problem, as no one knows how fairness should be truly implemented in the deceptive world of ISP services :). <br /><br />Here is an example: let&#39;s say you aggregate flows based on customer IP address to deafeat single hosts sourcing barrage of flows. With the flow-fairness model it will give an enterprise customer with more hosts advantage over the customer having less hosts in their networks. It&#39;s the same problem, just different scale. The flow-fairness simple does not work as it should be. Thus, any solution within flow-fairness that works at the small scale may not work at a larger scale. <br /><br />Finally, I would recommend reading the following draft documet:<br /><br />http://bobbriscoe.net/projects/refb/draft-briscoe-tsvarea-fair-02.html<br /><br />It offers interesting discussion and some rather novel ideas for fairness management.",
      "id": "3642064000607682771",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "Petr Lapukhov",
      "profile": null,
      "pub": "2010-07-26T20:00:07.000+02:00",
      "ref": "6788026380526027879",
      "type": "comment"
    },
    {
      "date": "27 July 2010 00:19",
      "html": "Ivan,<br /><br />Here&#39;s the uTP protocol description for your enjoyment: http://bittorrent.org/beps/bep_0029.html . No, it does not use TCP. :)<br /><br />Regarding the cache size for P2P - I think you might be surprised that you don&#39;t need terribly large storage to get high hit ratios. There is a tendency to download stuff that is &quot;popular&quot; at a given time, and a few terabytes of storage (well below 10) will easily take care of that. The reason behind this is *why* people download certain content - it is most often because their friends are talking about it. Particular movie, show or music album. The rest of the available content lives in relative obscurity.<br /><br />Also, most P2P caching solutions I&#39;ve heard about provide mechanisms for controlling the download rate without the need to use DPI solutions.<br /><br />And, of course, there are signature-based DPI solutions, which can enforce QoS policies directly, without the need to cache anything.",
      "id": "567121437330793458",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "Dmitri Kalintsev",
      "profile": null,
      "pub": "2010-07-27T00:19:48.000+02:00",
      "ref": "6788026380526027879",
      "type": "comment"
    },
    {
      "date": "27 July 2010 01:56",
      "html": "I&#39;m always surprised by service provider-minded people blaming the users for this problem.<br /><br />As Ivan has pointed out in a previous comment, there is no contract other than an implicit access rate to the first hop router.<br /><br />Maybe there should be one?  Blaming the users for their interpretation of the marketing materials is crazy.  Users have no idea what the network is actually capable of, or what&#39;s expected of them.  All they know is what&#39;s printed in 10m tall print on a billboard.<br /><br />Blame your marketing department for this debacle, not your users.   :-P",
      "id": "42511121420530689",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "yournamegoeshere",
      "profile": null,
      "pub": "2010-07-27T01:56:15.000+02:00",
      "ref": "6788026380526027879",
      "type": "comment"
    },
    {
      "date": "27 July 2010 14:27",
      "html": "Thanks for illustrating my point succinctly. Blaming customers for trying to do use what they&#39;re paying for in ways that a core chunk of the provider business model doesn&#39;t take into account.<br /><br />It&#39;s an attitude that reeks of large, top-down enterprise, where IT is in charge and fucking up the network will get you fired...as opposed to a competitive market where you have to innovate and serve your customers, or you will go out of business.<br /><br />I&#39;m saying the network sucks because it can&#39;t let people do what they want to do. Users *should* be able to do whatever they damned well please, and if the technology doesn&#39;t exist to let them, then that&#39;s a tremendous opportunity for engineers to tell the &quot;hey, I help allow [this torrenty-like-thing we all use and love now]&quot; story 20 years from now, and businesses to make a shitload of cash in the meantime.<br /><br />Perhaps also a way for the IETF to atone for PIM ;-)",
      "id": "900711921575631066",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "James Cape",
      "profile": null,
      "pub": "2010-07-27T14:27:02.000+02:00",
      "ref": "6788026380526027879",
      "type": "comment"
    },
    {
      "date": "27 July 2010 18:01",
      "html": "James, the technology is there and it&#39;s very simple:<br /><br />* fine-tune your BitTorrent settings to consume 1/10 to 1/4 of your access speed and limit the number of TCP connections to 50-100.<br />* implement the same fine-tuning mechanism automatically in BitTorrent client;<br />* use BitTorrent client with uTP (supposedly it works better than BT over TCP, need to study it a bit)<br />* accept that BT traffic is classified as lower-priority traffic. Not rate-limited, not throttled, not dropped, just easily recognizable and lower priority. As BT represents 50-60% of Internet traffic, giving the other traffic priority will not hurt it badly.<br /><br />These modifications would make [this torrenty-thing we all use] more lovable without a major sacrifice. Unfortunately, the argument has left the technical waters years ago and became political (best case) or (usually) religious.<br /><br />Of course some SPs (particularly those that love ridiculously low usage caps) would still try all sorts of tricks to raise their ARPU, but the market will eventually deal with them.",
      "id": "8308474986615188764",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "Ivan Pepelnjak",
      "profile": null,
      "pub": "2010-07-27T18:01:55.000+02:00",
      "ref": "6788026380526027879",
      "type": "comment"
    },
    {
      "date": "01 August 2010 14:00",
      "html": "&quot;who believe nobody should touch their traffic.&quot;<br /><br />I am one of them. I work as a network security admin - but when I am at home I am a paying customer.",
      "id": "4427459212241314319",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "Anonymous",
      "profile": null,
      "pub": "2010-08-01T14:00:33.000+02:00",
      "ref": "6788026380526027879",
      "type": "comment"
    }
  ],
  "count": 29,
  "id": "6788026380526027879",
  "type": "post",
  "url": "2010/07/p2p-traffic-is-bad-for-network.html"
}