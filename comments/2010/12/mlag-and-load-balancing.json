{
  "comments": [
    {
      "date": "22 December 2010 14:08",
      "html": "Hey Ivan,<br /><br />First; Open discloure. I am an HP Networking Employee.<br /><br />Great posts on the issues surrounding MLAG. I think that better hashing algos can combat some of the issues you bring up, but I also think there&#39;s a application that we are forgettign to address at all. MLAG can ALSO be useful in LAN enterprise ( not data center ) networks to gain the same benefits. <br /><br />I would argue in a typical LAN, many of the issues you&#39;re bringing up are not going to be such an issue. In a LAN, I would feel that the true advantage of using MLAGG is not necessarily added capacity, but actually the benefit of a non-converging topology. Because MLAGG allows you to create logically loop-free topologies ( whether they use IRF/VSS/Virtual Chassis or other ), the issues caused in large networks by spanning-tree convergence are largely negated. Since there is no &quot;loop&quot; in the network, spanning tree becomes a purely protectionist mechnism. <br /><br />What are your thoughts on MLAGG in a LAN enterprise as opposed to a data center? I&#39;m not saying the techonlogy is 100%, but I do believe it&#39;s a heck of a lot better than the typical STP based networks that we&#39;re using today.<br /><br />thoughts?<br /><br />Chris",
      "id": "1152520229188627651",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "Chris Young",
      "profile": null,
      "pub": "2010-12-22T14:08:48.000+01:00",
      "ref": "3566659802866073632",
      "type": "comment"
    },
    {
      "date": "08 January 2011 20:12",
      "html": "I&#39;d like to add a few points:  <br /> <br />1. Most OS support multiple levels of hashing. SourceIP+DestIP I believe is available on most major operating systems.  <br />2. Law of large numbers -- with a good hashing algorithm, the more hosts you have in the network, the more balanced your transit links should become. This is assuming that your network isn&#39;t comprised of identically configured and behaving clones.  <br />3. What&#39;s the goal,.. network availability or bandwidth? My primary goal is end-to-end (host-to-host) high-availability, but the extra bandwidth is a nice bonus which I am careful not to sell. On a side note in regards to high availability, LACP is available on all major operating systems and, I can truly say, has finally come of age on the host side.  <br />4. Good plumbing is critical to avoiding transit congestion.  <br /> <br />To extend your topology above, I would add an additional router (L3 switch) such that the two routers appear to the access switches below as one switch (using MCLAG obviously) and to the IP (or IP/MPLS) network above as two routers. The access switch pair appears to the two routers above as one switch (using MCLAG obviously).  Active-active VRRP is either available now (on N7K) or soon to be available on some routers (which I can&#39;t say yet) to ensure the interconnect between the routers won&#39;t take a hit in this topology.",
      "id": "333320195773184890",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "FullMesh",
      "profile": null,
      "pub": "2011-01-08T20:12:22.000+01:00",
      "ref": "3566659802866073632",
      "type": "comment"
    },
    {
      "date": "08 January 2011 20:30",
      "html": "Ouch, forgot to reply :( Thanks for a great question, will focus on IRF and equivalent Juniper solution in the next MLAG post.",
      "id": "5060963493600256236",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "Ivan Pepelnjak",
      "profile": null,
      "pub": "2011-01-08T20:30:20.000+01:00",
      "ref": "3566659802866073632",
      "type": "comment"
    },
    {
      "date": "08 January 2011 20:33",
      "html": "Thanks for the feedback! I mostly agree with you, however:<br /><br />#1 - while most OS support IP-based hashing, it&#39;s rarely enabled by default. The administrators have to be aware of the consequences (and the need to enable it).<br /><br />#2 - absolutely agree ... if you use IP-based hashing. With MAC-based hashing, you&#39;re toast if most of the traffic goes beyond the first-hop router.<br /><br />#3 - LACP is not available in VMware ESX(i) unless you use NX1K.",
      "id": "578169770637830902",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "Ivan Pepelnjak",
      "profile": null,
      "pub": "2011-01-08T20:33:20.000+01:00",
      "ref": "3566659802866073632",
      "type": "comment"
    },
    {
      "date": "09 January 2011 04:30",
      "html": "Regarding #3 -- Sorry, I shouldn&#39;t have said &quot;all&quot; as I am not familiar with VMware ESX.  The following OS do support LACP -- Windows, OS X, Linux, BSD, AIX and Solaris.  It&#39;s a shame that ESX does not support it since LACP is useful for when Ethernet PHY link status is insufficient to detect an impaired link, such as when there is a unidirectional link or when some component further in is malfunctioning.  I will need to talk to our server virtualization team to lean on VMWare regarding this and hopefully others out there will do the same...",
      "id": "3265604227357546960",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "FullMesh",
      "profile": null,
      "pub": "2011-01-09T04:30:18.000+01:00",
      "ref": "3566659802866073632",
      "type": "comment"
    }
  ],
  "count": 5,
  "id": "3566659802866073632",
  "type": "post",
  "url": "2010/12/mlag-and-load-balancing.html"
}