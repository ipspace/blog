{
  "comments": [
    {
      "date": "02 October 2010 17:36",
      "html": "Hi, Ivan.<br /><br />I was configured a DMVPN topology with a &quot;spoke&quot; with two ISP connections (one dedicated and one DSL).<br />when I asked me, what can it  to do to control the tunnel establishing for a specific ISP?; I found the &quot;tunnel route-via&quot; command; for this reason I proced to probe it.<br />For me this command work fineBOG-RT-01#sh ip route 192.168.162.0<br />Routing entry for 192.168.162.0/24<br />  Known via &quot;eigrp 1600&quot;, distance 90, metric 2758656, type internal<br />  Redistributing via eigrp 1600<br />  Last update from 10.249.249.249 on Tunnel32767, 00:01:26 ago<br />  Routing Descriptor Blocks:<br />    10.249.249.249, from 10.249.249.249, 00:01:26 ago, via Tunnel32767<br />      Route metric is 10258688, traffic share count is 13<br />      Total delay is 10110 microseconds, minimum bandwidth is 256 Kbit<br />      Reliability 254/255, minimum MTU 1400 bytes<br />      Loading 1/255, Hops 2<br />    10.248.248.249, from 10.248.248.249, 00:01:26 ago, via Tunnel32768<br />      Route metric is 10258688, traffic share count is 13<br />      Total delay is 10110 microseconds, minimum bandwidth is 256 Kbit<br />      Reliability 255/255, minimum MTU 1400 bytes<br />      Loading 1/255, Hops 2<br />  * 10.247.247.249, from 10.247.247.249, 00:01:26 ago, via Tunnel32766<br />      Route metric is 2758656, traffic share count is 48<br />      Total delay is 10110 microseconds, minimum bandwidth is 1024 Kbit<br />      Reliability 255/255, minimum MTU 1400 bytes<br />      Loading 1/255, Hops 2<br /><br />BOG-RT-01#<br />BOG-RT-01#<br /><br /><br />BOG-RT-01#sh ip nhrp  brief<br />   Target             Via            NBMA           Mode   Intfc   Claimed <br />10.247.247.249/32    10.247.247.249  1XX.2XX.93.230  static   Tu32766 &lt;   &gt;<br />10.249.249.249/32    10.249.249.249  1XX.XX.1.236    static   Tu32767 &lt;   &gt;<br />10.248.248.249/32    10.248.248.249  1XX.2XX.93.230  static   Tu32768 &lt;   &gt;<br />BOG-RT-01#<br /><br /><br />BOG-RT-01#sh ip eigrp neig<br />IP-EIGRP neighbors for process 1600<br />H   Address                 Interface       Hold Uptime   SRTT   RTO  Q  Seq<br />                                            (sec)         (ms)       Cnt Num<br />2   10.247.247.249          Tu32766            2 00:38:10  177  1062  0  5389<br />1   10.248.248.249          Tu32768            2 00:51:31  180  1080  0  5390<br />0   10.249.249.249          Tu32767            2 00:51:37  162   972  0  4590<br />BOG-RT-01#",
      "id": "5940646711084408093",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "David Salazar",
      "profile": null,
      "pub": "2010-10-02T17:36:29.000+02:00",
      "ref": "5781960252038888614",
      "type": "comment"
    },
    {
      "date": "02 October 2010 17:38",
      "html": "I was do a debug for tunnel route-via, as you can see:<br /><br />BOG-RT-01#<br />BOG-RT-01#debug tunnel route-via   <br />Tunnel route-via debugging is on<br />BOG-RT-01#<br />071441: Oct  2 10:12:49: TUN-VIA: Tunnel32768 candidate route-via FastEthernet0/0, next hop 1X0.XXX.174.1<br />071442: Oct  2 10:12:49: TUN-VIA: Tunnel32768 route-via action is forward<br />071443: Oct  2 10:12:49: TUN-VIA: Tunnel32768 candidate route-via FastEthernet0/0, next hop 1XX.1XX.174.1<br />071444: Oct  2 10:12:49: TUN-VIA: Tunnel32768 route-via action is forward<br />071445: Oct  2 10:12:49: TUN-VIA: Tunnel32766 candidate route-via FastEthernet0/1.110, next hop 1XX.1XX.231.1<br />071446: Oct  2 10:12:49: TUN-VIA: Tunnel32766 route-via action is forward<br />071447: Oct  2 10:12:50: TUN-VIA: Tunnel32768 candidate route-via FastEthernet0/0, next hop 1XX.1XX.174.1<br />071448: Oct  2 10:12:50: TUN-VIA: Tunnel32768 route-via action is forward<br />071449: Oct  2 10:12:50: TUN-VIA: Tunnel32768 candidate route-via FastEthernet0/0, next hop 1XX.1XX.174.1<br />071450: Oct  2 10:12:50: TUN-VIA: Tunnel32768 route-via action is forward<br />071451: Oct  2 10:12:50: TUN-VIA: Tunnel32768 candidate route-via FastEthernet0/0, next hop 1XX.1XX.174.1<br />071452: Oct  2 10:12:50: TUN-VIA: Tunnel32768 route-via action is forward<br />071453: Oct  2 10:12:50: TUN-VIA: Tunnel32766 candidate route-via FastEthernet0/1.110, next hop 1XX.1XX.231.1<br />071454: Oct  2 10:12:50: TUN-VIA: Tunnel32766 route-via action is forward<br />071455: Oct  2 10:12:50: TUN-VIA: Tunnel32768 candidate route-via FastEthernet0/0, next hop 1XX.1XX.174.1<br />071456: Oct  2 10:12:50: TUN-VIA: Tunnel32768 route-via action is forward<br />071457: Oct  2 10:12:50: TUN-VIA: Tunnel32768 candidate route-via FastEthernet0/0, next hop 1XX.1XX.174.1<br />071458: Oct  2 10:12:50: TUN-VIA: Tunnel32768 route-via action is forward<br />071459: Oct  2 10:12:50: TUN-VIA: Tunnel32766 candidate route-via FastEthernet0/1.110, next hop 1XX.1XX.231.1<br />071460: Oct  2 10:12:50: TUN-VIA: Tunnel32766 route-via action is forward<br />071461: Oct  2 10:12:51: TUN-VIA: Tunnel32768 candidate route-via FastEthernet0/0, next hop 1XX.1XX.174.1<br />071462: Oct  2 10:12:51: TUN-VIA: Tunnel32768 route-via action is forward<br />071463: Oct  2 10:12:51: TUN-VIA: Tunnel32768 candidate route-via FastEthernet0/0, next hop 1XX.1XX.174.1<br />BOG-RT-01#",
      "id": "8063961773820185195",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "David Salazar",
      "profile": null,
      "pub": "2010-10-02T17:38:59.000+02:00",
      "ref": "5781960252038888614",
      "type": "comment"
    },
    {
      "date": "03 October 2010 17:06",
      "html": "I suppose you&#39;re using IPSec (without IPSec it works just fine). Are you sure the packets are actually exiting through the desired interface? <br /><br />Debugging printouts always suggest everything is dandy, but the packets just refuse to go out the desired interface.<br /><br />Last but not least - if you&#39;re positive the packets do go out as expected - which IOS release are you using?",
      "id": "7703290867943776151",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "Ivan Pepelnjak",
      "profile": null,
      "pub": "2010-10-03T17:06:32.000+02:00",
      "ref": "5781960252038888614",
      "type": "comment"
    },
    {
      "date": "25 August 2011 17:41",
      "html": "Does anyone know if Cisco has fixed this in 15.1M1?",
      "id": "7640549311950084383",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "George Glynn",
      "profile": null,
      "pub": "2011-08-25T17:41:08.256+02:00",
      "ref": "5781960252038888614",
      "type": "comment"
    },
    {
      "comments": [
        {
          "date": "31 January 2014 14:51",
          "html": "Hey, Jere, did you ever give this a try with the newer IOS? Fixed or still broken?",
          "id": "3641378968832194281",
          "image": "https://resources.blogblog.com/img/blank.gif",
          "name": "George Glynn",
          "profile": "http://www.biffduncan.com",
          "pub": "2014-01-31T14:51:41.966+01:00",
          "ref": "7859405445055461484",
          "type": "comment"
        }
      ],
      "date": "30 August 2013 21:39",
      "html": "Just ran into this problem as well.  Seemed like route-via was the perfect solution to my dual-ISP DMVPN setup, but won&#39;t work with the ipsec protection profle.<br /> <br />I have 15.0(1)M7 though - so I&#39;ll be upgrading to try again with a more recent code revision.",
      "id": "7859405445055461484",
      "image": "https://resources.blogblog.com/img/blank.gif",
      "name": "Jere Cassidy",
      "profile": null,
      "pub": "2013-08-30T21:39:11.272+02:00",
      "ref": "5781960252038888614",
      "type": "comment"
    },
    {
      "date": "28 April 2016 13:12",
      "html": "Awesome blog and quite an old article..<br />I confirm &quot;tunnel route-via&quot;  still does NOT work with &quot;tunnel protection&quot; on 15.1(4)M7.<br /><br />With two ISPs and equal 0/0 routes you got russian roulette :) GRE traffic simply doesn&#39;t flow the way specified.<br />So, VRF is still the only solution.",
      "id": "5634192170291837914",
      "image": "https://lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35",
      "name": "i3laze",
      "profile": "https://www.blogger.com/profile/13493067859498617535",
      "pub": "2016-04-28T13:12:18.708+02:00",
      "ref": "5781960252038888614",
      "type": "comment"
    }
  ],
  "count": 7,
  "id": "5781960252038888614",
  "type": "post",
  "url": "2010/06/tunnel-route-selection-and-dmvpn-tunnel.html"
}