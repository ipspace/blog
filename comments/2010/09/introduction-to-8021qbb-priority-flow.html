<div class="comments post" id="comments">
  <h4>20 comments:</h4>
  <div class="comments-content">
    <div class="comment-thread">
        <ol>
      <div>
        <li class="comment" id="8782139955439808371">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Ellion Ellion</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c8782139955439808371" href="#8782139955439808371">07 September 2010 15:10</a>
              </span>
            </div>
            <div class="comment-content">As i understand - this function is not implemented on L3-switches (like c3560)?</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2691836300196023728">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2691836300196023728" href="#2691836300196023728">07 September 2010 17:00</a>
              </span>
            </div>
            <div class="comment-content">PFC has nothing to do with L2 or L3 switching. It&#39;s a per-hop function and can be easily (and probably usefully) used on L3 links.<br /><br />However, it does require hardware support and will thus probably never be available on older switches (or will require new linecards on modular boxes).<br /><br />At the moment, PFC is considered to be a Data Center functionality (although, as said above, could be useful in other scenarios as well), so don&#39;t expect to see it elsewhere any time soon.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="8597470879662803450">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Ellion Ellion</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c8597470879662803450" href="#8597470879662803450">07 September 2010 19:29</a>
              </span>
            </div>
            <div class="comment-content">Sad (:<br />It would be great, to see something like PFC for vlans or l2/l3 addresses.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="1745710491461306503">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Etherealmind</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c1745710491461306503" href="#1745710491461306503">09 September 2010 13:30</a>
              </span>
            </div>
            <div class="comment-content">Probably worth noting that PAUSE is how FC controls senders today so would work on Ethernet, but not for converged systems where you might want to back off the data so that storage can enjoy a higher level of service.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="169458640612857776">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c169458640612857776" href="#169458640612857776">09 September 2010 15:51</a>
              </span>
            </div>
            <div class="comment-content">Actually you have to back off storage so it doesn&#39;t get lost. More about that when I cover 802.1Qau/az.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="7394541475328055918">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="http://www.linkedin.com/in/gabrielrosas" rel="nofollow">Gabe Rosas</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c7394541475328055918" href="#7394541475328055918">28 August 2013 21:20</a>
              </span>
            </div>
            <div class="comment-content">In a converged iSCSI environment where my server adapter support 802.1Qbb connected to a ToR switch that supports and is configured for PFC is there any need for specific 802.1Qbb support on the Array side? or is it enough to receive a classic pause frame from the array?<br /><br />One more Q - if the  same server in question is using storage that is not directly connected does the frame properly traverse multiple switches back to the sender ok?  I see lots of documentation mentioning the medium type/lenght limitations, but not much in the case of multiple switches.<br /><br />Lastly Thanks for the article! (i know I&#39;m reading this a few years after the fact, but glad I found it).</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="6727615915799531946">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c6727615915799531946" href="#6727615915799531946">29 August 2013 11:20</a>
              </span>
            </div>
            <div class="comment-content">Classic pause frames on the storage side SHOULD be enough, but do check with the switch vendor(s). There might be a slight gap between theory and practice ;)<br /><br />PFC is a hop-by-hop mechanism and thus works equally well for directly-connected nodes as for multi-switch environments (note: some people say you might get into unpleasant HoL blocking scenarios without QCN in very large environments).</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="1697557760015262694">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="http://www.linkedin.com/in/gabrielrosas" rel="nofollow">Gabe Rosas</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c1697557760015262694" href="#1697557760015262694">02 September 2013 16:38</a>
              </span>
            </div>
            <div class="comment-content">Thanks Ivan!  <br /><br />I believe I&#39;m at a satisfactory place with PFC.  I&#39;ve been trying to track down everything out there on the topic between the time I posted the comment and now.<br /><br />Found a blog reference stating that multiple storage vendors recommend using 802.3x mode desired on the switch side (Flow control RX only).  Really couldn&#39;t find much even from the storage vendors themselves on the topic.  But it sounds reasonable enough that I should only need to be able to process inbound PAUSE frames.  <br /><br />I&#39;m investigating QCN now as my logical next step.  Not sure if a leaf spine layout where the switch &#39;hops&#39; is an architecture that would benefit from QCN, but it almost sees impossible that it would even be implemented where there are more switch hops.  I&#39;m in a place where even my vendor documentation doesn&#39;t seem reliable regarding QCN (One white paper states support for QCN, another white paper for the same switch only mentions ECN). Hehe - It seems for every answer I find I come up with few more questions.  Especially around converged iSCSI implementations.  Lots on FCoE but not many are willing to give authoritative recommendations on converged iSCSI. <br /><br />I guess I really have to bite the bullet and start reading RFC3720 to my kids at bed time.<br /><br />Sorry for the rant - thanks for the response.<br /><br />-Gabe</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="3663021713098515514">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c3663021713098515514" href="#3663021713098515514">02 September 2013 17:56</a>
              </span>
            </div>
            <div class="comment-content">Don&#39;t trust white papers. Ever. <br /><br />If a feature is not described in the product configuration guide, it&#39;s not there ... and if the vendor doesn&#39;t publish product documentation online, run away as fast as you can.<br /><br />BTW, RFC 3720 won&#39;t help you. It deals with the stuff above TCP and assumes the network gnomes do their magic.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="8152164256367177106">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="http://networkdojo.net" rel="nofollow">Gabe Rosas</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c8152164256367177106" href="#8152164256367177106">04 September 2013 02:31</a>
              </span>
            </div>
            <div class="comment-content">Hahaha : -) <br /><br />Advise taken.  Just to report back in.. my sort of my in-depth exploration of DCB and iSCSI pretty much ended with a senior colleague (who happened to be deeply involved with DCB in the lab during the FCoE push 2 years ago) was explaining to me that while PFC sounds hands down better than 802.3x FC, the big benefit comes from deploying it alongside ETC... and ETC along with PFC need to be negotiated end to end [Host &lt;-&gt; Switch &lt;-&gt; Storage] and well.. PFC might as well be no-existent from the storage perspective.  In any case your articles have been beyond educational. <br /><br />Thanks for all the great feedback.  You can be sure I&#39;m closely following your new content via RSS.  <br /><br />-Gabe.</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="3950744931286511446">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/07345674420526592526" rel="nofollow">vPackets</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c3950744931286511446" href="#3950744931286511446">28 March 2014 02:22</a>
              </span>
            </div>
            <div class="comment-content">I am a bit confused when you say :<br /><br />&quot;802.1Qbb is a simple extension of the 802.3x mechanism: the PAUSE frame contains a 8-bit bit mask of 802.1p priorities (specifying which traffic classes should be paused) and a timer for each priority specifying how long the traffic in that priority class should be paused. The per-priority PAUSE mechanism allows the storage array to tell the switch it should stop sending just the FCoE traffic (assuming FCoE traffic is marked with priority value=3).&quot;<br /><br />According to the Cisco and IEEE documents, there are only 8 possible CoS used within PFC so that would be 3 bits (802.1p)<br /><br />Can you clarify IVan ? :)<br /><br />Thanks<br /><br />Nicolas<br /></div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="473098092456807965">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c473098092456807965" href="#473098092456807965">28 March 2014 16:34</a>
              </span>
            </div>
            <div class="comment-content">3-bit 802.1p field = 8 values = 8-bit mask (one bit for each value indicating traffic in that class needs to be paused). Makes sense?</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2627523766962837040">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/07345674420526592526" rel="nofollow">vPackets</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2627523766962837040" href="#2627523766962837040">09 April 2014 15:37</a>
              </span>
            </div>
            <div class="comment-content">Yeah but you said 8 bits :)</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="1035015080810288448">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/15017249756689705347" rel="nofollow">Bruce</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c1035015080810288448" href="#1035015080810288448">19 June 2015 18:34</a>
              </span>
            </div>
            <div class="comment-content">Nicolas, a 3 bit field can specify only one of 8 classes at a time.  The pause frame must be able to specify 1 of 8 classes, or 2 of 8 classes, or ... 7 of 8 classes at the same time.  Therefore to specify any and all classes a particular pause frame applies to, you need one bit for each possible class, or 8 bits.  <br /><br />Think of it this way, all combinations of 3 bits specify the names (numbers) of the 8 classes.  The 8 bits specify, in order, which of the 8 classes the pause frame applies to, and that includes specify any or all.</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2772241076110968565">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/15400138747265699111" rel="nofollow">chocholl@gmail.com</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2772241076110968565" href="#2772241076110968565">10 May 2017 16:54</a>
              </span>
            </div>
            <div class="comment-content">Is it possible to use 802.1Qbb in L2 overlay (VXLAN) env?<br />Cant find any info about that.<br /></div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="5030675986071191738">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c5030675986071191738" href="#5030675986071191738">10 May 2017 17:37</a>
              </span>
            </div>
            <div class="comment-content">You can use it in the underlay (I wouldn&#39;t). It makes no sense to use it in the overlay (and you cannot) because the underlay doesn&#39;t provide lossless transport.</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2931299344401383934">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/05178659719938538550" rel="nofollow">satya</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2931299344401383934" href="#2931299344401383934">09 May 2019 06:19</a>
              </span>
            </div>
            <div class="comment-content">HI .. can the pause frame go over L2TP ...   switch1-------tunnel-----destination  . in this case when switch1 generate a pause frame for destination ,can it pass over the tunnel ?? <br /></div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="5014621092339706222">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c5014621092339706222" href="#5014621092339706222">09 May 2019 13:00</a>
              </span>
            </div>
            <div class="comment-content">Pause frames are useful primarily when you&#39;re trying to implement lossless transport, so it makes no sense to use them over lossy media (= tunnels).</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="5675737429173749229">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/08878680388176980382" rel="nofollow">Unknown</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c5675737429173749229" href="#5675737429173749229">06 June 2019 18:19</a>
              </span>
            </div>
            <div class="comment-content">hi Ivan ,<br /><br />i have got the over all concept but when i tried to implement i got few doubts <br />1] what should PFC structure should contain ? Do we need 8 parameters(Uint) for each class ?<br />   struct {<br />   Uint priority;<br />   Uint class1;<br />   Uint class2;<br />     .<br />     .<br />   Uint class8;<br />    };<br />   2) In that frame class priority is 2 octet and in this 2 octets first 2 bit for enabling class(on/off) and remaining for classes (0 -7) . If i want to set a priority for class 5 what will be my binary form? can you show me those full 2 octet in binary form.</div>
              <div class="comment-replies">
                <div class="comment-thread inline-thread">
                  <span class="thread-count"><a>Replies</a></span>
                    <ol>
      <div>
        <li class="comment" id="4366696210690824670">
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="https://www.blogger.com/profile/13457151406311272386" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c4366696210690824670" href="#4366696210690824670">06 June 2019 21:33</a>
              </span>
            </div>
            <div class="comment-content">PFC is an IEEE standard, so if you want to implement it, you might want to read the IEEE specs... at least that&#39;s how things were supposed to be working when I was still writing code.<br /><br />I&#39;m positive you&#39;ll find all the relevant data structures there.</div>
          </div>
        </li>
      </div>
  </ol>

                </div>
              </div>
          </div>
        </li>
      </div>
  </ol>

    </div>
  </div>
</div>
