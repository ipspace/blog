<div class="comments post" id="comments">
  <h4>22 comments:</h4>
  <div class="comments-content">
    <div class="comment-thread">
        <ol>
      <div>
        <li class="comment" id="2078826469013434704">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">Joe Cozzupoli</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2078826469013434704" href="#2078826469013434704">15 April 2010 07:42</a>
              </span>
            </div>
            <div class="comment-content">Ivan,<br /><br />I&#39;m definitely interested in testing and playing with this feature. Please document it on your blog or email it to me, you have my details.<br /><br />Cheers,<br />Joe.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2462835718266132699">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">Petr Lapukhov</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2462835718266132699" href="#2462835718266132699">15 April 2010 08:04</a>
              </span>
            </div>
            <div class="comment-content">It seems to me you are talking about BGP VPNs over mGRE, which Cisco implements using Resolve in VRF (RIV) &quot;hack&quot; (kind of neat idea, though). Obviously, BGP VPNs over P2P GRE tunnels are pretty trivial, and not as fun as the mGRE counterpart. I believe It would probably worth blogging about Tunnel SAFI and MP-BGP VPNs over L2TPV3 as well.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="6422866559289319748">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c6422866559289319748" href="#6422866559289319748">15 April 2010 08:25</a>
              </span>
            </div>
            <div class="comment-content">You’re right: it’s the RIV hack (although it’s well hidden in 12.2 release) and MPLS VPN over P2P GRE tunnel is plain boring (and it brings you back to PVC world).<br />Thanks for the L2TPv3 idea ... I knew I could count on creative ideas coming from you ;)</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="5587136597185293113">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">chris</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c5587136597185293113" href="#5587136597185293113">16 April 2010 16:01</a>
              </span>
            </div>
            <div class="comment-content">If you&#39;re interested in the L2TPv3, I wrote quickly something about this:<br /><br />http://www.ipflow.utc.fr/index.php/MPLS/VPN_over_L2TPv3_multipoint_tunnels</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="8418647032757251011">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c8418647032757251011" href="#8418647032757251011">16 April 2010 20:21</a>
              </span>
            </div>
            <div class="comment-content">Thank you for the link. It&#39;s almost exactly the same configuration as what I did with mGRE (12.0S, I presume), just using l2tpv3 instead of gre.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="6899312399937449184">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">chris</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c6899312399937449184" href="#6899312399937449184">17 April 2010 09:40</a>
              </span>
            </div>
            <div class="comment-content">Hmm I feel very stupid now :) I didn&#39;t think that I could use another type of tunnel, I took the entire thing as a whole feature... Indeed that was with 12.0(33)S. I&#39;m interested in the 12.2SR config if it is completely different from 12.0S.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="6554588137020045903">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c6554588137020045903" href="#6554588137020045903">17 April 2010 19:21</a>
              </span>
            </div>
            <div class="comment-content">Sure, no problem. Just let me know where you want me to send it ;)</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="8600061570849623129">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">ODIN</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c8600061570849623129" href="#8600061570849623129">20 April 2010 07:44</a>
              </span>
            </div>
            <div class="comment-content">There is another problem with MPLS VPN and GRE: it is not possible to use TE. RSVP doesnt&#39;t work on GRE tunnel interfaces (heh... I want Juniper =)). Actually we have many CE-routers (2811) and we are dreaming about our own &quot;virtual&quot; MPLS backbone with TE. Who knows any way to build this? (SIG! only 2811)</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="3776630875985021128">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c3776630875985021128" href="#3776630875985021128">20 April 2010 10:09</a>
              </span>
            </div>
            <div class="comment-content">I have a vague feeling we’ve got MPLS TE working on a GRE tunnel once. Need to check with the engineer who configured that particular network.<br />Anyhow, why would you want to build MPLS TE network over GRE tunnels? MPLS VPN I can understand (and we have multiple customers doing that).</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="4614981712476471778">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">ODIN (Petr Ankudinov)</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c4614981712476471778" href="#4614981712476471778">20 April 2010 13:33</a>
              </span>
            </div>
            <div class="comment-content">All this CE-routers are already connected through MPLS VPN cloud. But this cloud belongs to our ISPs. The idea is to virtualize our BGP-core. Then it would be easier to control routing tables, it would be possible to use route-targets like some kind of access control between our remote poins and more. But it is not interesting enough to redesign network without TE (to use FRR, control load, etc.). If RSVP will work, I think it can be valuable.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="2635970363680595544">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">ODIN (Petr Ankudinov)</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c2635970363680595544" href="#2635970363680595544">20 April 2010 13:35</a>
              </span>
            </div>
            <div class="comment-content">All this CE-routers are already connected through MPLS VPN cloud. But this cloud belongs to our ISPs. The idea is to virtualize our BGP-core. Then it would be easier to control routing tables, it would be possible to use route-targets like some kind of access control between our remote poins and more. But it is not interesting enough to redesign network without TE (to use FRR, control load, etc.). If RSVP will work, I think it can be valuable.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="4868112946734490237">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">ODIN (Petr Ankudinov)</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c4868112946734490237" href="#4868112946734490237">20 April 2010 14:12</a>
              </span>
            </div>
            <div class="comment-content">In short: main target is fast, but scalable core.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="3871924518980626405">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">Wiggo</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c3871924518980626405" href="#3871924518980626405">22 April 2010 10:15</a>
              </span>
            </div>
            <div class="comment-content">Anyone know if this solution will support more than one label(other services than vpn)? If I use route reflectors in this design, do they also have to have the MPLS o mgre support? As for now it seems it is only supported on 7600 with sip 400, asr and isr g2 is coming later this year.<br /><br />Cheers,<br />Wiggo.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="4124133411178307926">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c4124133411178307926" href="#4124133411178307926">22 April 2010 16:21</a>
              </span>
            </div>
            <div class="comment-content">While the functionality seems to be purely MPLS/VPN-related, it could potentially support CsC. A test would be in order to support this speculation ;)<br /><br />Route reflectors work well with the 12.2 syntax; they just need to support VPNv4 AF. 12.0S is trickier.<br /><br />The feature runs on a 7200. 7200 is the only supported platform for 12.0S release; it might not be supported with 12.2SRE. You obviously know more about ASR and ISR than I do.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="5525382073352939212">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">dbm</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c5525382073352939212" href="#5525382073352939212">23 April 2010 13:49</a>
              </span>
            </div>
            <div class="comment-content">There is actually a pair of documents from cisco, they are cisco validated designs 1 and 2.<br />They are described as &quot;next generation wan architecture&quot; with mpls.<br />One of the chapters in the CVDs is called 2547oDMVPN. As the title describes, cisco has tested (and now deployed on at least one large customer network) building mpls VPNs over DMVPN environments. It includes bugs, caveates, some config, etc. Its worth a read if you are looking into CSC or deploying MPLS for the enterprise.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="5390307078008774514">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c5390307078008774514" href="#5390307078008774514">23 April 2010 16:50</a>
              </span>
            </div>
            <div class="comment-content">Yeah, I&#39;m aware of those documents; we&#39;ve been discussing MPLS-over-DMVPN in this blog a while ago. This one is almost identical from the encapsulation perspective, but uses completely different configuration.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="1537415954259322953">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">benner</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c1537415954259322953" href="#1537415954259322953">16 May 2011 22:40</a>
              </span>
            </div>
            <div class="comment-content">Ivan,<br /><br />currently I am looking in to some options to extend a customer MPLS network... As far as I can see, I have to open options: DMVPN and mGRE... Not that I dont want to do deep investigation on both, but maybe you can easily give some pro&#39;s and cons about each of the solutions. I am still looking high level and for the moment it is not yet clear to me which solution is best.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="3856199184089820649">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c3856199184089820649" href="#3856199184089820649">17 May 2011 16:31</a>
              </span>
            </div>
            <div class="comment-content">Do you mean DMVPN versus MPLS-over-mGRE (the real stuff where you don&#39;t have to configure the tunnels?). I would always go with MPLS-over-mGRE if you can keep the mGRE part in a separate AS.<br /><br />Also keep in mind that IPsec is an integral part of DMVPN whereas you might still need an encryption solution with mGRE (GETVPN would be the most scalable option).<br /><br />If you need in-depth design recommendation/review, consider this: http://www.ioshints.info/ExpertExpress</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="7896348539204053496">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">Ben Blendeman</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c7896348539204053496" href="#7896348539204053496">26 May 2011 18:34</a>
              </span>
            </div>
            <div class="comment-content">Ivan,<br /><br />thanks for your reply... indeed GETVPN should be an option to have MPLSomGRE encrypted and I was already looking in to that, but can not find a thing about those technologies mixed... The question is if this is a good solution in real life (where QoS and multicast needs to be supported). Are there any references out there in the field?<br /><br />Ben</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="5328784567177427504">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c5328784567177427504" href="#5328784567177427504">26 May 2011 20:16</a>
              </span>
            </div>
            <div class="comment-content">Great architecture, meet harsh reality ;) Will write a blog post about potential caveats.<br /><br />Don&#39;t have any GETVPN-related references (but maybe someone else has). We do run MPLS over GRE over P2P IPsec tunnels and it works on a large variety of platforms.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="1293517200735396563">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">kwame</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c1293517200735396563" href="#1293517200735396563">09 November 2011 20:19</a>
              </span>
            </div>
            <div class="comment-content">Yes we&#39;re running MPLS VPN over mGRE on our production network. It is the core technology for upgrading our WAN, close to 600 sites, from ATM and FR. We&#39;ve upgraded just about some 30 sites and we&#39;ve hit a snag. As suggested by Ivan, we&#39;ve a 2-AS design with the mGRE in the WAN and the non-mGRE in the Campus. Our WAN provider is ATT. Inside of the WAN things work like a charm. However VRF traffic between the 2 regions is a problem. We are dropping packets in either direction and it&#39;s limited to just VRF traffic. The ASBRs double as RRs for their respective AS. The WAS ASBR is a c7606 and the Campus ASBR is an ASR1002. We&#39;re now at a standstill trying to figure out the problem. By the way we connect to ATT over OC12 so it&#39;s not bandwidth constrained yet. Is anyone experiencing anything like this?  We opted for this solution given its simplicity relative to the DMPVN solution. Had lots of help from Petr Lapukhov of INE in figuring the DMVPN solution out especially with regards to multicast.</div>
          </div>
        </li>
      </div>
      <div>
        <li class="comment" id="5004025094799390384">
          <!--
          <div class="avatar-image-container">
            <img src="https://resources.blogblog.com/img/blank.gif">
          </div>
          -->
          <div class="comment-block">
            <div class="comment-header">
              <cite class="user"><a href="None" rel="nofollow">Ivan Pepelnjak</a></cite>
              <span class="datetime secondary-text">
                <a rel="nofollow" id="c5004025094799390384" href="#5004025094799390384">09 November 2011 22:22</a>
              </span>
            </div>
            <div class="comment-content">Based on your description, it seems the c7600 might do CPU-based forwarding (MPLSoGRE is a problem), which absolutely kills it.</div>
          </div>
        </li>
      </div>
  </ol>

    </div>
  </div>
</div>
