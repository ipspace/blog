{
  "comments": [
    {
      "comments": [
        {
          "date": "26 November 2019 14:49",
          "html": "Nobody sane goes down that rabbit hole. The only realistic option is to increase the underlay (transport) MTU.",
          "id": "8494802754233133659",
          "image": "https://lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35",
          "name": "Ivan Pepelnjak",
          "profile": "https://www.blogger.com/profile/13457151406311272386",
          "pub": "2019-11-26T14:49:48.885+01:00",
          "ref": "1273467682766462660",
          "type": "comment"
        },
        {
          "date": "26 November 2019 19:06",
          "html": "Not sure if you meant jumbo frames:<br />https://netcraftsmen.com/just-say-no-to-jumbo-frames/",
          "id": "3794085103687251230",
          "image": "https://lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35",
          "name": "Bogdan Golab",
          "profile": "https://www.blogger.com/profile/12912702162710760711",
          "pub": "2019-11-26T19:06:23.693+01:00",
          "ref": "1273467682766462660",
          "type": "comment"
        },
        {
          "date": "26 November 2019 19:35",
          "html": "There are two reasons for jumbo frames:<br /><br />* Because some people believe they increase TCP/IP throughput (usually not true unless you&#39;re dealing with suboptimal TCP stacks)<br />* Because you don&#39;t want to deal with client MTU size in tunneling environments.<br /><br />And yes, I completely agree with everything Peter wrote, but sometimes you have to choose the lesser of two evils.",
          "id": "4434463992062436843",
          "image": "https://lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35",
          "name": "Ivan Pepelnjak",
          "profile": "https://www.blogger.com/profile/13457151406311272386",
          "pub": "2019-11-26T19:35:57.172+01:00",
          "ref": "1273467682766462660",
          "type": "comment"
        },
        {
          "date": "26 November 2019 19:46",
          "html": "Yes, sure. It is much better than other tricks like aligning hosts with smaller mtu, pmtud, mss adjustment, and so on. Like every other tool has its good &amp; bad sides.",
          "id": "4521119680442695623",
          "image": "https://lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35",
          "name": "Bogdan Golab",
          "profile": "https://www.blogger.com/profile/12912702162710760711",
          "pub": "2019-11-26T19:46:08.597+01:00",
          "ref": "1273467682766462660",
          "type": "comment"
        }
      ],
      "date": "26 November 2019 14:26",
      "html": "And of course the issues with MTU mismatch when doing any sort of tunneling. All the VMs will need changes to communicate efficiently.  ",
      "id": "1273467682766462660",
      "image": "https://lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35",
      "name": "Iben Rodriguez",
      "profile": "https://www.blogger.com/profile/15478719711562892717",
      "pub": "2019-11-26T14:26:47.155+01:00",
      "ref": "6115382201690425335",
      "type": "comment"
    },
    {
      "date": "26 November 2019 16:42",
      "html": "Honestly the future looks to be running some IGP on the servers themselves so they can keep their IP and can move anywhere without issue. Of course if your stupid app needs L2 to another host you are always going to be screwed.",
      "id": "8696615977093470572",
      "image": "https://lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35",
      "name": "Unknown",
      "profile": "https://www.blogger.com/profile/17266719222478374259",
      "pub": "2019-11-26T16:42:46.184+01:00",
      "ref": "6115382201690425335",
      "type": "comment"
    },
    {
      "date": "27 November 2019 02:50",
      "html": "Disagree, you are just changing a default value, and it doesn\u2019t harm toy in any way...if you can\u2019t keep your configs in sync with your intent (larger but consistent MTU on EVERY link) you have got bigger problems... ",
      "id": "5106119441133196189",
      "image": "https://4.bp.blogspot.com/-Jm8onWGyM0M/WoYk1lJ1zuI/AAAAAAAAAy8/aU73FTiTCFUgsnYdYVJ8cf3PRUZqGlKOACK4BGAYYCw/s32/jeff_tantsura.jpg",
      "name": "Jeff Tantsura",
      "profile": "https://www.blogger.com/profile/17193851449183304827",
      "pub": "2019-11-27T02:50:57.118+01:00",
      "ref": "6115382201690425335",
      "type": "comment"
    },
    {
      "comments": [
        {
          "date": "07 December 2019 08:21",
          "html": "That&#39;s probably why it was used in Fabricpath, unfortunately the best tech isn&#39;t always the prevailing candidate. ",
          "id": "2869163733740783435",
          "image": "https://lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35",
          "name": "Randall Greer",
          "profile": "https://www.blogger.com/profile/08517209064574010376",
          "pub": "2019-12-07T08:21:25.953+01:00",
          "ref": "8126335437232032719",
          "type": "comment"
        }
      ],
      "date": "27 November 2019 17:47",
      "html": "This is where routing protocols like IS-IS can shine. Leveraging it for link discovery, link mtu validation, etc... can be advantageous. I like having choices for IGP&#39;s, but if we build solutions that only converge on one routing protocol isn&#39;t that harmful?",
      "id": "8126335437232032719",
      "image": "https://lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35",
      "name": "Heiden Stevens",
      "profile": "https://www.blogger.com/profile/18036723516613666410",
      "pub": "2019-11-27T17:47:28.720+01:00",
      "ref": "6115382201690425335",
      "type": "comment"
    },
    {
      "comments": [
        {
          "date": "01 December 2019 16:05",
          "html": "Hi Aldrin,<br /><br />&quot;Pretty much all EVPN implementations support multiple routing protocols.&quot; &lt;&lt; Correct. That&#39;s not necessarily what the vendor SEs are telling the customers.<br /><br />&quot;There\u2019s a difference between a reference design and feature support.&quot; &lt;&lt; Agree. One of the differences is how many bugs you&#39;ll encounter when using a supported feature that is rarely used.<br /><br />&quot;there are statements here that are hearsay&quot; &lt;&lt; OK, tell me more. Would love to hear what you consider hearsay (is it hearsay if a customer tells me how badly he was burned?) and very old news.<br /><br />I&#39;m guessing you know how to contact me directly if you want to take the discussion offline ;)<br /><br />Kind regards, Ivan",
          "id": "1567447238868454492",
          "image": "https://lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35",
          "name": "Ivan Pepelnjak",
          "profile": "https://www.blogger.com/profile/13457151406311272386",
          "pub": "2019-12-01T16:05:03.248+01:00",
          "ref": "831176054126186737",
          "type": "comment"
        }
      ],
      "date": "01 December 2019 15:52",
      "html": "Pretty much all EVPN implementations support multiple routing protocols.  Including IS-IS, OSPF and EBGP as IGP.  There\u2019s a difference between a reference design and feature support.  Also, with all due respect, there are statements here that are hearsay, or at best very old news, and so do unnecessary harm.  This stuff is mostly software and software is not static.",
      "id": "831176054126186737",
      "image": "https://lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35",
      "name": "Aldrin",
      "profile": "https://www.blogger.com/profile/15493370358037866116",
      "pub": "2019-12-01T15:52:35.484+01:00",
      "ref": "6115382201690425335",
      "type": "comment"
    },
    {
      "comments": [
        {
          "date": "09 December 2019 17:41",
          "html": "Thank you for the extensive reply!<br /><br />While I agree with many of your arguments, I think it doesn&#39;t make sense to use the same default behavior for EVPN address family as we did for IPv4 address family. Even in VPNv4 address family some vendors have an option of specifying the BGP next hop on route origination, having a sane default (loopback VTEP) in VXLAN environment should be a no-brainer.<br /><br />More in a blog post sometime in January 2020 - too many other things to publish before Christmas break.<br /><br />Enjoy the holidays and wish you all the best in 2020!<br />Ivan",
          "id": "8613292425029230908",
          "image": "https://lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35",
          "name": "Ivan Pepelnjak",
          "profile": "https://www.blogger.com/profile/13457151406311272386",
          "pub": "2019-12-09T17:41:44.192+01:00",
          "ref": "3854070778949161857",
          "type": "comment"
        }
      ],
      "date": "09 December 2019 04:14",
      "html": "Hi Ivan, <br /><br />Following blogger captures in detail EVPN over EBGP using Junos dating back to 2016.  <br />https://blog.noc.grnet.gr/2016/09/28/lab-on-evpn-vxlan-on-juniper-qfx5100-switches-3/<br />You can see the multi-hop EBGP sessions for EVPN required to set the loopback as the VTEP IP (i.e. BGP protocol next-hop).  <br /><br />If you want to set the BGP protocol next-hop to a physical port address you could share session with underlay EBGP.  However, with IP-based overlays like VXLAN, having more than one uplink IP interface can be a problem for implementing EVPN-native active-active multi-homing which requires the source IP of a VXLAN tunnel from a PE to match the VTEP IP used on its EVPN ES routes to perform split-horizon filtering (as opposed to MLAG with anycast VTEP IP).  Having more than one VTEP IP per PE makes EVPN-native multi-homing more complex to implement and requires more state to do the SH filtering.  <br /><br />Hopefully folks also know that when using EBGP with EVPN, it&#39;s important that intermediate EBGP hops do not rewrite the protocol next-hop set by the egress PE since we need the VXLAN tunnels to be addressed to the correct egress PE and not somewhere short of that.  <br /><br />All considered, IMO it&#39;s more straight-forward to use IBGP with RRs for EVPN, rather than to force-fit EVPN into hop-by-hop EBGP route propagation.  Anyway it has been a long-standing convention to use IBGP for overlays within an instance of a transport domain.  Messing with that means operators have to really understand what they are doing and why, and to me that isn&#39;t worth the fewer lines of configuration.<br /><br />FYI, Junos leans toward being explicit about configuration leaving it to automation to simplify management of network.  We think it is best for operators to know their network.<br /><br />I&#39;m told there was an issue with EVPN using EBGP prior to 14.x, but we&#39;re at 19.x now.  We can take it offline from here if the discussion is not helpful for the community.<br /><br />Hopefully this sets the record straight.<br /><br />Cheers,<br />Aldrin",
      "id": "3854070778949161857",
      "image": "https://lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35",
      "name": "Aldrin",
      "profile": "https://www.blogger.com/profile/15493370358037866116",
      "pub": "2019-12-09T04:14:04.172+01:00",
      "ref": "6115382201690425335",
      "type": "comment"
    }
  ],
  "count": 13,
  "id": "6115382201690425335",
  "type": "post",
  "url": "2019/11/the-evpn-dilemma.html"
}