comments:
- date: 13 March 2017 11:44
  html: Hi Ivan - thanks for the post.  It&#39;s been a great project to work on.  When
    we started we found it very hard to find references at the scale we were planning.  I
    hope the White Paper will help others in this position and give something back
    to the community.
  id: '1994967595168326528'
  image: https://lh5.googleusercontent.com/-OyMAC4yiC1E/AAAAAAAAAAI/AAAAAAAAHxQ/bgWCKIx3WCM/s32-c/photo.jpg
  name: Richard Haigh
  profile: https://www.blogger.com/profile/15242699990682926509
  pub: '2017-03-13T11:44:47.189+01:00'
  ref: '3972789693503831154'
  type: comment
- date: 13 March 2017 12:47
  html: Hi Ivan,<br />Thanks for posting this. <br />It&#39;s great to know this platform
    is following what you&#39;ve been teaching on your courses.
  id: '6619957364581778071'
  image: https://lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35
  name: Claudio Pires
  profile: https://www.blogger.com/profile/08050361399160342780
  pub: '2017-03-13T12:47:59.648+01:00'
  ref: '3972789693503831154'
  type: comment
- comments:
  - date: 13 March 2017 19:09
    html: '&quot;not as bad as they used to be&quot; &lt;&lt; that&#39;s a nice summary.
      Anywhere near line rate only with latest NICs, latest kernel, and 9K MTU. Seems
      1Gbps is still ludicrous speed in OpenStack world ;))<br /><br />http://blog.ipspace.net/2014/11/open-vswitch-performance-revisited.html'
    id: '1815535395349472347'
    image: https://lh3.googleusercontent.com/-ZIhwz6bLuK0/AAAAAAAAAAI/AAAAAAAAFtg/mLtCQ3p4_0E/s32-c/photo.jpg
    name: Ivan Pepelnjak
    profile: https://www.blogger.com/profile/13457151406311272386
    pub: '2017-03-13T19:09:45.465+01:00'
    ref: '5380773003066368906'
    type: comment
  date: 13 March 2017 13:54
  html: 'Regarding Neutron&#39;s default implementation - things are not so bad as
    they used to be (e.g. see https://www.mirantis.com/blog/openstack-neutron-performance-and-scalability-testing-summary/). '
  id: '5380773003066368906'
  image: https://resources.blogblog.com/img/blank.gif
  name: Matjaz Pancur
  profile: http://fri.uni-lj.si
  pub: '2017-03-13T13:54:59.013+01:00'
  ref: '3972789693503831154'
  type: comment
- date: 13 March 2017 22:39
  html: "&quot;Don\u2019t reinvent the wheel \u2013 use a commercial distribution\
    \ &quot; -- been there, tried to move forward and find quite difficult, a commercial\
    \ distro not only help you in the deployment also allow you to move on and be\
    \ able to meet deadlines (internals and for your personal interest :) ), doing\
    \ by hand is possible and you learn a lot but is not the path for all organizations\
    \ for sure."
  id: '359035612868581076'
  image: https://3.bp.blogspot.com/-6FgdrRPiXHE/WHDhbKeUQzI/AAAAAAAADFg/KDpD1hvJVr0lbu2YnXT73jR_-tAZx3oTwCK4B/s32/ccielogo.png
  name: Ariel Liguori
  profile: https://www.blogger.com/profile/11059180104069090363
  pub: '2017-03-13T22:39:59.259+01:00'
  ref: '3972789693503831154'
  type: comment
- date: 19 March 2017 17:13
  html: "&quot;Don\u2019t reinvent the wheel \u2013 use a commercial distribution&quot;<br\
    \ />As usual: it really depends. Going with a commercial distribution has its\
    \ fair share of drawbacks: financial scalability, vendor lock-in, bloat, debatable\
    \ architectural choices &amp; decisions, required in-house knowledge or rather\
    \ lack thereof. Don&#39;t fool yourself, if you choose to run a private cloud\
    \ in the first place and depend on your vendor of choice to solve all or even\
    \ most of the issues that will pop up, especially those high priority more complicated\
    \ critical ones occuring at undesirable times... good luck to you. To rephrase\
    \ an earlier post: been there. And be sure to research (continuous) upgrades;\
    \ a nice installer and .ppt promises are worthless. Granted, recent commercial\
    \ distributions are (getting) better, but if you already employ the required subject-savvy\
    \ people and automation tools &amp; processes, rolling + maintaining your own\
    \ deployment isn&#39;t all that complicated. You can still fall back on support\
    \ from your vendor, but you&#39;re not completely dependent on it. Until vendors\
    \ are willing to move from license pushers to actually offering services and building\
    \ a symbiotic relationship with their customers where interests are aligned I&#39;d\
    \ seriously consider all requirements, pro&#39;s &amp; con&#39;s. And not only\
    \ the technical ones.<br />Might be your private cloud is a smaller setup for\
    \ testing and development purposes only, or there are other reasons where using\
    \ a commercial distribution makes perfectly sense. But I certainly wouldn&#39;t\
    \ claim choosing a commercial OpenStack distribution is an obvious no-brainer.<br\
    \ /><br />And as pointed out by Matjaz, as it&#39;s now 2017, even bare bones\
    \ OVS neutron has moved on. It might not yet be able to saturate a 100GbE NIC\
    \ in a single compute/network node, but I&#39;m not sure which scalable cloud\
    \ workload would need that. It&#39;s sure nice to know neutron OVS would be able\
    \ to drive 100GbE at line rate, but it&#39;s all about scaling out and I&#39;d\
    \ say that you&#39;d be hitting a ToR leaf-spine oversubscription before running\
    \ into compute node network I/O bound issues. Ceph is a valid use case for e.g.\
    \ 25/40GbE NIC&#39;s, low latency (although there&#39;s still the code path),\
    \ but as Ceph doesn&#39;t need neutron/OVS thats not an issue."
  id: '6765250730706335965'
  image: https://lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35
  name: Albert Siersema
  profile: https://www.blogger.com/profile/04847257511165693348
  pub: '2017-03-19T17:13:40.980+01:00'
  ref: '3972789693503831154'
  type: comment
- comments:
  - date: 19 March 2017 19:29
    html: I knew the Linux distro argument would pop up, and of course it&#39;s totally
      valid :-) I should have stated that I didn&#39;t necessarily meant building
      on OpenStack upstream but rather using distro OpenStack packages, with(out)
      vendor support if you like. Then deploy OpenStack with own orchestration tools,
      i.e. &quot;yum/apt install &amp; configuration files&quot;. This is what we
      did, using saltstack. There&#39;s even quite a number of downloadable deployment
      projects on e.g. github by now.<br />Ask if $vendor is willing to support their
      own packages when rolled out with your own orchestration tooling and/or see
      if $vendor will be using that fact to cover up a support organization lacking
      sufficient OpenStack know how (sadly that last addition isn&#39;t purely drivel
      from a cynical mind.)<br /><br />I might come across as grumpy rambling, just
      wanted to share a perspective from some folks who have gone through all this
      in reality. YMMV of course. I appreciate your blog and indeed it&#39;s awesome
      to see someone taking the effort to share their implementation. I hope we&#39;re
      allowed (time-wise as well) to do the same sometime soon.<br /><br />Starting
      out experiments or a PoC with an installer is certainly a good idea, even if
      that installer is only devstack/RDO. And using a commercial installer all the
      way will make and keep some people happy, sure of that. The point is, after
      the PoC you need to choose a path for your production private cloud. We&#39;ve
      experienced the pain of migrating production clouds away from a commercial installer
      to our own orchestration &amp; deployment (but we&#39;re still glad we did,
      and had very valid reasons for that move to begin with).<br /><br />Regarding
      OVS, obviously your VMware vSwitch comment is valid, I did read the details
      (and did some benchmarking ourselves after all, we had to choose an option).
      neutron/OVS is more like NSX though (multi tenant, self service, e.g. vxlan
      overlay). As we&#39;re not using NSX I haven&#39;t looked into actual NSX benchmarking.  <br
      />The Mirantis link fails to mention if they&#39;re using the native OVS firewall
      driver, already a cleaner &amp; faster (without the veth/linux bridges/eb- &amp;
      iptables mess).<br />Also see e.g.:<br />https://software.intel.com/en-us/articles/implementing-an-openstack-security-group-firewall-driver-using-ovs-learn-actions<br
      />And I still stand by my comment regarding VMWare (ESX) enterprise versus private
      cloudy workloads :-) I&#39;d rather scale out my cloud/deep learning/big data
      workloads over e.g. N racks with say 30-40 compute nodes per rack. Even with
      the current abominable OVS performance that could mean up to 40Gbps throughput
      per rack with a single ToR or up to double that if you&#39;re ECMP-ing over
      two ToR&#39;s (which is what we do). As Ceph is a valid and popular storage
      option, your design needs to include that traffic on the 10(/25?)GbE NIC(s)
      in your compute node as well (or sure, you could technically &amp; financially
      emulate a SAN by dedicating network infrastructure to Ceph IP storage).<br />
    id: '865011451685971063'
    image: https://lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35
    name: Albert Siersema
    profile: https://www.blogger.com/profile/04847257511165693348
    pub: '2017-03-19T19:29:24.786+01:00'
    ref: '8165682209364676737'
    type: comment
  date: 19 March 2017 18:06
  html: '&quot;Going with a commercial distribution has its fair share of drawbacks&quot;
    &lt;&lt; Couldn&#39;t agree more. I&#39;m also positive people had exactly the
    same sentiment regarding Linux distros a decade ago. I don&#39;t know too many
    people building Linux from sources these days.<br /><br />Also, I know teams that
    spent a year setting up OpenStack from sources. I know other teams that tried
    (because it would be cheaper than buying something) and failed miserably wasting
    months and man-years.<br /><br />I think a fair summary would be &quot;if you
    never tried it before, start with a distro, and if you know what you&#39;re doing
    you&#39;re not listening to my rambling anyway&quot; Agreed?<br /><br />As for
    OVS performance, do read the details, and don&#39;t be misled by 9K MTU measurements.
    The performance documented in that report is still not anywhere close to where
    VMware vSwitch was years ago.'
  id: '8165682209364676737'
  image: https://lh3.googleusercontent.com/-ZIhwz6bLuK0/AAAAAAAAAAI/AAAAAAAAFtg/mLtCQ3p4_0E/s32-c/photo.jpg
  name: Ivan Pepelnjak
  profile: https://www.blogger.com/profile/13457151406311272386
  pub: '2017-03-19T18:06:14.042+01:00'
  ref: '3972789693503831154'
  type: comment
count: 8
id: '3972789693503831154'
type: post
url: 2017/03/worth-reading-building-openstack.html
